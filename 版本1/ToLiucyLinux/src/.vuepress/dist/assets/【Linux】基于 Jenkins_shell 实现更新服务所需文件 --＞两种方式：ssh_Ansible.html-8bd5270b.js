import{_ as l}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o,c,a as s,b as a,d as e,e as i}from"./app-6706a352.js";const r={},p=s("figure",null,[s("img",{src:"https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/018aee30d8ea4271888ad311a6a34ddd.jpeg",alt:"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°",tabindex:"0",loading:"lazy"}),s("figcaption",null,"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°")],-1),d=s("p",null,[a("ğŸ‘¨â€ğŸ“"),s("strong",null,"åšä¸»ç®€ä»‹")],-1),b={href:"https://blog.csdn.net/liu_chen_yang?type=blog",target:"_blank",rel:"noopener noreferrer"},u=s("br",null,null,-1),v={href:"https://bbs.huaweicloud.com/community/myblog",target:"_blank",rel:"noopener noreferrer"},g=s("br",null,null,-1),h={href:"https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz",target:"_blank",rel:"noopener noreferrer"},m=s("br",null,null,-1),k=s("strong",null,"äº¤æµç¤¾åŒºï¼š",-1),_={href:"https://bbs.csdn.net/forums/lcy",target:"_blank",rel:"noopener noreferrer"},f=s("br",null,null,-1),y=s("br",null,null,-1),j=s("hr",null,null,-1),q=s("h2",{id:"å‰æ",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#å‰æ","aria-hidden":"true"},"#"),a(" å‰æï¼š")],-1),x=s("ul",null,[s("li",null,"éœ€è¦å®‰è£…å¥½Jenkins")],-1),$={href:"https://liucy.blog.csdn.net/article/details/127202910",target:"_blank",rel:"noopener noreferrer"},z={href:"https://liucy.blog.csdn.net/article/details/127883522",target:"_blank",rel:"noopener noreferrer"},w={href:"https://blog.csdn.net/liu_chen_yang/category_12493057.html?spm=1001.2014.3001.5482",target:"_blank",rel:"noopener noreferrer"},J=i(`<h2 id="ä¸€ã€æ–°å»ºä¸€ä¸ªitem" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ–°å»ºä¸€ä¸ªitem" aria-hidden="true">#</a> ä¸€ã€æ–°å»ºä¸€ä¸ªItem</h2><blockquote><p>æ–°å»º Item --&gt; é€‰æ‹©<strong>Freestyle project</strong> --&gt; è‡ªå·±èµ·ä¸€ä¸ªåå­— --&gt;ç¡®å®š</p></blockquote><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/edf31fc760ff4b778edcf137a2aa3924.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><h2 id="äºŒã€å¢åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤å¹¶å¡«å†™æ„å»ºå†…å®¹" tabindex="-1"><a class="header-anchor" href="#äºŒã€å¢åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤å¹¶å¡«å†™æ„å»ºå†…å®¹" aria-hidden="true">#</a> äºŒã€å¢åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤å¹¶å¡«å†™æ„å»ºå†…å®¹</h2><blockquote><p>ç¿»åˆ°æœ€ä¸‹é¢ï¼Œæ‰¾åˆ° <strong>Build Steps</strong> --&gt; Execute shell</p></blockquote><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/84de0cb3953e49af92ad57da2ded9165.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>åœ¨è¿™é‡Œå†™shellè„šæœ¬å°±è¡Œï¼Œéœ€è¦æ‰§è¡Œä»€ä¹ˆå’Œlinuxä¸Šæ‰§è¡Œä¸€æ ·çš„ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/998426455d79425984f47c7d5e0cad71.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>å…ˆä½¿ç”¨ä¸€æ¡å‘½ä»¤æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œè‡ªå·±éšä¾¿è¾“å…¥é‚£æ¡å‘½ä»¤éƒ½å¯ä»¥ï¼›è¿™é‡Œæˆ‘å†™ä¸€ä¸ª<code>ls /root/</code>å‘½ä»¤ï¼›</p><p>å†™å®Œä¹‹åç‚¹å‡»<code>ä¿å­˜</code>ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/71be279c3b304f61861a5d0a2768776a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><h2 id="ä¸‰ã€æ„å»ºä¸€ä¸ªç®€æ˜“çš„é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€æ„å»ºä¸€ä¸ªç®€æ˜“çš„é¡¹ç›®" aria-hidden="true">#</a> ä¸‰ã€æ„å»ºä¸€ä¸ªç®€æ˜“çš„é¡¹ç›®</h2><p>ä¿å­˜å®Œæ¯•ä¹‹åï¼Œç‚¹å‡»å·¦è¾¹çš„<code>Build Now</code>æ„å»ºé¡¹ç›®ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/81bcab819c8d4afd9dbabdae9b138f00.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>è¿™æ ·å°±æ„å»ºå®Œäº†ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼›<br> ç›´æ¥ç‚¹å‡»æ„å»ºæˆåŠŸçš„é‚£ä¸ªä½ç½®ï¼Œæˆ–è€…åé¢æœ‰ä¸ªå°ä¸‰è§’ï¼Œåœ¨ç‚¹å‡»<code>æ§åˆ¶å°è¾“å‡º</code></p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/5b1d08fb5d314a1c9719fe8e8bc0becb.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>è¿™å—å°±è¾“å‡ºäº†åˆšåˆšæ‰§è¡Œçš„è„šæœ¬æ—¥å¿—äº†ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/c2d3a533cce148f69f5d9c76c2a64b0a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>è¿™æ ·ï¼Œè‡ªå®šä¹‰æ„å»ºé¡¹ç›®å°±å®Œæˆäº†ï¼›</p><p>å¦‚æœéœ€è¦æ›´æ”¹é…ç½®ï¼Œå¯ä»¥ç‚¹å‡»ä¸Šé¢çš„é¡¹ç›®åç§° --&gt; ç„¶åå·¦è¾¹çš„é…ç½® --&gt; æ¥ç€ç»™shellå³å¯ï¼›</p><p><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/80efef8e4d2d4a0cad8d85a0389994ce.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"><br><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/60f8d38198d94e5d892dc1676fd1e83c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"><br><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/2293180a1c6c49dc98e68fdeaf272997.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"></p><p>è¿™æ ·å®Œæ•´çš„ä¸€ä¸ªä½¿ç”¨shellè„šæœ¬è‡ªå®šä¹‰æ„å»ºé¡¹ç›®å°±å®Œæˆäº†ï¼›è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„åˆ—å­ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®²è§£ï¼š<strong>ä½¿ç”¨Jenkinsæ›´æ–°æœåŠ¡jaråŒ…</strong>ã€‚</p><h2 id="å››ã€ä½¿ç”¨-jenkins-æ›´æ–°æœ¬åœ°çš„ä¸€ä¸ªjaråŒ…" tabindex="-1"><a class="header-anchor" href="#å››ã€ä½¿ç”¨-jenkins-æ›´æ–°æœ¬åœ°çš„ä¸€ä¸ªjaråŒ…" aria-hidden="true">#</a> å››ã€ä½¿ç”¨ Jenkins æ›´æ–°æœ¬åœ°çš„ä¸€ä¸ªjaråŒ…</h2><p>è¿˜æ˜¯å’Œå‰ä¸¤éƒ¨ä¸€æ ·ï¼Œå…ˆæ–°å»ºä¸€ä¸ªItemï¼Œåœ¨å¢åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤å¹¶å¡«å†™æ„å»ºå†…å®¹ï¼›æœ€ä¸»è¦æ˜¯shellè„šæœ¬é‡Œçš„å†…å®¹ï¼›</p><p>è¿™é‡Œç»™å¤§å®¶å†™ä¸€ä¸ªç¤ºä¾‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># æœ¬æœºjaråŒ…è·¯å¾„ï¼ˆè·¯å¾„å¯ä»¥è‡ªå·±å®šä¹‰ï¼‰</span>
<span class="token assign-left variable">src_jar_path</span><span class="token operator">=</span><span class="token string">&quot;/root/a.jar&quot;</span>

<span class="token comment"># è¿œç¨‹JARåŒ…è·¯å¾„ï¼ˆè·¯å¾„å¯ä»¥è‡ªå·±å®šä¹‰ï¼‰</span>
<span class="token assign-left variable">dest_jar_path</span><span class="token operator">=</span><span class="token string">&quot;/home/lcy/cs/a.jar&quot;</span>

<span class="token comment"># åˆ›å»ºç›®æ ‡è·¯å¾„ï¼ˆæ²¡æœ‰åˆ™åˆ›å»ºï¼Œæœ‰åˆ™è·³è¿‡ï¼‰</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/lcy/cs/

<span class="token comment"># å¤‡ä»½jaråŒ…,æ›¿æ¢jaråŒ…ï¼›å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™å¤‡ä»½æ–‡ä»¶å¹¶å¤åˆ¶æ–°çš„æ–‡ä»¶è¿‡å»ï¼›å¦‚æœæ²¡æœ‰ç›´æ¥å¤åˆ¶æ–°çš„æ–‡ä»¶è¿‡å»ï¼Œå¹¶æç¤ºï¼›</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">$dest_jar_path</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
	<span class="token function">mv</span> <span class="token variable">$dest_jar_path</span> <span class="token variable">$dest_jar_path</span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token variable">)</span></span>
	<span class="token function">cp</span> <span class="token parameter variable">-ar</span> <span class="token variable">$src_jar_path</span> <span class="token variable">$dest_jar_path</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç›®æ ‡è·¯å¾„æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶&quot;</span>
	<span class="token function">cp</span> <span class="token parameter variable">-ar</span> <span class="token variable">$src_jar_path</span> <span class="token variable">$dest_jar_path</span>
<span class="token keyword">fi</span>

<span class="token comment"># å¤åˆ¶å®Œä¹‹åï¼Œè‡ªå·±åŠ ä¸€ä¸‹å¯åŠ¨å‘½ä»¤å³å¯ï¼›</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™å®Œä¹‹åï¼Œç‚¹å‡»ä¿å­˜ï¼Œå¹¶æ„å»ºï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/3425b55baac74eb29bea84cf06e567d4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>å®Œæˆä¹‹åå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æœåŠ¡å™¨ä¸Šæœ‰æ²¡æœ‰è¿™ä¸ªjaråŒ…äº†ï¼›å¯ä»¥çœ‹åˆ°æ²¡é—®é¢˜ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/a8622b95e4ed47ea8d846eb38c59d23e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>é‚£ä¹ˆåœ¨æ‰§è¡Œä¸€ä¸‹ï¼Œå°±ä¼šå¤‡ä»½è¿™ä¸ªï¼Œç„¶ååœ¨æ‹¿ä¸€ä¸ªæ–°çš„jaråŒ…è¿‡æ¥ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/77c50639741d40cea789dceee44b1fd3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>å¯ä»¥çœ‹åˆ°å°†ä¹‹å‰çš„å¤‡ä»½äº†ï¼Œç„¶åæœ‰æ‹‰æ¥ä¸€ä¸ªæ–°çš„jaråŒ…ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/fe8e63cd407941559fce476c9199ab58.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>è¿™æ ·å°±å®ç°æ›´æ–°æ“ä½œäº†ï¼Œä¸è¿‡è¿™åªæ˜¯æœ¬æœºæ›´æ–°ï¼Œè¦æƒ³å…¶ä»–æœåŠ¡å™¨ä¹Ÿæ›´æ–°æˆ‘ä»¬å°±éœ€è¦å»é…ç½®ï¼›</p><h2 id="äº”ã€ä½¿ç”¨-jenkins-æ›´æ–°å¤šå°æœåŠ¡å™¨jaråŒ…" tabindex="-1"><a class="header-anchor" href="#äº”ã€ä½¿ç”¨-jenkins-æ›´æ–°å¤šå°æœåŠ¡å™¨jaråŒ…" aria-hidden="true">#</a> äº”ã€ä½¿ç”¨ Jenkins æ›´æ–°å¤šå°æœåŠ¡å™¨jaråŒ…</h2><p>è¿˜æ˜¯å’Œå‰ä¸¤éƒ¨ä¸€æ ·ï¼Œå…ˆæ–°å»ºä¸€ä¸ªItemï¼Œåœ¨å¢åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤å¹¶å¡«å†™æ„å»ºå†…å®¹ï¼›æœ€ä¸»è¦æ˜¯shellè„šæœ¬é‡Œçš„å†…å®¹ï¼›</p><p>æ›´æ–°å¤šå°æœåŠ¡å™¨å’Œæ›´æ–°ä¸€å°ä¸ä¸€æ ·ï¼Œéœ€è¦å»é“¾æ¥å…¶ä»–çš„æœåŠ¡å™¨ï¼Œè¿›è¡Œæ›´æ–°ï¼›<br> è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>ä¸€ç§æ˜¯ä½¿ç”¨å¯†é’¥å®ç°è¦æ›´æ–°çš„æœåŠ¡å™¨ä¹‹é—´å…å¯†ï¼Œåœ¨è¿›è¡Œæ›´æ–°ï¼›</li><li>è¿˜æœ‰ä¸€ç§å°±æ˜¯ä½¿ç”¨ ansible æŠ€æœ¯å®ç°è¿œç¨‹ç™»é™†æ›´æ–°ï¼›</li></ul><h3 id="_5-1-ä½¿ç”¨å¯†é’¥æ–¹å¼å¯¹æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…å¯†ç™»å½•è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#_5-1-ä½¿ç”¨å¯†é’¥æ–¹å¼å¯¹æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…å¯†ç™»å½•è®¾ç½®" aria-hidden="true">#</a> 5.1 ä½¿ç”¨å¯†é’¥æ–¹å¼å¯¹æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œå…å¯†ç™»å½•è®¾ç½®</h3><h4 id="_5-1-1-é¦–å…ˆ-åˆ›å»ºç§æœ‰-ssh-keygenå¯†é’¥" tabindex="-1"><a class="header-anchor" href="#_5-1-1-é¦–å…ˆ-åˆ›å»ºç§æœ‰-ssh-keygenå¯†é’¥" aria-hidden="true">#</a> 5.1.1 é¦–å…ˆï¼Œåˆ›å»ºç§æœ‰ SSH-Keygenå¯†é’¥</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¸€ç›´å›è½¦å³å¯ï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/06a04bf950fd4ea985de3a3868e9cce9.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><h4 id="_5-1-2-ä¸Šä¼ -ssh-å¯†é’¥" tabindex="-1"><a class="header-anchor" href="#_5-1-2-ä¸Šä¼ -ssh-å¯†é’¥" aria-hidden="true">#</a> 5.1.2 ä¸Šä¼  SSH å¯†é’¥</h4><p>ä»æœåŠ¡å™¨ 172.16.10.232 ä½¿ç”¨ SSHï¼Œå¹¶åœ¨æœåŠ¡å™¨ 172.16.10.224 çš„ root çš„ .ssh ç›®å½•ä¸‹ä¸Šä¼ æ–°ç”Ÿæˆçš„å…¬é’¥ï¼ˆid_rsa.pubï¼‰ï¼Œæ–‡ä»¶åä¸º<code>authorized_keys</code>ã€‚</p><p>ç»™æœ¬åœ°å’Œå…¶ä»–ç”µè„‘éƒ½ä¸Šä¼ ä¸Šå…¬é’¥ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ssh-copy-id root@172.16.10.232
ssh-copy-id root@172.16.10.224
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>éœ€è¦è¾“å…¥æœåŠ¡å™¨å¯†ç ï¼Œéƒ½è¾“å…¥ä¸€ä¸‹å³å¯ï¼›</p><h4 id="_5-1-3-æµ‹è¯•å‡ å°æœåŠ¡å™¨ä¼ æ–‡ä»¶æ˜¯å¦éœ€è¦å¯†ç " tabindex="-1"><a class="header-anchor" href="#_5-1-3-æµ‹è¯•å‡ å°æœåŠ¡å™¨ä¼ æ–‡ä»¶æ˜¯å¦éœ€è¦å¯†ç " aria-hidden="true">#</a> 5.1.3 æµ‹è¯•å‡ å°æœåŠ¡å™¨ä¼ æ–‡ä»¶æ˜¯å¦éœ€è¦å¯†ç </h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">scp</span> jdk-18.0.2.1.zip root@172.16.10.232:/home/lcy/cs/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/c7987d5fff094dbb9b11cf3ec8eefca4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>å¯ä»¥çœ‹åˆ°æ˜¯ä¸éœ€è¦çš„ï¼›æ‰€ä»¥å…å¯†å°±æˆåŠŸäº†ï¼›</p><h4 id="_5-1-4-è®¾ç½®jenkins-ä¸­çš„shellè„šæœ¬-å®ç°å¤šå°æœåŠ¡å™¨æ›´æ–°æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-1-4-è®¾ç½®jenkins-ä¸­çš„shellè„šæœ¬-å®ç°å¤šå°æœåŠ¡å™¨æ›´æ–°æ“ä½œ" aria-hidden="true">#</a> 5.1.4 è®¾ç½®Jenkins ä¸­çš„shellè„šæœ¬ï¼Œå®ç°å¤šå°æœåŠ¡å™¨æ›´æ–°æ“ä½œ</h4><p>è¿˜æ˜¯å’Œå‰ä¸¤éƒ¨ä¸€æ ·ï¼Œå…ˆæ–°å»ºä¸€ä¸ªItemï¼Œåœ¨å¢åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤å¹¶å¡«å†™æ„å»ºå†…å®¹ï¼›æœ€ä¸»è¦æ˜¯shellè„šæœ¬é‡Œçš„å†…å®¹ï¼›</p><p>è¿™é‡Œæˆ‘ç»™å¤§å®¶å†™ä¸€ä¸‹æˆ‘çš„æ‰§è¡Œçš„å†…å®¹ï¼ˆç¤ºä¾‹ï¼‰ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># æœåŠ¡å™¨åˆ—è¡¨ï¼ˆè¿™é‡Œå†™çš„æ˜¯ipåœ°å€ï¼‰</span>
<span class="token assign-left variable">servers</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;server1&quot;</span> <span class="token string">&quot;server2&quot;</span> <span class="token string">&quot;server3&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># æœ¬æœºjaråŒ…è·¯å¾„ï¼ˆè·¯å¾„å¯ä»¥è‡ªå·±å®šä¹‰ï¼‰</span>
<span class="token assign-left variable">src_jar_path</span><span class="token operator">=</span><span class="token string">&quot;/root/a.jar&quot;</span>

<span class="token comment"># è¿œç¨‹JARåŒ…è·¯å¾„ï¼ˆè·¯å¾„å¯ä»¥è‡ªå·±å®šä¹‰ï¼‰</span>
<span class="token assign-left variable">dest_jar_path</span><span class="token operator">=</span><span class="token string">&quot;/home/lcy/cs/a.jar&quot;</span>

<span class="token comment"># åˆ›å»ºç›®æ ‡è·¯å¾„ï¼ˆæ²¡æœ‰åˆ™åˆ›å»ºï¼Œæœ‰åˆ™è·³è¿‡ï¼‰</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/lcy/cs/


<span class="token comment"># å¾ªç¯è¿œç¨‹æ‰§è¡Œå‘½ä»¤</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">server</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">\${servers<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
<span class="token comment"># å¤‡ä»½jaråŒ…,æ›¿æ¢jaråŒ…ï¼›å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™å¤‡ä»½æ–‡ä»¶å¹¶å¤åˆ¶æ–°çš„æ–‡ä»¶è¿‡å»ï¼›å¦‚æœæ²¡æœ‰ç›´æ¥å¤åˆ¶æ–°çš„æ–‡ä»¶è¿‡å»ï¼Œå¹¶æç¤ºï¼›</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">$dest_jar_path</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
		<span class="token function">ssh</span> root@<span class="token variable">$server</span> <span class="token string">&quot;mv <span class="token variable">$dest_jar_path</span> <span class="token variable">$dest_jar_path</span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token variable">)</span></span>&quot;</span>
		<span class="token function">scp</span> <span class="token variable">$src_jar_path</span> root@<span class="token variable">$server</span><span class="token builtin class-name">:</span><span class="token variable">$dest_jar_path</span>
	<span class="token keyword">else</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç›®æ ‡è·¯å¾„æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶&quot;</span>
		<span class="token function">scp</span> <span class="token variable">$src_jar_path</span> root@<span class="token variable">$server</span><span class="token builtin class-name">:</span><span class="token variable">$dest_jar_path</span>
	<span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment"># å¤åˆ¶å®Œä¹‹åï¼Œè‡ªå·±åŠ ä¸€ä¸‹å¯åŠ¨å‘½ä»¤å³å¯ï¼›</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™å®Œshellä¹‹åï¼Œç‚¹å‡»æ„å»ºï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/4631168c36b64fd7998c6ef96d0490ad.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>æ„å»ºå®Œæˆï¼ŒæŸ¥çœ‹å…¶ä»–æœåŠ¡å™¨æ˜¯å¦ä¸Šä¼ æˆåŠŸï¼Œå¦‚æœæˆåŠŸäº†ï¼Œé‚£ä¹ˆå°±æ²¡é—®é¢˜äº†ï¼Œæˆ‘è¿™é‡Œæ˜¯æµ‹è¯•äº†ä¸¤å°ï¼Œéƒ½ä¸Šä¼ äº†ï¼ŒæˆåŠŸäº†ã€‚</p><h3 id="_5-2-ä½¿ç”¨-ansible-æœåŠ¡å®ç°å¯¹æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-2-ä½¿ç”¨-ansible-æœåŠ¡å®ç°å¯¹æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ“ä½œ" aria-hidden="true">#</a> 5.2 ä½¿ç”¨ Ansible æœåŠ¡å®ç°å¯¹æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ“ä½œ</h3>`,61),A={href:"https://liucy.blog.csdn.net/article/details/133772023",target:"_blank",rel:"noopener noreferrer"},I=i(`<h4 id="_5-2-1-é¦–å…ˆ-éœ€è¦å®‰è£…-ansibleæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_5-2-1-é¦–å…ˆ-éœ€è¦å®‰è£…-ansibleæœåŠ¡" aria-hidden="true">#</a> 5.2.1 é¦–å…ˆï¼Œéœ€è¦å®‰è£… AnsibleæœåŠ¡</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> ansible
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_5-2-2-é…ç½®-ansibleçš„hosts" tabindex="-1"><a class="header-anchor" href="#_5-2-2-é…ç½®-ansibleçš„hosts" aria-hidden="true">#</a> 5.2.2 é…ç½® Ansibleçš„hosts</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost cs<span class="token punctuation">]</span><span class="token comment"># cat /etc/ansible/hosts</span>
<span class="token comment"># åœ¨æœ€åè¿½åŠ æœåŠ¡å™¨ä¿¡æ¯å¦‚ä¸‹ï¼š</span>

<span class="token punctuation">[</span>server1<span class="token punctuation">]</span>
<span class="token number">172.16</span>.10.*** <span class="token assign-left variable">ansible_ssh_port</span><span class="token operator">=</span><span class="token number">22</span> <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">&#39;******&#39;</span>

<span class="token punctuation">[</span>server2<span class="token punctuation">]</span>
<span class="token number">172.16</span>.10.*** <span class="token assign-left variable">ansible_ssh_port</span><span class="token operator">=</span><span class="token number">22</span> <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">&#39;******&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),S={href:"https://liucy.blog.csdn.net/article/details/133772023",target:"_blank",rel:"noopener noreferrer"},L=i(`<p>è¿™æ ·Ansibleçš„é…ç½®å°±å®Œæˆäº†ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ad-hocæ¨¡å¼å°±è¡Œï¼›</p><h4 id="_5-2-3-æµ‹è¯•æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦äº’é€š" tabindex="-1"><a class="header-anchor" href="#_5-2-3-æµ‹è¯•æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦äº’é€š" aria-hidden="true">#</a> 5.2.3 æµ‹è¯•æœåŠ¡å™¨ä¹‹é—´æ˜¯å¦äº’é€š</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ansible server1 <span class="token parameter variable">-m</span> shell <span class="token parameter variable">-a</span> <span class="token string">&quot;ls /root/&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/e669232a194f4369a29ba9b823574ed6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>å¯ä»¥æŸ¥åˆ°ï¼Œæ²¡é—®é¢˜ã€‚</p><h4 id="_5-3-4-è®¾ç½®jenkins-ä¸­çš„shellè„šæœ¬-å®ç°å¤šå°æœåŠ¡å™¨æ›´æ–°æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-3-4-è®¾ç½®jenkins-ä¸­çš„shellè„šæœ¬-å®ç°å¤šå°æœåŠ¡å™¨æ›´æ–°æ“ä½œ" aria-hidden="true">#</a> 5.3.4 è®¾ç½®Jenkins ä¸­çš„shellè„šæœ¬ï¼Œå®ç°å¤šå°æœåŠ¡å™¨æ›´æ–°æ“ä½œ</h4><p>è¿˜æ˜¯å’Œå‰ä¸¤éƒ¨ä¸€æ ·ï¼Œå…ˆæ–°å»ºä¸€ä¸ªItemï¼Œåœ¨å¢åŠ ä¸€ä¸ªæ„å»ºæ­¥éª¤å¹¶å¡«å†™æ„å»ºå†…å®¹ï¼›æœ€ä¸»è¦æ˜¯shellè„šæœ¬é‡Œçš„å†…å®¹ï¼›</p><p>è¿™é‡Œæˆ‘ç»™å¤§å®¶å†™ä¸€ä¸‹æˆ‘çš„æ‰§è¡Œçš„å†…å®¹ï¼ˆç¤ºä¾‹ï¼‰ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># æœåŠ¡å™¨åˆ—è¡¨ï¼ˆè¿™é‡Œå†™çš„æ˜¯ansibleä¸­é…ç½®çš„ä¸»æœºç»„åï¼‰</span>
<span class="token assign-left variable">servers</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;server1&quot;</span> <span class="token string">&quot;server2&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># æœ¬æœºjarè·¯å¾„ï¼ˆè·¯å¾„å¯ä»¥è‡ªå·±å®šä¹‰ï¼‰</span>
<span class="token assign-left variable">src_jar_path</span><span class="token operator">=</span><span class="token string">&quot;/root/a.jar&quot;</span>

<span class="token comment"># è¿œç¨‹JARåŒ…è·¯å¾„ï¼ˆè·¯å¾„å¯ä»¥è‡ªå·±å®šä¹‰ï¼‰</span>
<span class="token assign-left variable">dest_jar_path</span><span class="token operator">=</span><span class="token string">&quot;/home/lcy/cs/a.jar&quot;</span>

<span class="token comment"># åˆ›å»ºç›®æ ‡è·¯å¾„ï¼ˆæ²¡æœ‰åˆ™åˆ›å»ºï¼Œæœ‰åˆ™è·³è¿‡ï¼‰</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/lcy/cs/

<span class="token comment"># å¾ªç¯è¿œç¨‹æ‰§è¡Œå‘½ä»¤</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">server</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">\${servers<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span><span class="token keyword">do</span>
<span class="token comment"># å¤‡ä»½jaråŒ…,æ›¿æ¢jaråŒ…ï¼›å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™å¤‡ä»½æ–‡ä»¶å¹¶å¤åˆ¶æ–°çš„æ–‡ä»¶è¿‡å»ï¼›å¦‚æœæ²¡æœ‰ç›´æ¥å¤åˆ¶æ–°çš„æ–‡ä»¶è¿‡å»ï¼Œå¹¶æç¤ºï¼›</span>
	<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">$dest_jar_path</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
			ansible <span class="token variable">$server</span> <span class="token parameter variable">-m</span> shell <span class="token parameter variable">-a</span> <span class="token string">&quot;mv <span class="token variable">$dest_jar_path</span> <span class="token variable">$dest_jar_path</span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">&quot;%Y-%m-%d&quot;</span><span class="token variable">)</span></span>;&quot;</span>
	        ansible <span class="token variable">$server</span> <span class="token parameter variable">-m</span> copy <span class="token parameter variable">-a</span> <span class="token string">&quot;src=<span class="token variable">$src_jar_path</span> dest=<span class="token variable">$dest_jar_path</span>&quot;</span>
    <span class="token keyword">else</span>
    		<span class="token builtin class-name">echo</span> <span class="token string">&quot;æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæ²¡æœ‰å¿…è¦å¤‡ä»½&quot;</span><span class="token punctuation">;</span>
			ansible <span class="token variable">$server</span> <span class="token parameter variable">-m</span> copy <span class="token parameter variable">-a</span> <span class="token string">&quot;src=<span class="token variable">$src_jar_path</span> dest=<span class="token variable">$dest_jar_path</span>&quot;</span>
	<span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment"># å¤åˆ¶å®Œä¹‹åï¼Œè‡ªå·±åŠ ä¸€ä¸‹å¯åŠ¨å‘½ä»¤å³å¯ï¼›</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™å®Œshellä¹‹åï¼Œç‚¹å‡»æ„å»ºï¼›</p><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/3243a5e0d4134da984ae842163cabc22.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" tabindex="0" loading="lazy"><figcaption>åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°</figcaption></figure><p>æ„å»ºå®Œæˆï¼ŒæŸ¥çœ‹å…¶ä»–æœåŠ¡å™¨æ˜¯å¦ä¸Šä¼ æˆåŠŸï¼Œå¦‚æœæˆåŠŸäº†ï¼Œé‚£ä¹ˆå°±æ²¡é—®é¢˜äº†ï¼Œæˆ‘è¿™é‡Œæ˜¯æµ‹è¯•äº†ä¸¤å°ï¼Œéƒ½ä¸Šä¼ äº†ï¼ŒæˆåŠŸäº†ã€‚</p><h2 id="å…­ã€æˆåŠŸå®ç°æ–‡ä»¶æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#å…­ã€æˆåŠŸå®ç°æ–‡ä»¶æ›´æ–°" aria-hidden="true">#</a> å…­ã€æˆåŠŸå®ç°æ–‡ä»¶æ›´æ–°</h2>`,13);function B(N,E){const n=t("ExternalLinkIcon");return o(),c("div",null,[p,s("blockquote",null,[d,s("p",null,[a("â€ƒâ€ƒğŸ…"),s("a",b,[a("äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…"),e(n)]),u,a(" â€ƒâ€ƒğŸ…"),s("a",v,[a("åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»"),e(n)]),g,a(" â€ƒâ€ƒğŸ…"),s("a",h,[a("é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»"),e(n)]),m,a(" ğŸ’Š"),k,s("a",_,[a("è¿ç»´äº¤æµç¤¾åŒº"),e(n)]),a(" æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼"),f,a(" ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„"),y,a(" ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—")])]),j,q,x,s("p",null,[s("a",$,[a("ã€Linuxã€‘éƒ¨ç½²Jenkinsï¼ˆç®€ä»‹åŠè¯¦ç»†æ•™ç¨‹ã€waråŒ…éƒ¨ç½²ã€‘ï¼‰"),e(n)])]),s("p",null,[s("a",z,[a("ã€Linuxã€‘Docker æ­å»º Jenkins"),e(n)])]),s("blockquote",null,[s("p",null,[a("Jenkinsä¸“æ ï¼š"),s("a",w,[a("Jenkinsä¸“æ "),e(n)])])]),J,s("p",null,[a("æ›´å¤šAnsibleæœåŠ¡çš„ä¿¡æ¯è¯·å‚è€ƒï¼š"),s("a",A,[a("Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆäºŒï¼‰ad-hoc æ¨¡å¼è¯¦è§£"),e(n)])]),I,s("p",null,[a("æ›´å¤šAnsibleæœåŠ¡çš„ä¿¡æ¯è¯·å‚è€ƒï¼š"),s("a",S,[a("Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆäºŒï¼‰ad-hoc æ¨¡å¼è¯¦è§£"),e(n)])]),L])}const R=l(r,[["render",B],["__file","ã€Linuxã€‘åŸºäº Jenkins_shell å®ç°æ›´æ–°æœåŠ¡æ‰€éœ€æ–‡ä»¶ --ï¼ä¸¤ç§æ–¹å¼ï¼šssh_Ansible.html.vue"]]);export{R as default};
