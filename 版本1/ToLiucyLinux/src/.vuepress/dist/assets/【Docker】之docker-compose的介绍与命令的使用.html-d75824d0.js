import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as t,a as e,b as n,d as s,w as l,e as d}from"./app-6706a352.js";const m={},p=e("p",null,[n("ğŸ‘¨â€ğŸ“"),e("strong",null,"åšä¸»ç®€ä»‹")],-1),u={href:"https://blog.csdn.net/liu_chen_yang?type=blog",target:"_blank",rel:"noopener noreferrer"},v=e("br",null,null,-1),b={href:"https://blog.csdn.net/liu_chen_yang?type=blog",target:"_blank",rel:"noopener noreferrer"},h=e("br",null,null,-1),k={href:"https://bbs.huaweicloud.com/community/usersnew/id_1661843828089234",target:"_blank",rel:"noopener noreferrer"},g=e("br",null,null,-1),_={href:"https://developer.aliyun.com/profile/7yu26jk3lfqxg",target:"_blank",rel:"noopener noreferrer"},f=e("br",null,null,-1),x=e("strong",null,"äº¤æµç¤¾åŒºï¼š",-1),y={href:"https://bbs.csdn.net/forums/lcy",target:"_blank",rel:"noopener noreferrer"},q=e("br",null,null,-1),w=e("br",null,null,-1),D=e("hr",null,null,-1),A=e("h2",{id:"docker-composeç®€ä»‹",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#docker-composeç®€ä»‹","aria-hidden":"true"},"#"),n(" docker-composeç®€ä»‹")],-1),M=e("h3",{id:"docker-composeåŸºç¡€æ¦‚å¿µ",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#docker-composeåŸºç¡€æ¦‚å¿µ","aria-hidden":"true"},"#"),n(" docker-composeåŸºç¡€æ¦‚å¿µ")],-1),L=e("br",null,null,-1),E=e("br",null,null,-1),I={href:"https://docs.docker.com/compose/#features",target:"_blank",rel:"noopener noreferrer"},C=e("p",null,"â€‚",-1),N=e("p",null,"docker-composeå°†æ‰€ç®¡ç†çš„å®¹å™¨åˆ†ä¸ºä¸‰å±‚ï¼Œåˆ†åˆ«æ˜¯å·¥ç¨‹ï¼ˆprojectï¼‰ï¼ŒæœåŠ¡ï¼ˆserviceï¼‰ä»¥åŠå®¹å™¨ï¼ˆcontainerï¼‰ã€‚",-1),Y=e("ul",null,[e("li",null,"docker-composeè¿è¡Œç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆdocker-compose.ymlæ–‡ä»¶ã€extendsæ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡ç­‰ï¼‰ç»„æˆä¸€ä¸ªå·¥ç¨‹ï¼Œå¦‚æ— ç‰¹æ®ŠæŒ‡å®šï¼Œå·¥ç¨‹åå³ä¸ºå½“å‰ç›®å½•åã€‚"),e("li",null,"ä¸€ä¸ªå·¥ç¨‹ï¼ˆprojectï¼‰å½“ä¸­ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªæœåŠ¡ï¼ˆserviceï¼‰ï¼Œæ¯ä¸ªæœåŠ¡ä¸­å®šä¹‰äº†å®¹å™¨ï¼ˆcontainerï¼‰è¿è¡Œçš„é•œåƒã€å‚æ•°ã€ä¾èµ–ã€‚"),e("li",null,[n("ä¸€ä¸ªæœåŠ¡ä¸­å¯ä»¥åŒ…æ‹¬å¤šä¸ªå®¹å™¨å®ä¾‹ï¼Œdocker-composeå¹¶æ²¡æœ‰è§£å†³è´Ÿè½½å‡è¡¡çš„é—®é¢˜ã€‚å› æ­¤éœ€è¦å€ŸåŠ©å…¶ä»–å·¥å…·å®ç°æœåŠ¡å‘ç°åŠè´Ÿè½½å‡è¡¡ï¼Œæ¯”å¦‚consulã€‚"),e("br"),n(" â€‚"),e("br"),n(" docker-composeçš„å·¥ç¨‹é…ç½®æ–‡ä»¶é»˜è®¤ä¸ºdocker-compose.ymlã€‚å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡COMPOSE_FILE -f å‚æ•°è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼Œå…¶è‡ªå®šä¹‰å¤šä¸ªæœ‰ä¾èµ–å…³ç³»çš„æœåŠ¡åŠæ¯ä¸ªäººæœåŠ¡è¿è¡Œçš„å®¹å™¨ã€‚")])],-1),T=d('<h3 id="ä¸ºä»€ä¹ˆè¦ç”¨docker-compose" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦ç”¨docker-compose" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆè¦ç”¨docker-compose</h3><blockquote><p>ä½¿ç”¨ä¸€ä¸ªDockerfileæ¨¡æ¿æ–‡ä»¶ï¼Œå¯ä»¥è®©ç”¨æˆ·å¾ˆæ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªå•ç‹¬åº”ç”¨å®¹å™¨ã€‚åœ¨å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µï¼Œä¾‹å¦‚è¦å®ç°ä¸€ä¸ªwebé¡¹ç›®ï¼Œé™¤äº†webæœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ã€‚<br> composeå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬docker-compose.ymlæ¨¡æ¿æ–‡ä»¶ï¼ˆYAMLæ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰;<br> â€‚<br> docker-composeé¡¹ç›®ç”±pypthonç¼–å†™ï¼Œè°ƒç”¨dockeræœåŠ¡æä¾›çš„APIæ¥å¯¹å®¹å™¨è¿›è¡Œç®¡ç†ï¼Œå› æ­¤ï¼Œ åªè¦æ‰€æ“ä½œçš„å¹³å°æ”¯æŒdocker-APIï¼Œå°±å¯ä»¥åœ¨å…¶ä¸Šåˆ©ç”¨conposeæ¥è¿›è¡Œç¼–æ’ç®¡ç†ã€‚<br> â€‚<br> å½“åœ¨å®¿ä¸»æœºå¯åŠ¨è¾ƒå¤šçš„å®¹å™¨æ—¶ï¼Œå¦‚æœéƒ½æ˜¯æ‰‹åŠ¨æ“ä½œä¼šè§‰å¾—æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ï¼Œè¿™ä¸ªæ—¶å€™æ¨èä½¿ç”¨ docker å•æœºç¼–æ’å·¥å…· docker-compose,docker-composeæ˜¯dockerå®¹å™¨çš„ä¸€ç§ç¼–æ’æœåŠ¡ï¼Œdocker-composeæ˜¯ä¸€ä¸ªç®¡ç†å¤šä¸ªå®¹å™¨çš„å·¥å…·ï¼Œæ¯”å¦‚å¯ä»¥è§£å†³å®¹å™¨ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°±åƒå¯åŠ¨ä¸€ä¸ªwebæœåŠ¡ï¼Œå°±å¿…é¡»å¾—å…ˆæŠŠæ•°æ®åº“æœåŠ¡å…ˆå¯åŠ¨ä¸€æ ·ï¼Œdocker-composeå®Œå…¨å¯ä»¥æ›¿ä»£docker run ä¸€é”®å¯åŠ¨å®¹å™¨ã€‚<br> â€‚<br> ç®€å•æ¥è¯´ï¼šå°±æ˜¯æ¥ç®¡ç†å¤šä¸ªå®¹å™¨çš„ï¼Œå®šä¹‰å¯åŠ¨é¡ºåºçš„ï¼Œåˆç†ç¼–æ’ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p></blockquote>',2),R={href:"https://github.com/docker/compose",target:"_blank",rel:"noopener noreferrer"},O=e("h2",{id:"yamlæ–‡ä»¶æ ¼å¼ç¼–å†™åŠç¼–å†™æ³¨æ„äº‹é¡¹",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#yamlæ–‡ä»¶æ ¼å¼ç¼–å†™åŠç¼–å†™æ³¨æ„äº‹é¡¹","aria-hidden":"true"},"#"),n(" YAMLæ–‡ä»¶æ ¼å¼ç¼–å†™åŠç¼–å†™æ³¨æ„äº‹é¡¹")],-1),S=e("ul",null,[e("li",null,"YAMLæ˜¯ä¸€ç§æ ‡è®°æ€§è¯­è¨€ï¼Œå®ƒå¯ä»¥å¾ˆç›´è§‚çš„å±•ç¤ºæ•°æ®åºåˆ—åŒ–æ ¼å¼ï¼Œå¯è¯»æ€§é«˜ã€‚"),e("li",null,"ç±»ä¼¼äºjsonæ•°æ®æè¿°è¯­è¨€ï¼Œä½†æ˜¯è¯­æ³•è¦æ¯”jsonç®€å•å¾ˆå¤šã€‚"),e("li",null,"YAMLæ•°æ®ç»“æ„é€šè¿‡ç¼©è¿›æ¥è¡¨ç¤ºï¼Œè¿ç»­çš„é¡¹ç›®é€šè¿‡å‡å·æ¥è¡¨ç¤ºï¼Œé”®å€¼å¯¹ç”¨å†’å·åˆ†éš”ï¼Œæ•°ç»„ç”¨ä¸­æ‹¬å·[ ] æ‹¬èµ·æ¥ï¼Œbashç”¨èŠ±æ‹¬å·{ } æ‹¬èµ·æ¥ã€‚")],-1),j=e("ul",null,[e("li",null,"ä¸æ”¯æŒåˆ¶è¡¨ç¬¦tabé”®ç¼©è¿›ï¼Œåªèƒ½ä½¿ç”¨ç©ºæ ¼ç¼©è¿›"),e("li",null,"é€šå¸¸å¼€å¤´ç¼©è¿›2ä¸ªç©ºæ ¼"),e("li",null,"å­—ç¬¦åç¼©è¿›1ä¸ªç©ºæ ¼ï¼Œå¦‚å†’å·ã€ï¼šã€‘ã€é€—å·ã€ï¼Œã€‘ã€æ¨ªæ ã€-ã€‘"),e("li",null,"ç”¨#å·è¡¨ç¤ºæ³¨é‡Š"),e("li",null,"å¦‚æœåŒ…å«ç‰¹æ®Šå­—ç¬¦ç”¨å•å¼•å·ã€â€™ 'ã€‘å¼•èµ·æ¥ä½œä¸ºæ™®é€šå­—ç¬¦ï¼Œå¦‚æœç”¨åŒå¼•å·ã€â€œ â€ã€‘è¡¨ç¤ºç‰¹æ®Šå­—ç¬¦æœ¬èº«çš„æ„æ€ï¼Œ"),e("li",null,"å¸ƒå°”å€¼å¿…é¡»ç”¨ã€â€œ â€ã€‘æ‹¬èµ·æ¥"),e("li",null,"YAMLåŒºåˆ†å¤§å°å†™")],-1),P=e("br",null,null,-1),V={href:"https://liucy.blog.csdn.net/article/details/129041706",target:"_blank",rel:"noopener noreferrer"},z={href:"https://liucy.blog.csdn.net/article/details/124688952",target:"_blank",rel:"noopener noreferrer"},B=e("h2",{id:"docker-composeçš„å®‰è£…",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#docker-composeçš„å®‰è£…","aria-hidden":"true"},"#"),n(" docker-composeçš„å®‰è£…")],-1),U=e("h3",{id:"åœ¨çº¿å®‰è£…",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#åœ¨çº¿å®‰è£…","aria-hidden":"true"},"#"),n(" åœ¨çº¿å®‰è£…")],-1),G={href:"https://liucy.blog.csdn.net/article/details/124688952",target:"_blank",rel:"noopener noreferrer"},H=e("br",null,null,-1),F=e("h3",{id:"ç¦»çº¿å®‰è£…",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ç¦»çº¿å®‰è£…","aria-hidden":"true"},"#"),n(" ç¦»çº¿å®‰è£…")],-1),$=e("p",null,"åœ¨è¿™é‡Œæˆ‘å°±è¯´ä¸€ç§docker-composeç¦»çº¿éƒ¨ç½²æ–¹å¼ï¼›",-1),K=e("ol",null,[e("li",null,"ä¸‹è½½å¯¹åº”çš„docker-composeç‰ˆæœ¬")],-1),W={href:"https://github.com/docker/compose/releases",target:"_blank",rel:"noopener noreferrer"},J=e("br",null,null,-1),Q=e("code",null,'https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose',-1),X=e("br",null,null,-1),Z={href:"https://download.csdn.net/download/liu_chen_yang/89428645",target:"_blank",rel:"noopener noreferrer"},ee=d(`<ol start="2"><li>å°†ä¸‹è½½çš„æœåŠ¡å™¨æ”¾åˆ°/usr/local/bin/ä¸‹</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mv</span> <span class="token function">docker-compose</span> /usr/local/bin/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>ç»™docker-composeæ·»åŠ æ‰§è¡Œæƒé™</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span>  +x /usr/local/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>åˆ›å»ºè½¯è¿æ¥</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/bin/docker-compose /usr/bin/docker-compose
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>éªŒè¯å®‰è£…æ˜¯å¦å®Œæˆ<br> æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¦‚æœå¯ä»¥æ­£å¸¸æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œåˆ™è¡¨ç¤ºå·²ç»å®Œæˆ</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token parameter variable">--version</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161503192.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å®‰è£…å®Œæˆã€‚</p><h2 id="docker-composeå¸¸ç”¨çš„å‘½ä»¤è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#docker-composeå¸¸ç”¨çš„å‘½ä»¤è¯¦è§£" aria-hidden="true">#</a> docker-composeå¸¸ç”¨çš„å‘½ä»¤è¯¦è§£</h2><p>è¿è¡Œè¿™äº›å‘½ä»¤éœ€è¦ç»“åˆdocker-composeä¸€èµ·ä½¿ç”¨ã€‚</p><p>ä¸”å¿…é¡»è¦åœ¨å«æœ‰docker-compose.ymlæ–‡ä»¶çš„ç›®å½•ä¸­æ‰å¯ä»¥ä½¿ç”¨ï¼Œä¸ç„¶æŠ¥é”™ã€‚</p><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°/è¯¦è§£</th></tr></thead><tbody><tr><td>build</td><td>é‡æ–°æ„å»ºæœåŠ¡</td></tr><tr><td>ps</td><td>åˆ—å‡ºå®¹å™¨</td></tr><tr><td>images</td><td>åˆ—å‡ºæ‰€æœ‰é•œåƒ</td></tr><tr><td>up</td><td>åˆ›å»ºå’Œå¯åŠ¨å®¹å™¨</td></tr><tr><td>exec</td><td>åœ¨å®¹å™¨é‡Œé¢æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>scale</td><td>æŒ‡å®šä¸€ä¸ªæœåŠ¡å®¹å™¨å¯åŠ¨æ•°é‡</td></tr><tr><td>top</td><td>æ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨è¿›ç¨‹</td></tr><tr><td>logs</td><td>æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡º/ä¹Ÿå°±æ˜¯æ—¥å¿—</td></tr><tr><td>down</td><td>åˆ é™¤å®¹å™¨ã€ç½‘ç»œã€æ•°æ®å·å’Œé•œåƒ</td></tr><tr><td>stop/start/restart</td><td>åœæ­¢/å¯åŠ¨/é‡å¯æœåŠ¡</td></tr><tr><td>pause</td><td>æš‚åœä¸€ä¸ªæœåŠ¡</td></tr><tr><td>unpause</td><td>æ¢å¤æš‚åœçš„ä¸€ä¸ªæœåŠ¡</td></tr><tr><td>pull</td><td>æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒ</td></tr><tr><td>push</td><td>æ¨é€æœåŠ¡ä¾èµ–çš„é•œåƒ</td></tr></tbody></table><h2 id="docker-composeå¸¸ç”¨çš„å­—æ®µè¯¦è§£" tabindex="-1"><a class="header-anchor" href="#docker-composeå¸¸ç”¨çš„å­—æ®µè¯¦è§£" aria-hidden="true">#</a> docker-composeå¸¸ç”¨çš„å­—æ®µè¯¦è§£</h2><table><thead><tr><th>å­—æ®µ</th><th>æè¿°/è¯¦è§£</th></tr></thead><tbody><tr><td>build</td><td>æŒ‡å®šDockerfileæ–‡ä»¶åï¼ˆè¦æŒ‡å®šçš„Dockerfileæ–‡ä»¶éœ€è¦åœ¨buildæ ‡ç­¾çš„å­çº§æ ‡ç­¾ä¸­ç”¨dockefileæ ‡ç­¾æŒ‡å®šï¼‰</td></tr><tr><td>dockerfile</td><td>æ„å»ºé•œåƒä¸Šä¸‹æ–‡è·¯å¾„</td></tr><tr><td>context</td><td>å¯ä»¥æ˜¯dockerfileè·¯å¾„ï¼Œæˆ–è€…æ—¶æ‰§è¡Œgitä»“åº“çš„urlåœ°å€</td></tr><tr><td>images</td><td>æŒ‡å®šé•œåƒ</td></tr><tr><td>command</td><td>æ‰§è¡Œå‘½ä»¤ï¼Œä¼šè¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ï¼ˆä¼šè¦†ç›–dockefileä¸­çš„CMDæŒ‡ä»¤ï¼‰</td></tr><tr><td>container_name</td><td>æŒ‡å®šå®¹å™¨åç§°ï¼Œç”±äºå®¹å™¨åç§°æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœæŒ‡å®šè‡ªå®šä¹‰åç§°ï¼Œåˆ™æ— æ³•scaleæŒ‡å®šå®¹å™¨æ•°é‡ã€‚</td></tr><tr><td>deploy</td><td>æŒ‡å®šéƒ¨ç½²å’Œè¿è¡ŒæœåŠ¡ç›¸å…³é…ç½®ï¼Œåªèƒ½åœ¨swarmæ¨¡å¼ä½¿ç”¨</td></tr><tr><td>environment</td><td>æ·»åŠ ç¯å¢ƒå˜é‡</td></tr><tr><td>networks</td><td>åŠ å…¥ç½‘ç»œï¼Œå¼•ç”¨é¡¶çº§networksä¸‹æ¡ç›®</td></tr><tr><td>network_mode</td><td>è®¾ç½®å®¹å™¨çš„ç½‘ç»œæ¨¡å¼</td></tr><tr><td>ports</td><td>æš´éœ²å®¹å™¨ç«¯å£ï¼Œä¸-pç›¸åŒï¼Œä½†æ˜¯ç«¯å£ä¸èƒ½ä½äº60</td></tr><tr><td>volumes</td><td>æŒ‚è½½ä¸€ä¸ªå®¿ä¸»æœºç›®å½•æˆ–å‘½ä»¤å·åˆ°å®¹å™¨ï¼Œå‘½ä»¤å·è¦åœ¨é¡¶çº§volumeså®šä¹‰å·åç§°</td></tr><tr><td>volumes_from</td><td>ä»å¦ä¸€ä¸ªæœåŠ¡æˆ–å®¹å™¨æŒ‚è½½å·ï¼Œå¯é€‰å‚æ•°ï¼šroå’Œrwï¼ˆä»…ç‰ˆæœ¬â€˜2â€™æ”¯æŒï¼‰</td></tr><tr><td>hostname</td><td>åœ¨å®¹å™¨å†…è®¾ç½®å†…æ ¸å‚æ•°</td></tr><tr><td>links</td><td>è¿æ¥è¯¶åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼Œ- æœåŠ¡åç§°[ : ]</td></tr><tr><td>privileged</td><td>ç”¨æ¥ç»™å®¹å™¨rootæƒé™ï¼Œæ³¨æ„æ˜¯ä¸å®‰å…¨çš„ï¼Œtrue</td></tr><tr><td>restart</td><td>é‡å¯ç­–ç•¥ï¼Œå®šä¹‰æ˜¯å¦é‡å¯å®¹å™¨1ã€noï¼Œé»˜è®¤ç­–ç•¥ï¼Œåœ¨å®¹å™¨é€€å‡ºæ—¶ä¸é‡å¯å®¹å™¨2ã€on-failureï¼Œåœ¨å®¹å™¨éæ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€é0ï¼‰ï¼Œæ‰ä¼šé‡å¯å®¹å™¨3ã€on-failureï¼š3 åœ¨å®¹å™¨éæ­£å¸¸é€€å‡ºæ—¶ï¼Œé‡å¯å®¹å™¨ï¼Œæœ€å¤šé‡å¯3æ¬¡4ã€alwaysï¼Œåœ¨å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨ï¼Œ5ã€unless-stoppedï¼Œåœ¨å®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯å®¹å™¨ï¼Œä½†æ˜¯ä¸è€ƒè™‘åœ¨Dockerå®ˆæŠ¤è¿›ç¨‹å¯åŠ¨æ—¶å°±å·²ç»åœæ­¢äº†çš„å®¹å™¨ã€‚</td></tr><tr><td>depends_on</td><td>æ­¤æ ‡ç­¾ç”¨äºè§£å†³å®¹å™¨çš„ä¾èµ–ï¼Œå¯åŠ¨å…ˆåé—®é¢˜ã€‚å¦‚å¯åŠ¨åº”ç”¨å®¹å™¨ï¼Œéœ€è¦å…ˆå¯åŠ¨æ•°æ®åº“å®¹å™¨ã€‚php:depends_on:- apache- mysql</td></tr></tbody></table><h2 id="docker-composeå¸¸ç”¨çš„å‘½ä»¤ã€å­—æ®µè¯¦è§£å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#docker-composeå¸¸ç”¨çš„å‘½ä»¤ã€å­—æ®µè¯¦è§£å®ä¾‹" aria-hidden="true">#</a> docker-composeå¸¸ç”¨çš„å‘½ä»¤ã€å­—æ®µè¯¦è§£å®ä¾‹</h2><p>è¿è¡Œè¿™äº›å‘½ä»¤éœ€è¦ç»“åˆdocker-composeä¸€èµ·ä½¿ç”¨ã€‚</p><p>ä¸”å¿…é¡»è¦åœ¨å«æœ‰docker-compose.ymlæ–‡ä»¶çš„ç›®å½•ä¸­æ‰å¯ä»¥ä½¿ç”¨ï¼Œä¸ç„¶æŠ¥é”™ã€‚</p><h3 id="docker-composeå‘½ä»¤æ ¼å¼-å¸¦-çš„æ˜¯å¸¸ç”¨çš„" tabindex="-1"><a class="header-anchor" href="#docker-composeå‘½ä»¤æ ¼å¼-å¸¦-çš„æ˜¯å¸¸ç”¨çš„" aria-hidden="true">#</a> docker-composeå‘½ä»¤æ ¼å¼ï¼Œå¸¦*çš„æ˜¯å¸¸ç”¨çš„</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token punctuation">[</span>-f <span class="token operator">&lt;</span>arg<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARGS<span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å‘½ä»¤é€‰é¡¹å¦‚ä¸‹ï¼š</p><ul><li>-fï¼Œâ€“file æŒ‡å®šComposeæ¨¡æ¿æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºdocker-compose.ymlï¼Œå¯ä»¥å¤šæ¬¡æŒ‡å®šã€‚</li><li>-pï¼Œâ€“project-name NAMEæŒ‡å®šé¡¹ç›®åç§°ï¼Œé»˜è®¤å°†ä½¿ç”¨æ‰€åœ¨ç›®å½•åç§°ä½œä¸ºé¡¹ç›®åã€‚</li><li>-x-network-driver ä½¿ç”¨Dockerçš„å¯æ‹”æ’ç½‘ç»œåç«¯ç‰¹æ€§ï¼ˆéœ€è¦Docker 1.9+ç‰ˆæœ¬ï¼‰</li><li>-x-network-driver DRIVERæŒ‡å®šç½‘ç»œåç«¯çš„é©±åŠ¨ï¼Œé»˜è®¤ä¸ºbridgeï¼ˆéœ€è¦Docker 1.9+ç‰ˆæœ¬ï¼‰</li><li>-verboseè¾“å‡ºæ›´å¤šè°ƒè¯•ä¿¡æ¯</li><li>-vï¼Œâ€“versionæ‰“å°ç‰ˆæœ¬å¹¶é€€å‡º</li></ul><p>å¸¸ç”¨çš„æ–¹å¼æœ‰ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æŸ¥çœ‹docker-composeç‰ˆæœ¬</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-v</span>

<span class="token comment">#æŒ‡å®šdocker-composeæ–‡ä»¶å¹¶å¯åŠ¨</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-docker-compose-h" tabindex="-1"><a class="header-anchor" href="#_1-docker-compose-h" aria-hidden="true">#</a> 1 docker-compose -h</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹å¸®åŠ©å‘½ä»¤ï¼ˆæŸ¥çœ‹å…¶ä½™å‘½ä»¤çš„ä½¿ç”¨ï¼‰</p><h3 id="_2-docker-compose-up" tabindex="-1"><a class="header-anchor" href="#_2-docker-compose-up" aria-hidden="true">#</a> *2 docker-compose up</h3><p>é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>-d åœ¨åå°è¿è¡ŒæœåŠ¡å®¹å™¨</li><li>â€“no-color ä¸ä½¿ç”¨é¢œè‰²æ¥åŒºåˆ†ä¸åŒçš„æœåŠ¡çš„æ§åˆ¶è¾“å‡º</li><li>â€“no-deps ä¸å¯åŠ¨æœåŠ¡æ‰€é“¾æ¥çš„å®¹å™¨</li><li>â€“force-recreate å¼ºåˆ¶é‡æ–°åˆ›å»ºå®¹å™¨ï¼Œä¸èƒ½ä¸â€“no-recreateåŒæ—¶ä½¿ç”¨</li><li>â€“no-recreate å¦‚æœå®¹å™¨å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸é‡æ–°åˆ›å»ºï¼Œä¸èƒ½ä¸â€“force-recreateåŒæ—¶ä½¿ç”¨</li><li>â€“no-build ä¸è‡ªåŠ¨æ„å»ºç¼ºå¤±çš„æœåŠ¡é•œåƒ</li><li>â€“build åœ¨å¯åŠ¨å®¹å™¨å‰æ„å»ºæœåŠ¡é•œåƒ</li><li>â€“abort-on-container-exit åœæ­¢æ‰€æœ‰å®¹å™¨ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªå®¹å™¨è¢«åœæ­¢ï¼Œä¸èƒ½ä¸-dåŒæ—¶ä½¿ç”¨</li><li>-t, â€“timeout TIMEOUT åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º10ç§’ï¼‰</li><li>â€“remove-orphans åˆ é™¤æœåŠ¡ä¸­æ²¡æœ‰åœ¨composeæ–‡ä»¶ä¸­å®šä¹‰çš„å®¹å™¨</li><li>â€“scale SERVICE=NUM è®¾ç½®æœåŠ¡è¿è¡Œå®¹å™¨çš„ä¸ªæ•°ï¼Œå°†è¦†ç›–åœ¨composeä¸­é€šè¿‡scaleæŒ‡å®šçš„å‚æ•°</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
<span class="token function">docker-compose</span> up

<span class="token comment">#å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ŒæŒ‡å®šyaml</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml up

<span class="token comment">#å¯åŠ¨æ‰€æœ‰æœåŠ¡åœ¨åå°è¿è¡ŒæœåŠ¡å®¹å™¨</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>

<span class="token comment">#å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ŒæŒ‡å®šyamlåœ¨åå°è¿è¡ŒæœåŠ¡å®¹å™¨</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-docker-compose-images" tabindex="-1"><a class="header-anchor" href="#_3-docker-compose-images" aria-hidden="true">#</a> *3 docker-compose images</h3><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æŸ¥çœ‹æ‰€æœ‰é•œåƒ</span>
<span class="token function">docker-compose</span> images

<span class="token comment">#æŸ¥çœ‹æ‰€æœ‰é•œåƒæŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml images
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-docker-compose-ps" tabindex="-1"><a class="header-anchor" href="#_4-docker-compose-ps" aria-hidden="true">#</a> *4 docker-compose ps</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>åˆ—å‡ºé¡¹ç›®ä¸­ç›®å‰çš„æ‰€æœ‰å®¹å™¨
<span class="token function">docker-compose</span> <span class="token function">ps</span> 

<span class="token comment">#æŒ‡å®šæŸ¥çœ‹yamlæ–‡ä»¶çš„å®¹å™¨</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥å°†yamlåç§°æ”¹ä¸ºdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨docker-compose psæŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œå¦‚æœæ˜¯å…¶ä»–å‘½åï¼Œå°±éœ€è¦ä½¿ç”¨-f æŒ‡å®šyamlæ–‡ä»¶ã€‚</p>`,39),ne=d(`<h3 id="_5-docker-compose-stop" tabindex="-1"><a class="header-anchor" href="#_5-docker-compose-stop" aria-hidden="true">#</a> *5 docker-compose stop</h3><p>é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>-t, â€“timeout TIMEOUT åœæ­¢å®¹å™¨æ—¶å€™çš„è¶…æ—¶ï¼ˆé»˜è®¤ä¸º10ç§’ï¼‰</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#åœæ­¢æ‰€æœ‰æœåŠ¡</span>
<span class="token function">docker-compose</span> stop

<span class="token comment">#åœæ­¢æ‰€æœ‰æœåŠ¡æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml stop

<span class="token comment">#åœæ­¢æŒ‡å®šæœåŠ¡ï¼ˆæŒ‡å®šæœåŠ¡æ˜¯åœ¨yamlæ–‡ä»¶ä¸­æ‰€å†™çš„æœåŠ¡ï¼‰</span>
<span class="token function">docker-compose</span> stop æœåŠ¡å
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml stop æœåŠ¡å
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-docker-compose-start" tabindex="-1"><a class="header-anchor" href="#_6-docker-compose-start" aria-hidden="true">#</a> *6 docker-compose start</h3><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
<span class="token function">docker-compose</span> start

<span class="token comment">#å¯åŠ¨æ‰€æœ‰æœåŠ¡æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml start

<span class="token comment">#å¯åŠ¨æŒ‡å®šæœåŠ¡ï¼ˆæŒ‡å®šæœåŠ¡æ˜¯åœ¨yamlæ–‡ä»¶ä¸­æ‰€å†™çš„æœåŠ¡ï¼‰</span>
<span class="token function">docker-compose</span> start æœåŠ¡å
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml start æœåŠ¡å
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-docker-compose-restart" tabindex="-1"><a class="header-anchor" href="#_7-docker-compose-restart" aria-hidden="true">#</a> *7 docker-compose restart</h3><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#é‡å¯æ‰€æœ‰æœåŠ¡</span>
<span class="token function">docker-compose</span> start

<span class="token comment">#é‡å¯æ‰€æœ‰æœåŠ¡æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml restart

<span class="token comment">#é‡å¯æŒ‡å®šæœåŠ¡ï¼ˆæŒ‡å®šæœåŠ¡æ˜¯åœ¨yamlæ–‡ä»¶ä¸­æ‰€å†™çš„æœåŠ¡ï¼‰</span>
<span class="token function">docker-compose</span> restart æœåŠ¡å
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml restart æœåŠ¡å
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-docker-compose-down" tabindex="-1"><a class="header-anchor" href="#_8-docker-compose-down" aria-hidden="true">#</a> *8 docker-compose down</h3><p>åœæ­¢å’Œåˆ é™¤å®¹å™¨ã€ç½‘ç»œã€å·ã€é•œåƒã€‚<br> é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>â€“rmi typeï¼Œåˆ é™¤é•œåƒï¼Œç±»å‹å¿…é¡»æ˜¯ï¼šallï¼Œåˆ é™¤composeæ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰é•œåƒï¼›localï¼Œåˆ é™¤é•œåƒåä¸ºç©ºçš„é•œåƒ</li><li>-v, â€“volumesï¼Œåˆ é™¤å·²ç»åœ¨composeæ–‡ä»¶ä¸­å®šä¹‰çš„å’ŒåŒ¿åçš„é™„åœ¨å®¹å™¨ä¸Šçš„æ•°æ®å·</li><li>â€“remove-orphansï¼Œåˆ é™¤æœåŠ¡ä¸­æ²¡æœ‰åœ¨composeä¸­å®šä¹‰çš„å®¹å™¨</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰æœåŠ¡</span>
<span class="token function">docker-compose</span> down

<span class="token comment">#åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰æœåŠ¡æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml down
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-docker-compose-logs" tabindex="-1"><a class="header-anchor" href="#_9-docker-compose-logs" aria-hidden="true">#</a> *9 docker-compose logs</h3><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œdocker-composeå°†å¯¹ä¸åŒçš„æœåŠ¡è¾“å‡ºä½¿ç”¨ä¸åŒçš„é¢œè‰²æ¥åŒºåˆ†ã€‚å¯ä»¥é€šè¿‡â€“no-coloræ¥å…³é—­é¢œè‰²ã€‚</span>
<span class="token function">docker-compose</span> logs

<span class="token comment">#æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡ºæŒ‡å®šyamlæ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œdocker-composeå°†å¯¹ä¸åŒçš„æœåŠ¡è¾“å‡ºä½¿ç”¨ä¸åŒçš„é¢œè‰²æ¥åŒºåˆ†ã€‚å¯ä»¥é€šè¿‡â€“no-coloræ¥å…³é—­é¢œè‰²ã€‚</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml logs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-docker-compose-top" tabindex="-1"><a class="header-anchor" href="#_10-docker-compose-top" aria-hidden="true">#</a> *10 docker-compose top</h3><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æŸ¥çœ‹æœåŠ¡çš„æ‰€æœ‰è¿›ç¨‹</span>
<span class="token function">docker-compose</span> <span class="token function">top</span>

<span class="token comment">#æŸ¥çœ‹æœåŠ¡çš„æ‰€æœ‰è¿›ç¨‹æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml <span class="token function">top</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-docker-compose-build" tabindex="-1"><a class="header-anchor" href="#_11-docker-compose-build" aria-hidden="true">#</a> 11 docker-compose build</h3><p>æ„å»ºï¼ˆé‡æ–°æ„å»ºï¼‰é¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨ã€‚<br> é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>â€“compress é€šè¿‡gzipå‹ç¼©æ„å»ºä¸Šä¸‹ç¯å¢ƒ</li><li>â€“force-rm åˆ é™¤æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸´æ—¶å®¹å™¨</li><li>â€“no-cache æ„å»ºé•œåƒè¿‡ç¨‹ä¸­ä¸ä½¿ç”¨ç¼“å­˜</li><li>â€“pull å§‹ç»ˆå°è¯•é€šè¿‡æ‹‰å–æ“ä½œæ¥è·å–æ›´æ–°ç‰ˆæœ¬çš„é•œåƒ</li><li>-m, â€“memory MEMä¸ºæ„å»ºçš„å®¹å™¨è®¾ç½®å†…å­˜å¤§å°</li><li>â€“build-arg key=valä¸ºæœåŠ¡è®¾ç½®build-timeå˜é‡</li><li>æœåŠ¡å®¹å™¨ä¸€æ—¦æ„å»ºåï¼Œå°†ä¼šå¸¦ä¸Šä¸€ä¸ªæ ‡è®°åã€‚å¯ä»¥éšæ—¶åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œdocker-compose buildæ¥é‡æ–°æ„å»ºæœåŠ¡</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æ„å»ºï¼ˆé‡æ–°æ„å»ºï¼‰é¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨</span>
<span class="token function">docker-compose</span> build

<span class="token comment">#æ„å»ºï¼ˆé‡æ–°æ„å»ºï¼‰é¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml build
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-docker-compose-exec" tabindex="-1"><a class="header-anchor" href="#_12-docker-compose-exec" aria-hidden="true">#</a> 12 docker-compose exec</h3><p>é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>-d åˆ†ç¦»æ¨¡å¼ï¼Œåå°è¿è¡Œå‘½ä»¤ã€‚</li><li>â€“privileged è·å–ç‰¹æƒã€‚</li><li>â€“user USER æŒ‡å®šè¿è¡Œçš„ç”¨æˆ·ã€‚</li><li>-T ç¦ç”¨åˆ†é…TTYï¼Œé»˜è®¤docker-compose execåˆ†é…TTYã€‚</li><li>â€“index=indexï¼Œå½“ä¸€ä¸ªæœåŠ¡æ‹¥æœ‰å¤šä¸ªå®¹å™¨æ—¶ï¼Œå¯é€šè¿‡è¯¥å‚æ•°ç™»é™†åˆ°è¯¥æœåŠ¡ä¸‹çš„ä»»ä½•æœåŠ¡ï¼Œä¾‹å¦‚ï¼šdocker-compose exec â€“index=1 web /bin/bash ï¼ŒwebæœåŠ¡ä¸­åŒ…å«å¤šä¸ªå®¹å™¨</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-d</span> â€“privileged

<span class="token comment">#æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml <span class="token builtin class-name">exec</span> <span class="token parameter variable">-d</span> â€“privileged
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-docker-compose-scale" tabindex="-1"><a class="header-anchor" href="#_13-docker-compose-scale" aria-hidden="true">#</a> 13 docker-compose scale</h3><ul><li>è®¾ç½®æŒ‡å®šæœåŠ¡è¿è¡Œçš„å®¹å™¨ä¸ªæ•°ã€‚é€šè¿‡service=numçš„å‚æ•°æ¥è®¾ç½®æ•°é‡ï¼Œä½†æ˜¯è¦æ³¨æ„è®¾ç½®ç«¯å£çš„ä¸èƒ½ä½¿ç”¨è¿™ä¸ªå‘½ä»¤</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#è®¾ç½®nginxæœåŠ¡å¯åŠ¨ä¸¤ä¸ª</span>
<span class="token function">docker-compose</span> scale <span class="token assign-left variable">nginx</span><span class="token operator">=</span><span class="token number">2</span>

<span class="token comment">#è®¾ç½®nginxæœåŠ¡å¯åŠ¨ä¸¤ä¸ªæŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml scale <span class="token assign-left variable">nginx</span><span class="token operator">=</span><span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-docker-compose-pause" tabindex="-1"><a class="header-anchor" href="#_14-docker-compose-pause" aria-hidden="true">#</a> *14 docker-compose pause</h3><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æš‚åœä¸€ä¸ªæœåŠ¡</span>
<span class="token function">docker-compose</span> pause

<span class="token comment">#æš‚åœä¸€ä¸ªæœåŠ¡æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml pause
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15-docker-compose-unpause" tabindex="-1"><a class="header-anchor" href="#_15-docker-compose-unpause" aria-hidden="true">#</a> *15 docker-compose unpause</h3><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æ¢å¤æš‚åœçš„ä¸€ä¸ªæœåŠ¡</span>
<span class="token function">docker-compose</span> unpause

<span class="token comment">#æ¢å¤æš‚åœçš„ä¸€ä¸ªæœåŠ¡æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml unpause
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16-docker-compose-pull" tabindex="-1"><a class="header-anchor" href="#_16-docker-compose-pull" aria-hidden="true">#</a> 16 docker-compose pull</h3><p>æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒã€‚<br> é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>â€“ignore-pull-failuresï¼Œå¿½ç•¥æ‹‰å–é•œåƒè¿‡ç¨‹ä¸­çš„é”™è¯¯</li><li>â€“parallelï¼Œå¤šä¸ªé•œåƒåŒæ—¶æ‹‰å–</li><li>â€“quietï¼Œæ‹‰å–é•œåƒè¿‡ç¨‹ä¸­ä¸æ‰“å°è¿›åº¦ä¿¡æ¯</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒ</span>
<span class="token function">docker-compose</span> pull

<span class="token comment">#æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒæŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml pull

<span class="token comment">#æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒå¿½ç•¥é”™è¯¯ä¿¡æ¯</span>
<span class="token function">docker-compose</span> pull â€“ignore-pull-failures

<span class="token comment">#æ‹‰å–æœåŠ¡ä¾èµ–çš„é•œåƒå¿½ç•¥é”™è¯¯ä¿¡æ¯æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml pull â€“ignore-pull-failures
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_17-docker-compose-push" tabindex="-1"><a class="header-anchor" href="#_17-docker-compose-push" aria-hidden="true">#</a> 17 docker-compose push</h3><p>é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>â€“ignore-push-failures å¿½ç•¥æ¨é€é•œåƒè¿‡ç¨‹ä¸­çš„é”™è¯¯</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#æ¨é€æœåŠ¡ä¾èµ–çš„é•œåƒ</span>
<span class="token function">docker-compose</span> push

<span class="token comment">#æ¨é€æœåŠ¡ä¾èµ–çš„é•œåƒæŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml push

<span class="token comment">#æ¨é€æœåŠ¡ä¾èµ–çš„é•œåƒå¿½ç•¥é”™è¯¯ä¿¡æ¯</span>
<span class="token function">docker-compose</span> push â€“ignore-push-failures

<span class="token comment">#æ¨é€æœåŠ¡ä¾èµ–çš„é•œåƒå¿½ç•¥é”™è¯¯ä¿¡æ¯æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml push â€“ignore-push-failures
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18-docker-compose-rm" tabindex="-1"><a class="header-anchor" href="#_18-docker-compose-rm" aria-hidden="true">#</a> 18 docker-compose rm</h3><p>åˆ é™¤æ‰€æœ‰ï¼ˆåœæ­¢çŠ¶æ€çš„ï¼‰æœåŠ¡å®¹å™¨ã€‚<br> é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>â€“f, â€“forceï¼Œå¼ºåˆ¶ç›´æ¥åˆ é™¤ï¼ŒåŒ…æ‹¬éåœæ­¢çŠ¶æ€çš„å®¹å™¨</li><li>-vï¼Œåˆ é™¤å®¹å™¨æ‰€æŒ‚è½½çš„æ•°æ®å·</li></ul><p>å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#åˆ é™¤æ‰€æœ‰ï¼ˆåœæ­¢çŠ¶æ€çš„ï¼‰æœåŠ¡å®¹å™¨</span>
<span class="token function">docker-compose</span> <span class="token function">rm</span>

<span class="token comment">#åˆ é™¤æ‰€æœ‰ï¼ˆåœæ­¢çŠ¶æ€çš„ï¼‰æœåŠ¡å®¹å™¨æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml <span class="token function">rm</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_19-dokcer-compose-config" tabindex="-1"><a class="header-anchor" href="#_19-dokcer-compose-config" aria-hidden="true">#</a> *19 dokcer-compose config</h3><p>é€‰é¡¹åŒ…æ‹¬ï¼š</p><ul><li>â€“resolve-image-digests å°†é•œåƒæ ‡ç­¾æ ‡è®°ä¸ºæ‘˜è¦</li><li>-q, â€“quiet åªéªŒè¯é…ç½®ï¼Œä¸è¾“å‡ºã€‚ å½“é…ç½®æ­£ç¡®æ—¶ï¼Œä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œå½“æ–‡ä»¶é…ç½®é”™è¯¯ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯</li><li>â€“services æ‰“å°æœåŠ¡åï¼Œä¸€è¡Œä¸€ä¸ª</li><li>â€“volumes æ‰“å°æ•°æ®å·åï¼Œä¸€è¡Œä¸€ä¸ª</li></ul><p>ä¹Ÿå°±æ˜¯æŸ¥çœ‹yamlæ–‡ä»¶æ˜¯æ€ä¹ˆå†™çš„ï¼›éªŒè¯yamlæ–‡ä»¶æ˜¯å¦å†™çš„æ­£ç¡®ã€‚<br> å¦‚æœyamlæ–‡ä»¶åä¸æ˜¯â€œdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yamlâ€ï¼Œå°±éœ€è¦ä½¿ç”¨-fæŒ‡å®šyamlæ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#éªŒè¯å¹¶æŸ¥çœ‹composeæ–‡ä»¶é…ç½®</span>
<span class="token function">docker-compose</span> config

<span class="token comment">#éªŒè¯å¹¶æŸ¥çœ‹composeæ–‡ä»¶é…ç½®å¹¶æŒ‡å®šyamlæ–‡ä»¶</span>
<span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> nginx.yaml config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docker-composeå¸¸ç”¨å­—æ®µè¯¦è§£-yamlæ¨¡æ¿æ–‡ä»¶-å¸¦-çš„æ˜¯å¸¸ç”¨çš„" tabindex="-1"><a class="header-anchor" href="#docker-composeå¸¸ç”¨å­—æ®µè¯¦è§£-yamlæ¨¡æ¿æ–‡ä»¶-å¸¦-çš„æ˜¯å¸¸ç”¨çš„" aria-hidden="true">#</a> docker-composeå¸¸ç”¨å­—æ®µè¯¦è§£ï¼ˆyamlæ¨¡æ¿æ–‡ä»¶ï¼‰ï¼Œå¸¦*çš„æ˜¯å¸¸ç”¨çš„</h3><blockquote><p>Composeå…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªdocker-compose.ymlæ¨¡æ¿æ–‡ä»¶ï¼ˆYAML æ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ã€‚<br> Composeæ¨¡æ¿æ–‡ä»¶æ˜¯ä¸€ä¸ªå®šä¹‰æœåŠ¡ã€ç½‘ç»œå’Œå·çš„YAMLæ–‡ä»¶ã€‚Composeæ¨¡æ¿æ–‡ä»¶é»˜è®¤è·¯å¾„æ˜¯å½“å‰ç›®å½•ä¸‹çš„docker-compose.ymlï¼Œå¯ä»¥ä½¿ç”¨.ymlæˆ–.yamlä½œä¸ºæ–‡ä»¶æ‰©å±•åã€‚<br> Docker-Composeæ ‡å‡†æ¨¡æ¿æ–‡ä»¶åº”è¯¥åŒ…å«versionã€servicesã€networks ä¸‰å¤§éƒ¨åˆ†ï¼Œæœ€å…³é”®çš„æ˜¯serviceså’Œnetworksä¸¤ä¸ªéƒ¨åˆ†ã€‚<br> &quot;:&quot;åé¢å¿…é¡»åŠ ç©ºæ ¼ï¼Œ&quot;-&quot;åé¢å¿…é¡»åŠ ç©ºæ ¼,æ¯ä¸ªå­—æ®µå†™å®Œéƒ½å¿…é¡»åŠ &quot;:&quot;ã€‚</p></blockquote><h3 id="_1-version" tabindex="-1"><a class="header-anchor" href="#_1-version" aria-hidden="true">#</a> *1 version</h3><p>å æ®æœ€å·¦ä¾§ï¼Œæ¯ä¸ªyamlæ–‡ä»¶å¿…å†™çš„ï¼›æŒ‡å®šAPIç‰ˆæœ¬å·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-services" tabindex="-1"><a class="header-anchor" href="#_2-services" aria-hidden="true">#</a> *2 services</h3><p>å æ®æœ€å·¦ä¾§ï¼Œä¸versionåŒåˆ—ï¼Œä¹Ÿæ˜¯æ¯ä¸ªyamlæ–‡ä»¶å¿…å†™çš„ï¼›æŒ‡å®šä»¥ä¸‹æ˜¯æœåŠ¡,ç´§è·Ÿä¸‹é¢å†™çš„æ˜¯è¯¥æœåŠ¡çš„åç§°ï¼Œå•ç‹¬é‡å¯ã€å¯åŠ¨ã€åœæ­¢éƒ½éœ€è¦å†™æœåŠ¡åç§°ï¼Œè€Œä¸æ˜¯å®¹å™¨åç§°ã€‚<br> æœåŠ¡åç§°è¦ä¸serviceså‰é¢ç©ºä¸¤æ ¼ï¼Œä¸èƒ½ä½¿ç”¨tabï¼Œå¿…é¡»ä½¿ç”¨ç©ºæ ¼ã€‚</p><p>servicesæ ¼å¼ä¸ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>services: 

  æœåŠ¡åç§°: 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-hostname" tabindex="-1"><a class="header-anchor" href="#_3-hostname" aria-hidden="true">#</a> *3 hostname</h3><ul><li>hostnameæ ¼å¼ä¸ºï¼šhostname: &lt;ä¸»æœºåç§°&gt;</li></ul><p>åœ¨servicesæœåŠ¡çš„æœåŠ¡åç§°ä¸‹ä¸€è¡Œç©ºä¸¤æ ¼æ¥å†™ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
    hostname: nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-container-name" tabindex="-1"><a class="header-anchor" href="#_4-container-name" aria-hidden="true">#</a> *4 container_name</h3><ul><li>Composeçš„å®¹å™¨åç§°ï¼ˆcontainer_nameï¼‰æ ¼å¼æ˜¯ï¼šcontainer_name: &lt;é¡¹ç›®åç§°&gt;&lt;æœåŠ¡åç§°&gt;&lt;åºå·&gt;</li></ul><p>å¯ä»¥è‡ªå®šä¹‰é¡¹ç›®åç§°ã€æœåŠ¡åç§°ï¼Œä½†å¦‚æœæƒ³å®Œå…¨æ§åˆ¶å®¹å™¨çš„å‘½åï¼Œå¯ä»¥ä½¿ç”¨æ ‡ç­¾æŒ‡å®šï¼š<br> éœ€å’ŒhostnameåŒä¸€åˆ—ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
    hostname: nginx
    container_name: nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-image" tabindex="-1"><a class="header-anchor" href="#_5-image" aria-hidden="true">#</a> *5 image</h3><ul><li>imageæ ¼å¼ä¸ºï¼šimage: é•œåƒå:ç‰ˆæœ¬å·</li></ul><p>imageæ˜¯æŒ‡å®šæœåŠ¡çš„é•œåƒåç§°æˆ–é•œåƒIDã€‚å¦‚æœé•œåƒåœ¨æœ¬åœ°ä¸å­˜åœ¨ï¼ŒComposeå°†ä¼šå°è¯•æ‹‰å–é•œåƒã€‚<br> éœ€è¦ä¸container_nameåŒä¸€åˆ—ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
    hostname: nginx
    container_name: nginx
	image: nginx:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-ports" tabindex="-1"><a class="header-anchor" href="#_6-ports" aria-hidden="true">#</a> *6 ports</h3><p>portsæ ¼å¼ä¸ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ports:
  - <span class="token string">&quot;å®¹å™¨å¤–ç«¯å£:å®¹å™¨å†…ç«¯å£&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>portsç”¨äºæ˜ å°„ç«¯å£çš„æ ‡ç­¾ã€‚<br> ä½¿ç”¨HOST:CONTAINERæ ¼å¼æˆ–è€…åªæ˜¯æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼Œå®¿ä¸»æœºä¼šéšæœºæ˜ å°„ç«¯å£ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
    hostname: nginx
    container_name: nginx
	image: nginx:latest
	ports: 
	  - <span class="token string">&quot;80:80&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-volumes" tabindex="-1"><a class="header-anchor" href="#_7-volumes" aria-hidden="true">#</a> *7 volumes</h3><p>æŒ‚è½½ä¸€ä¸ªç›®å½•æˆ–è€…ä¸€ä¸ªå·²å­˜åœ¨çš„æ•°æ®å·å®¹å™¨ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ [HOST:CONTAINER]æ ¼å¼ï¼Œæˆ–è€…ä½¿ç”¨[HOST:CONTAINER:ro]æ ¼å¼ï¼Œåè€…å¯¹äºå®¹å™¨æ¥è¯´ï¼Œæ•°æ®å·æ˜¯åªè¯»çš„ï¼Œå¯ä»¥æœ‰æ•ˆä¿æŠ¤å®¿ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿã€‚<br> Composeçš„æ•°æ®å·æŒ‡å®šè·¯å¾„å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä½¿ç”¨ . æˆ–è€… â€¦ æ¥æŒ‡å®šç›¸å¯¹ç›®å½•ã€‚<br> æ•°æ®å·çš„æ ¼å¼å¯ä»¥æ˜¯ä¸‹é¢å¤šç§å½¢å¼ï¼š<br> å’Œhostnameã€portsåŒåˆ—ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>volumes:
  // åªæ˜¯æŒ‡å®šä¸€ä¸ªè·¯å¾„ï¼ŒDocker ä¼šè‡ªåŠ¨åœ¨åˆ›å»ºä¸€ä¸ªæ•°æ®å·ï¼ˆè¿™ä¸ªè·¯å¾„æ˜¯å®¹å™¨å†…éƒ¨çš„ï¼‰ã€‚
  - /var/lib/mysql
  // ä½¿ç”¨ç»å¯¹è·¯å¾„æŒ‚è½½æ•°æ®å·
  - /opt/data:/var/lib/mysql
  // ä»¥ Compose é…ç½®æ–‡ä»¶ä¸ºä¸­å¿ƒçš„ç›¸å¯¹è·¯å¾„ä½œä¸ºæ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨ã€‚
  - ./cache:/tmp/cache
  // ä½¿ç”¨ç”¨æˆ·çš„ç›¸å¯¹è·¯å¾„ï¼ˆ~/ è¡¨ç¤ºçš„ç›®å½•æ˜¯ /home/<span class="token operator">&lt;</span>ç”¨æˆ·ç›®å½•<span class="token operator">&gt;</span>/ æˆ–è€… /root/ï¼‰ã€‚
  - ~/configs:/etc/configs/:ro
  // å·²ç»å­˜åœ¨çš„å‘½åçš„æ•°æ®å·ã€‚
  - datavolume:/var/lib/mysql
  // å¦‚æœä¸ä½¿ç”¨å®¿ä¸»æœºçš„è·¯å¾„ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ªvolume_driverã€‚
  - volume_driver: mydriver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-restart" tabindex="-1"><a class="header-anchor" href="#_8-restart" aria-hidden="true">#</a> *8 restart</h3><p>æ ¼å¼ä¸ºï¼šrestart: always/no/on-failure/unless-stopped<br> è®¾ç½®æ”¹å®¹å™¨æ˜¯å¦å¼€æœºè‡ªå¯ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
    hostname: nginx
    container_name: nginx
	image: nginx:latest
	ports: 
	  - <span class="token string">&quot;80:80&quot;</span>
	  - <span class="token number">443</span>
    restart: always
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-volumes-from" tabindex="-1"><a class="header-anchor" href="#_9-volumes-from" aria-hidden="true">#</a> 9 volumes_from</h3><p>ä»å¦ä¸€ä¸ªæœåŠ¡æˆ–å®¹å™¨æŒ‚è½½å…¶æ•°æ®å·ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
    hostname: nginx
    volumes_from:
      - service_name    
        - container_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-command" tabindex="-1"><a class="header-anchor" href="#_10-command" aria-hidden="true">#</a> *10 command</h3><p>ä½¿ç”¨commandå¯ä»¥è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚å’ŒDockerfileä¸­çš„CMDä¸€æ ·ï¼Œæ‰§è¡Œå‘½ä»¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>
services: 

  nginx: 
    hostname: nginx
	command: <span class="token function">sh</span> /application/start.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11-build" tabindex="-1"><a class="header-anchor" href="#_11-build" aria-hidden="true">#</a> 11 build</h3><p>æœåŠ¡é™¤äº†å¯ä»¥åŸºäºæŒ‡å®šçš„é•œåƒï¼Œè¿˜å¯ä»¥åŸºäºä¸€ä»½Dockerfileï¼Œåœ¨ä½¿ç”¨upå¯åŠ¨æ—¶æ‰§è¡Œæ„å»ºä»»åŠ¡ï¼Œæ„å»ºæ ‡ç­¾æ˜¯buildï¼Œå¯ä»¥æŒ‡å®šDockerfileæ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚Composeå°†ä¼šåˆ©ç”¨Dockerfileè‡ªåŠ¨æ„å»ºé•œåƒï¼Œç„¶åä½¿ç”¨é•œåƒå¯åŠ¨æœåŠ¡å®¹å™¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>build: /path/to/build/dir
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåªè¦ä¸Šä¸‹æ–‡ç¡®å®šå°±å¯ä»¥è¯»å–åˆ°Dockerfileã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>build: ./dir
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è®¾å®šä¸Šä¸‹æ–‡æ ¹ç›®å½•ï¼Œç„¶åä»¥è¯¥ç›®å½•ä¸ºå‡†æŒ‡å®šDockerfileã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>build:
  context: <span class="token punctuation">..</span>/
  dockerfile: path/of/Dockerfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>buildéƒ½æ˜¯ä¸€ä¸ªç›®å½•ï¼Œå¦‚æœè¦æŒ‡å®šDockerfileæ–‡ä»¶éœ€è¦åœ¨buildæ ‡ç­¾çš„å­çº§æ ‡ç­¾ä¸­ä½¿ç”¨dockerfileæ ‡ç­¾æŒ‡å®šã€‚<br> å¦‚æœåŒæ—¶æŒ‡å®šimageå’Œbuildä¸¤ä¸ªæ ‡ç­¾ï¼Œé‚£ä¹ˆComposeä¼šæ„å»ºé•œåƒå¹¶ä¸”æŠŠé•œåƒå‘½åä¸ºimageå€¼æŒ‡å®šçš„åå­—ã€‚</p><h3 id="_12-context" tabindex="-1"><a class="header-anchor" href="#_12-context" aria-hidden="true">#</a> 12 context</h3><p>contexté€‰é¡¹å¯ä»¥æ˜¯Dockerfileçš„æ–‡ä»¶è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ°é“¾æ¥åˆ°gitä»“åº“çš„urlï¼Œå½“æä¾›çš„å€¼æ˜¯ç›¸å¯¹è·¯å¾„æ—¶ï¼Œè¢«è§£æä¸ºç›¸å¯¹äºæ’°å†™æ–‡ä»¶çš„è·¯å¾„ï¼Œæ­¤ç›®å½•ä¹Ÿæ˜¯å‘é€åˆ°Dockerå®ˆæŠ¤è¿›ç¨‹çš„context</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>build:
  context: ./dir
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13-dockerfile" tabindex="-1"><a class="header-anchor" href="#_13-dockerfile" aria-hidden="true">#</a> 13 dockerfile</h3><p>ä½¿ç”¨dockerfileæ–‡ä»¶æ¥æ„å»ºï¼Œå¿…é¡»æŒ‡å®šæ„å»ºè·¯å¾„</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>build: 
  context: <span class="token builtin class-name">.</span>
  dockerfile: Dockerfile-alternate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14-depends-on" tabindex="-1"><a class="header-anchor" href="#_14-depends-on" aria-hidden="true">#</a> 14 depends_on</h3><p>åœ¨ä½¿ç”¨Composeæ—¶ï¼Œæœ€å¤§çš„å¥½å¤„å°±æ˜¯å°‘æ‰“å¯åŠ¨å‘½ä»¤ï¼Œä½†ä¸€èˆ¬é¡¹ç›®å®¹å™¨å¯åŠ¨çš„é¡ºåºæ˜¯æœ‰è¦æ±‚çš„ï¼Œå¦‚æœç›´æ¥ä»ä¸Šåˆ°ä¸‹å¯åŠ¨å®¹å™¨ï¼Œå¿…ç„¶ä¼šå› ä¸ºå®¹å™¨ä¾èµ–é—®é¢˜è€Œå¯åŠ¨å¤±è´¥ã€‚ä¾‹å¦‚åœ¨æ²¡å¯åŠ¨æ•°æ®åº“å®¹å™¨çš„æ—¶å€™å¯åŠ¨åº”ç”¨å®¹å™¨ï¼Œåº”ç”¨å®¹å™¨ä¼šå› ä¸ºæ‰¾ä¸åˆ°æ•°æ®åº“è€Œé€€å‡ºã€‚depends_onæ ‡ç­¾ç”¨äºè§£å†³å®¹å™¨çš„ä¾èµ–ã€å¯åŠ¨å…ˆåçš„é—®é¢˜ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&#39;2&#39;</span>
services:
  web:
    build: <span class="token builtin class-name">.</span>
    depends_on:
      - db
      - redis
  redis:
    image: redis
  db:
    image: postgres
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°YAMLæ–‡ä»¶å®šä¹‰çš„å®¹å™¨ä¼šå…ˆå¯åŠ¨rediså’Œdbä¸¤ä¸ªæœåŠ¡ï¼Œæœ€åæ‰å¯åŠ¨web æœåŠ¡ã€‚</p><h3 id="_15-pid" tabindex="-1"><a class="header-anchor" href="#_15-pid" aria-hidden="true">#</a> 15 pid</h3><p>å°†PIDæ¨¡å¼è®¾ç½®ä¸ºä¸»æœºPIDæ¨¡å¼ï¼Œè·Ÿä¸»æœºç³»ç»Ÿå…±äº«è¿›ç¨‹å‘½åç©ºé—´ã€‚å®¹å™¨ä½¿ç”¨pidæ ‡ç­¾å°†èƒ½å¤Ÿè®¿é—®å’Œæ“çºµå…¶ä»–å®¹å™¨å’Œå®¿ä¸»æœºçš„åç§°ç©ºé—´ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pid: <span class="token string">&quot;host&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_16-labels" tabindex="-1"><a class="header-anchor" href="#_16-labels" aria-hidden="true">#</a> 16 labels</h3><p>ä¸ºå®¹å™¨æ·»åŠ Dockerå…ƒæ•°æ®ï¼ˆmetadataï¼‰ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä¸ºå®¹å™¨æ·»åŠ è¾…åŠ©è¯´æ˜ä¿¡æ¯ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>labelsï¼š
    com.startupteam.description: <span class="token string">&quot;nginx for a strtup team&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_17-network-mode" tabindex="-1"><a class="header-anchor" href="#_17-network-mode" aria-hidden="true">#</a> 17 network_mode</h3><p>è®¾ç½®ç½‘ç»œæ¨¡å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>network_mode: <span class="token string">&quot;bridge&quot;</span>
network_mode: <span class="token string">&quot;none&quot;</span>
network_mode: <span class="token string">&quot;host&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18-dns" tabindex="-1"><a class="header-anchor" href="#_18-dns" aria-hidden="true">#</a> 18 dns</h3><p>è‡ªå®šä¹‰DNSæœåŠ¡å™¨ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>dnsï¼š8.8.8.8
dnsï¼š<span class="token comment"># development.yml</span>
    - <span class="token number">8.8</span>.8.8    
    - <span class="token number">9.9</span>.9.9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_19-dns-search" tabindex="-1"><a class="header-anchor" href="#_19-dns-search" aria-hidden="true">#</a> 19 dns_search</h3><p>é…ç½®DNSæœç´¢åŸŸã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>dns_searchï¼šexample.com
dns_searchï¼š
    - domain1.example.com
    - domain2.example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_20-entrypoint" tabindex="-1"><a class="header-anchor" href="#_20-entrypoint" aria-hidden="true">#</a> 20 entrypoint</h3><p>åœ¨Dockerfileä¸­æœ‰ä¸€ä¸ªæŒ‡ä»¤å«åšENTRYPOINTæŒ‡ä»¤ï¼Œç”¨äºæŒ‡å®šæ¥å…¥ç‚¹ã€‚<br> åœ¨docker-compose.ymlä¸­å¯ä»¥å®šä¹‰æ¥å…¥ç‚¹ï¼Œè¦†ç›–Dockerfileä¸­çš„å®šä¹‰ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>entrypoint: /code/entrypoint.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_21-env-file" tabindex="-1"><a class="header-anchor" href="#_21-env-file" aria-hidden="true">#</a> 21 env_file</h3><p>åœ¨docker-compose.ymlä¸­å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸“é—¨å­˜æ”¾å˜é‡çš„æ–‡ä»¶ã€‚<br> å¦‚æœé€šè¿‡docker-compose -f FILEæŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œåˆ™env_fileä¸­è·¯å¾„ä¼šä½¿ç”¨é…ç½®æ–‡ä»¶è·¯å¾„ã€‚<br> å¦‚æœæœ‰å˜é‡åç§°ä¸environmentæŒ‡ä»¤å†²çªï¼Œåˆ™ä»¥åè€…ä¸ºå‡†ã€‚æ ¼å¼å¦‚ä¸‹ï¼š<br> env_file: .env<br> æˆ–è€…æ ¹æ®docker-compose.ymlè®¾ç½®å¤šä¸ªï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>env_file:
  - ./common.env
  - ./apps/web.env
  - ./opt/secrets.env
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_22-cap-add" tabindex="-1"><a class="header-anchor" href="#_22-cap-add" aria-hidden="true">#</a> 22 cap_add</h3><p>å¢åŠ æŒ‡å®šå®¹å™¨çš„å†…æ ¸èƒ½åŠ›ï¼ˆcapacityï¼‰ã€‚<br> è®©å®¹å™¨å…·æœ‰æ‰€æœ‰èƒ½åŠ›å¯ä»¥æŒ‡å®šï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>cap_add:
    - ALL
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_23-cap-drop" tabindex="-1"><a class="header-anchor" href="#_23-cap-drop" aria-hidden="true">#</a> 23 cap_drop</h3><p>å»æ‰æŒ‡å®šå®¹å™¨çš„å†…æ ¸èƒ½åŠ›ï¼ˆcapacityï¼‰ã€‚<br> å»æ‰NET_ADMINèƒ½åŠ›å¯ä»¥æŒ‡å®šï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>cap_drop:
    - NET_ADMIN
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_24-cgroup-parent" tabindex="-1"><a class="header-anchor" href="#_24-cgroup-parent" aria-hidden="true">#</a> 24 cgroup_parent</h3><p>åˆ›å»ºäº†ä¸€ä¸ªcgroupç»„åç§°ä¸ºcgroups_1:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>cgroup_parent: cgroups_1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_25-expose" tabindex="-1"><a class="header-anchor" href="#_25-expose" aria-hidden="true">#</a> 25 expose</h3><p>æš´éœ²ç«¯å£ï¼Œä½†ä¸æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œåªå…è®¸èƒ½è¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚ä»…å¯ä»¥æŒ‡å®šå†…éƒ¨ç«¯å£ä¸ºå‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>expose:
    - <span class="token string">&quot;3000&quot;</span>
    - <span class="token string">&quot;8000&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_26-extends" tabindex="-1"><a class="header-anchor" href="#_26-extends" aria-hidden="true">#</a> 26 extends</h3><p>åŸºäºå…¶å®ƒæ¨¡æ¿æ–‡ä»¶è¿›è¡Œæ‰©å±•ã€‚ä¾‹å¦‚ï¼Œå¯¹äºwebappæœåŠ¡å®šä¹‰äº†ä¸€ä¸ªåŸºç¡€æ¨¡æ¿æ–‡ä»¶ä¸ºcommon.ymlï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>webapp:
    build: ./webapp
    environment:
        - <span class="token assign-left variable">DEBUG</span><span class="token operator">=</span>false
        - <span class="token assign-left variable">SEND_EMAILS</span><span class="token operator">=</span>false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†ç¼–å†™ä¸€ä¸ªæ–°çš„development.ymlæ–‡ä»¶ï¼Œä½¿ç”¨common.ymlä¸­çš„webappæœåŠ¡è¿›è¡Œæ‰©å±•ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>web:
    extends:
        file: common.yml
        service: webapp
    ports:
        - <span class="token string">&quot;8000:8000&quot;</span>
    links:
        - db
    environment:
        - <span class="token assign-left variable">DEBUG</span><span class="token operator">=</span>true
db:
    image: mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åè€…ä¼šè‡ªåŠ¨ç»§æ‰¿common.ymlä¸­çš„webappæœåŠ¡åŠç¯å¢ƒå˜é‡å®šä¹‰ã€‚<br> extendsé™åˆ¶å¦‚ä¸‹ï¼š<br> Aã€è¦é¿å…å‡ºç°å¾ªç¯ä¾èµ–<br> Bã€extendsä¸ä¼šç»§æ‰¿linkså’Œvolumes_fromä¸­å®šä¹‰çš„å®¹å™¨å’Œæ•°æ®å·èµ„æº<br> æ¨èåœ¨åŸºç¡€æ¨¡æ¿ä¸­åªå®šä¹‰ä¸€äº›å¯ä»¥å…±äº«çš„é•œåƒå’Œç¯å¢ƒå˜é‡ï¼Œåœ¨æ‰©å±•æ¨¡æ¿ä¸­å…·ä½“æŒ‡å®šåº”ç”¨å˜é‡ã€é“¾æ¥ã€æ•°æ®å·ç­‰ä¿¡æ¯</p><h3 id="_27-external-links" tabindex="-1"><a class="header-anchor" href="#_27-external-links" aria-hidden="true">#</a> 27 external_links</h3><p>é“¾æ¥åˆ°docker-compose.yamlå¤–éƒ¨çš„å®¹å™¨ï¼Œå¯ä»¥æ˜¯édocker-composeç®¡ç†çš„å¤–éƒ¨å®¹å™¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>external_links:
    - redis_1
    - project_db_1:mysql
    - project_db_1:postgresql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_28-links" tabindex="-1"><a class="header-anchor" href="#_28-links" aria-hidden="true">#</a> 28 links</h3><p>é“¾æ¥åˆ°å…¶å®ƒæœåŠ¡ä¸­çš„å®¹å™¨ã€‚ä½¿ç”¨æœåŠ¡åç§°ï¼ˆåŒæ—¶ä½œä¸ºåˆ«åï¼‰ï¼Œæˆ–è€…â€œæœåŠ¡åç§°:æœåŠ¡åˆ«åâ€ï¼ˆå¦‚ SERVICE:ALIASï¼‰ï¼Œä¾‹å¦‚ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>links:
    - db
    - db:database
    - redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨åˆ«åå°†ä¼šè‡ªåŠ¨åœ¨æœåŠ¡å®¹å™¨ä¸­çš„/etc/hostsé‡Œåˆ›å»ºã€‚ä¾‹å¦‚ï¼š</p><p>172.16.2.186 db<br> 172.16.2.186 database<br> 172.16.2.187 redis</p><h3 id="_29-working-dir" tabindex="-1"><a class="header-anchor" href="#_29-working-dir" aria-hidden="true">#</a> 29 working_dir</h3><p>åˆ‡æ¢ç›®æ ‡ç›®å½•ï¼Œä¸Dockerfileä¸­çš„â€WORKDIRâ€œç›¸åŒ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>working_dir: /application/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="æ ‡å‡†yamlæ–‡ä»¶åä¸º-docker-compose-yml-docker-compose-yaml-compose-yml-compose-yaml" tabindex="-1"><a class="header-anchor" href="#æ ‡å‡†yamlæ–‡ä»¶åä¸º-docker-compose-yml-docker-compose-yaml-compose-yml-compose-yaml" aria-hidden="true">#</a> æ ‡å‡†yamlæ–‡ä»¶åä¸ºï¼šdocker-compose.yml, docker-compose.yaml, compose.yml, compose.yaml</h2>`,170),se=e("br",null,null,-1),ae=d(`<h2 id="docker-compose-æ¨¡æ¿æ–‡ä»¶è¯¦å†™å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#docker-compose-æ¨¡æ¿æ–‡ä»¶è¯¦å†™å®ä¾‹" aria-hidden="true">#</a> docker-compose æ¨¡æ¿æ–‡ä»¶è¯¦å†™å®ä¾‹</h2><p>ä¸‰ä¸ªnginxæœåŠ¡ï¼Œè®¿é—®ç«¯å£åˆ†åˆ«ä¸º:[80,81,82]</p><h3 id="_1-åˆ›å»ºæ¨¡æ¿yamlæ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-åˆ›å»ºæ¨¡æ¿yamlæ–‡ä»¶" aria-hidden="true">#</a> 1 åˆ›å»ºæ¨¡æ¿yamlæ–‡ä»¶</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>version: <span class="token string">&quot;3&quot;</span>                <span class="token comment">#APIç‰ˆæœ¬</span>

services:                   <span class="token comment">#æœåŠ¡</span>
  nginx1:                   <span class="token comment">#æœåŠ¡åç§°</span>
   hostname: nginx1          <span class="token comment">#å®¹å™¨å†…ä¸»æœºåç§°</span>
   container_name: nginx1    <span class="token comment">#å®¹å™¨å</span>
   image: nginx:latest       <span class="token comment">#è¦ä½¿ç”¨çš„é•œåƒ</span>
   restart: always           <span class="token comment">#è®¾ç½®å¼€æœºè‡ªå¯</span>
   ports:
     - <span class="token string">&quot;80:80&quot;</span>
     - <span class="token string">&quot;443:443&quot;</span>
   volumes: 
     - /data/nginx1/conf/nginx.conf:/etc/nginx/nginx.conf
     - /data/nginx1/html:/usr/share/nginx/html
     - /data/nginx1/logs:/var/log/nginx
     - /etc/localtime:/etc/localtime

  nginx2: 
    hostname: nginx2
    container_name: nginx2
    image: nginx:latest
    restart: always
    ports:
      - <span class="token string">&quot;81:80&quot;</span>
      - <span class="token string">&quot;444:443&quot;</span>
    volumes:
     - /data/nginx2/conf/nginx.conf:/etc/nginx/nginx.conf
     - /data/nginx2/html:/usr/share/nginx/html
     - /data/nginx2/logs:/var/log/nginx
     - /etc/localtime:/etc/localtime

  nginx3:
    hostname: nginx3
    container_name: nginx3
    image: nginx:latest
    restart: always
    ports:
      - <span class="token string">&quot;82:80&quot;</span>
      - <span class="token string">&quot;445:443&quot;</span>
    volumes:
     - /data/nginx3/conf/nginx.conf:/etc/nginx/nginx.conf
     - /data/nginx3/html:/usr/share/nginx/html
     - /data/nginx3/logs:/var/log/nginx
     - /etc/localtime:/etc/localtime
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å¯åŠ¨nginxæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-å¯åŠ¨nginxæœåŠ¡" aria-hidden="true">#</a> 2 å¯åŠ¨nginxæœåŠ¡</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#åˆ›å»ºå¯åŠ¨nginx3ä¸ªæœåŠ¡</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161502945.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_3-è®¿é—®nginxé¡µé¢" tabindex="-1"><a class="header-anchor" href="#_3-è®¿é—®nginxé¡µé¢" aria-hidden="true">#</a> 3 è®¿é—®nginxé¡µé¢</h3>`,8),ie=e("br",null,null,-1),le={href:"http://127.0.0.1:80",target:"_blank",rel:"noopener noreferrer"},de=e("br",null,null,-1),oe={href:"http://127.0.0.1:81",target:"_blank",rel:"noopener noreferrer"},re=e("br",null,null,-1),ce={href:"http://127.0.0.1:82",target:"_blank",rel:"noopener noreferrer"},te=e("h2",{id:"é‡è¦-yamléœ€è¦æ³¨æ„çš„",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#é‡è¦-yamléœ€è¦æ³¨æ„çš„","aria-hidden":"true"},"#"),n(" é‡è¦ï¼šYAMLéœ€è¦æ³¨æ„çš„")],-1),me=e("p",null,[n("1 YAMLéœ€è¦æ³¨æ„çš„é—®é¢˜å°±æ˜¯æ ¼å¼é—®é¢˜ï¼š"),e("br"),n(" ERROR: In file './nginx.yaml', service 'hostname' must be a mapping not a st"),e("br"),n(" è§£å†³ï¼šæŸ¥çœ‹è‡ªå·±çš„YAMLæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼›")],-1),pe={href:"https://liucy.blog.csdn.net/article/details/129082503",target:"_blank",rel:"noopener noreferrer"};function ue(ve,be){const a=o("ExternalLinkIcon"),i=o("font");return c(),t("div",null,[e("blockquote",null,[p,e("p",null,[n("â€ƒâ€ƒğŸ…"),e("a",u,[n("CSDNåšå®¢ä¸“å®¶"),s(a)]),v,n(" â€ƒâ€ƒğŸ…"),e("a",b,[n("äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…"),s(a)]),h,n(" â€ƒâ€ƒğŸ…"),e("a",k,[n("åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»"),s(a)]),g,n(" â€ƒâ€ƒğŸ…"),e("a",_,[n("é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»"),s(a)]),f,n(" ğŸ’Š"),x,e("a",y,[n("è¿ç»´äº¤æµç¤¾åŒº"),s(a)]),n(" æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼"),q,n(" ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„"),w,n(" ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—")])]),D,A,M,e("blockquote",null,[e("p",null,[n("docker-composeé¡¹ç›®æ˜¯dockerå®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹dockerå®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚"),L,n(" â€‚"),E,n(" Composeæ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡docker-composeï¼Œå¯ä»¥ä½¿ç”¨YAMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€æ¡å‘½ä»¤ï¼Œå°±å¯ä»¥ä»é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚å¦‚è¦äº†è§£æ›´å¤šæœ‰å…³docker-composeçš„åŠŸèƒ½ï¼Œè¯·å‚é˜…ï¼š"),e("a",I,[n("åŠŸèƒ½åˆ—è¡¨"),s(a)]),n("ã€‚")]),C,N,Y]),T,e("p",null,[n("githubåœ°å€ï¼š"),e("a",R,[n("https://github.com/docker/compose"),s(a)])]),O,s(i,{size:"5"},{default:l(()=>[n("**1ã€YAMLæ–‡ä»¶æ ¼å¼**")]),_:1}),S,s(i,{size:"4"},{default:l(()=>[n("**2ã€YAMLæ ¼å¼çš„æ³¨æ„äº‹é¡¹**")]),_:1}),j,s(i,{size:"4"},{default:l(()=>[n("**æ³¨æ„ï¼š**")]),_:1}),e("blockquote",null,[e("p",null,[n("è¯·ä¸¥æ ¼æŒ‰ç…§YAMLæ–‡ä»¶æ ¼å¼æ¥å†™ï¼Œå¦‚æ ¼å¼å†™é”™docker-composeå¯åŠ¨æœåŠ¡æ—¶ä¸€èˆ¬ä¼šæŠ¥ï¼š"),s(i,{color:"red"},{default:l(()=>[n("ERROR: In file './nginx.yaml', service 'hostname' must be a mapping not a st")]),_:1}),n(" è¿™ä¸ªé”™ï¼›è§£å†³æ–¹å¼å°±æ˜¯çœ‹è‡ªå·±çš„YAMLæ–‡ä»¶æ ¼å¼å†™çš„æ˜¯å¦æ­£ç¡®ã€‚"),P,n(" æ›´å¤šYAMLæ ¼å¼åŠå®ä¾‹å¯å‚è€ƒï¼š"),e("a",V,[n("yamlæ–‡ä»¶æ ¼å¼è¯¦è§£åŠå®ä¾‹"),s(a)])])]),e("p",null,[n("docker-composeéƒ¨ç½²æ–‡æ¡£å¯å‚è€ƒï¼š "),e("a",z,[n("Linuxä¸­å®‰è£…/éƒ¨ç½²docker-compose"),s(a)])]),B,U,e("p",null,[n("å¯å‚è€ƒï¼š "),e("a",G,[n("Linuxä¸­å®‰è£…/éƒ¨ç½²docker-compose"),s(a)]),n(" æ–‡æ¡£ï¼Œä¸¤ç§åœ¨çº¿éƒ¨ç½²æ–¹å¼ã€‚"),H,n(" å…¶å®åœ¨çº¿å®‰è£…ä¸­çš„ç¬¬ä¸€ç§å¯ä½œä¸ºç¦»çº¿å®‰è£…ï¼Œåªè¦å§docker-composeä¸‹è½½ä¸‹æ¥ï¼Œè§£å‹ç›´æ¥è½¯è¿æ¥å°±è¡Œï¼Œå’Œæ¥ä¸‹æ¥è¯´çš„ç¦»çº¿å®‰è£…éƒ¨ç½²æ–¹å¼ä¸€æ ·ã€‚")]),F,$,K,e("p",null,[n("åœ¨"),e("a",W,[n("Github"),s(a)]),n("ä¸­ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸‹è½½1.29.2ç‰ˆæœ¬çš„å§ã€docker-compose-Linux-x86_64ã€‘ã€‚"),J,n(' å¦‚æœæ‰¾ä¸åˆ°ä¸‹è½½é“¾æ¥åœ¨å“ªï¼Œå¯æ‰¾ä¸€å°æœ‰å¤–ç½‘çš„æœåŠ¡å™¨ä¸‹è½½ï¼šcurl -L "'),Q,X,n(" ä¸‹è½½å®Œæˆä¹‹åä¼ åˆ°æœ¬åœ°åœ¨ä¸Šä¼ åˆ°å†…ç½‘æœåŠ¡å™¨ä¸­å³å¯ï¼›")]),e("blockquote",null,[e("p",null,[n("æˆ–è€…å¯ä»¥ç›´æ¥ä¸‹è½½ï¼š"),e("a",Z,[n("docker-compose1.29.2ç¦»çº¿åŒ…"),s(a)])])]),ee,s(i,{color:"red"},{default:l(()=>[n("æœ€é‡è¦çš„å¿…é¡»åœ¨å­˜æ”¾yamlæ–‡ä»¶çš„ç›®å½•æ¥æ‰§è¡Œã€‚")]),_:1}),ne,e("p",null,[n("è¿™äº›å¯ä»¥ç›´æ¥ä½¿ç”¨"),s(i,{color:"red"},{default:l(()=>[n("docker-compose å‘½ä»¤")]),_:1}),n(" æ¥æ‰§è¡Œ;"),se,n(" å¦‚æœæ˜¯å…¶ä»–æ–‡ä»¶åï¼Œæ¯”å¦‚nginxå°±éœ€è¦ä½¿ç”¨ "),s(i,{color:"green"},{default:l(()=>[n("-f")]),_:1}),n(" æ¥æŒ‡å®š "),s(i,{color:"red"},{default:l(()=>[n("docker-compose -f nginx.yaml å‘½ä»¤")]),_:1}),n(" æ¥æ‰§è¡Œã€‚")]),ae,e("p",null,[n("é€šè¿‡æµè§ˆå™¨è®¿é—®nginx1ï¼Œnginx2ï¼Œnginx3æœåŠ¡:"),ie,e("a",le,[n("http://127.0.0.1:80"),s(a)]),de,e("a",oe,[n("http://127.0.0.1:81"),s(a)]),re,e("a",ce,[n("http://127.0.0.1:82"),s(a)])]),te,me,e("p",null,[n('2 ":"åé¢å¿…é¡»åŠ ç©ºæ ¼ï¼Œ"-"åé¢å¿…é¡»åŠ ç©ºæ ¼,æ¯ä¸ªå­—æ®µå†™å®Œéƒ½å¿…é¡»åŠ ":"ã€‚å…·ä½“è¿˜æœ‰è¯·çœ‹ã€Š'),e("a",pe,[n("YAMLæ–‡ä»¶æ ¼å¼ç¼–å†™åŠç¼–å†™æ³¨æ„äº‹é¡¹"),s(a)]),n("ã€‹")])])}const ge=r(m,[["render",ue],["__file","ã€Dockerã€‘ä¹‹docker-composeçš„ä»‹ç»ä¸å‘½ä»¤çš„ä½¿ç”¨.html.vue"]]);export{ge as default};
