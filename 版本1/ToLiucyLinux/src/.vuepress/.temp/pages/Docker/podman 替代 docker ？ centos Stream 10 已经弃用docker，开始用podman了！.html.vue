<template><div><blockquote>
<p>ğŸ‘¨â€ğŸ“<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">CSDNåšå®¢ä¸“å®¶<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº<ExternalLinkIcon/></a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼<br>
ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„<br>
ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—</p>
</blockquote>
<hr>
<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯-podman" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€ä»€ä¹ˆæ˜¯-podman" aria-hidden="true">#</a> ä¸€ã€ä»€ä¹ˆæ˜¯ podmanï¼Ÿ</h2>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447549.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>â€ƒâ€ƒPodman æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¯åœ¨å¤§å¤šæ•° Linux å¹³å°ä¸Šä½¿ç”¨ï¼Œå¹¶ä½äºGitHub ä¸Šã€‚Podman æ˜¯ä¸€ä¸ªæ— å®ˆæŠ¤è¿›ç¨‹çš„å®¹å™¨å¼•æ“ï¼Œç”¨äºåœ¨ Linux ç³»ç»Ÿä¸Šå¼€å‘ã€ç®¡ç†å’Œè¿è¡Œ Open Container Initiative (OCI) å®¹å™¨å’Œå®¹å™¨æ˜ åƒã€‚Podman æä¾›äº†ä¸€ä¸ªä¸ Docker å…¼å®¹çš„å‘½ä»¤è¡Œå‰ç«¯ï¼Œå®ƒå¯ä»¥ç®€å•åœ°ä¸º Docker cli ï¼Œalias docker=podmanã€‚Podman è¿˜æä¾›äº†ä¸€ä¸ªå¥—æ¥å­—æ¿€æ´»çš„ REST API æœåŠ¡ï¼Œä»¥å…è®¸è¿œç¨‹åº”ç”¨ç¨‹åºå¯åŠ¨æŒ‰éœ€å®¹å™¨ã€‚æ­¤ REST API è¿˜æ”¯æŒ Docker APIï¼Œå…è®¸ docker-py å’Œ docker-compose çš„ç”¨æˆ·ä¸ Podman ä½œä¸ºæœåŠ¡è¿›è¡Œäº¤äº’ã€‚</p>
<p>â€ƒâ€ƒPodman æ§åˆ¶ä¸‹çš„å®¹å™¨å¯ä»¥ç”± root æˆ–éç‰¹æƒç”¨æˆ·è¿è¡Œã€‚Podman ä½¿ç”¨libpodåº“ç®¡ç†æ•´ä¸ªå®¹å™¨ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒ…æ‹¬ podã€å®¹å™¨ã€å®¹å™¨æ˜ åƒå’Œå®¹å™¨å·ã€‚Podman ä¸“æ³¨äºå¸®åŠ©æ‚¨ç»´æŠ¤å’Œä¿®æ”¹ OCI å®¹å™¨é•œåƒçš„æ‰€æœ‰å‘½ä»¤å’ŒåŠŸèƒ½ï¼Œä¾‹å¦‚æ‹‰å–å’Œæ ‡è®°ã€‚å®ƒå…è®¸æ‚¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­åˆ›å»ºã€è¿è¡Œå’Œç»´æŠ¤ä»è¿™äº›æ˜ åƒåˆ›å»ºçš„å®¹å™¨ã€‚</p>
<p>â€ƒâ€ƒPodman æœåŠ¡ä»…åœ¨ Linux å¹³å°ä¸Šè¿è¡Œï¼Œä½† podman è¿œç¨‹ REST API å®¢æˆ·ç«¯å­˜åœ¨äº Mac å’Œ Windows å¹³å°ä¸Šï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ ssh ä¸è¿è¡Œåœ¨ Linux æœºå™¨æˆ– VM ä¸Šçš„ Podman æœåŠ¡è¿›è¡Œé€šä¿¡ã€‚Mac å®¢æˆ·ç«¯ã€‚</p>
<h2 id="äºŒã€éƒ¨ç½²-podman" tabindex="-1"><a class="header-anchor" href="#äºŒã€éƒ¨ç½²-podman" aria-hidden="true">#</a> äºŒã€éƒ¨ç½² podman</h2>
<blockquote>
<p>æ­£å¸¸ centos Stream 10é‡Œé¢æ˜¯è‡ªå¸¦çš„æœ‰podmanæœåŠ¡çš„ï¼›<font color=red>ç›®å‰åªçŸ¥é“ centos Stream8-10 ç³»ç»Ÿä¼šè‡ªå¸¦podmanæœåŠ¡ï¼Œå…¶ä»–ç³»ç»Ÿæ²¡å®‰è£…è¿‡ï¼Œå¯è‡ªè¡ŒæŸ¥çœ‹<code v-pre>podman --version</code></font>ã€‚</p>
</blockquote>
<p>ç¦»çº¿å®‰è£…ï¼š<a href="https://download.csdn.net/download/liu_chen_yang/89525105" target="_blank" rel="noopener noreferrer">podman ç¦»çº¿å®‰è£…åŒ…<ExternalLinkIcon/></a></p>
<hr>
<p><strong>Podman åœ¨ CentOS 8 å’Œ Stream çš„ AppStream å­˜å‚¨åº“ä¸­å¯ç”¨ï¼Œå¯ç›´æ¥è¿›è¡Œyumå®‰è£…ã€‚</strong></p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># å®‰è£…podman</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> <span class="token function">podman</span>

<span class="token comment"># æŸ¥çœ‹podmanç‰ˆæœ¬å·</span>
<span class="token function">podman</span> <span class="token parameter variable">--version</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447226.png" alt="image-20240708155326314" tabindex="0" loading="lazy"><figcaption>image-20240708155326314</figcaption></figure>
<p>è¿™æ ·å°±å®‰è£…æˆåŠŸäº†ï¼›</p>
<ul>
<li><strong>å¯åŠ¨æœåŠ¡å¹¶é…ç½®å¼€æœºè‡ªå¯</strong></li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># è®¾ç½®å¼€æœºè‡ªå¯</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">podman</span>
<span class="token comment"># å¯åŠ¨podmanæœåŠ¡</span>
systemctl start <span class="token function">podman</span>
<span class="token comment"># é‡å¯podmanæœåŠ¡</span>
systemctl restart <span class="token function">podman</span>
<span class="token comment"># åœæ­¢podmanæœåŠ¡</span>
systemctl stop <span class="token function">podman</span>
<span class="token comment"># æŸ¥çœ‹podmanæœåŠ¡çŠ¶æ€ï¼ˆï¼‰</span>
systemctl status <span class="token function">podman</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸‰ã€podman-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€podman-å‚æ•°" aria-hidden="true">#</a> ä¸‰ã€podman å‚æ•°</h2>
<p>podmanå¸¸ç”¨å‚æ•°å’Œdockerå¸¸ç”¨å‚æ•°éƒ½æ˜¯ä¸€æ ·çš„ï¼›è¿™é‡Œä¸¾ä¾‹å‡ ä¸ªå°±è¡Œï¼Œå…·ä½“çš„å¯ä»¥æŸ¥çœ‹dockerçš„å‘½ä»¤å‚æ•°ï¼š<a href="https://liucy.blog.csdn.net/article/details/123842609" target="_blank" rel="noopener noreferrer">linuxï¼ˆcentosï¼‰ä¸­éƒ¨ç½²dockerï¼ˆæ­¥éª¤è¶…å…¨ï¼Œå«å¸¦ä¸€äº›å‘å±•å²å’Œä¸€äº›æ¦‚å¿µï¼‰<ExternalLinkIcon/></a>ï¼ŒæŸ¥çœ‹åé¢çš„<font color=red>dockeré•œåƒç®¡ç†ã€dockerå®¹å™¨ç®¡ç†ã€dockerè¿è¡Œå®¹å™¨å‘½ä»¤</font>ã€‚</p>
<h3 id="_1ã€podman-é•œåƒç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_1ã€podman-é•œåƒç®¡ç†" aria-hidden="true">#</a> 1ã€podman é•œåƒç®¡ç†</h3>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment">#åˆ—å‡ºæ‰€æœ‰çš„é•œåƒ</span>
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman images</span>
REPOSITORY   TAG       IMAGE ID   CREATED   SIZE
REPOSITORYï¼šè¡¨ç¤ºé•œåƒçš„ä»“åº“æº
TAGï¼šé•œåƒçš„æ ‡ç­¾
IMAGE IDï¼šé•œåƒID
CREATEDï¼šé•œåƒåˆ›å»ºæ—¶é—´
SIZEï¼šé•œåƒå¤§å°
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>ä½œç”¨</th>
<th>ä¸¾ä¾‹</th>
<th>é€‰é¡¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>podman search</td>
<td>æœç´¢é•œåƒ</td>
<td>podman search busybox</td>
<td>-f æŒ‰æ¡ä»¶è¿‡æ»¤</td>
</tr>
<tr>
<td>podman pull</td>
<td>æ‹‰å–é•œåƒ</td>
<td>podman pull busybox:latest</td>
<td></td>
</tr>
<tr>
<td>podman push</td>
<td>æ¨é€é•œåƒåˆ°ä»“åº“</td>
<td>podman push busybox:latest</td>
<td></td>
</tr>
<tr>
<td>podman tag</td>
<td>ä¸ºé•œåƒä¿®æ”¹æˆ–åˆ¶ä½œæ ‡ç­¾</td>
<td>podman tag busybox:latest busybox:v1</td>
<td></td>
</tr>
<tr>
<td>podman rmi</td>
<td>åˆ é™¤é•œåƒ</td>
<td>podman rmi busybox:v1</td>
<td></td>
</tr>
<tr>
<td>podman save</td>
<td>å°†é•œåƒä¿å­˜ä¸ºtaråŒ…</td>
<td>podman save -o centos7.tar centos:7</td>
<td>-o æŒ‡å®šç”ŸæˆtaråŒ…åç§°</td>
</tr>
<tr>
<td>podman load</td>
<td>å°†taråŒ…ä¿å­˜çš„é•œåƒå¯¼å…¥</td>
<td>podman load -i centos.tar</td>
<td>-i æŒ‡å®šè¯»å–çš„taråŒ…åç§°</td>
</tr>
<tr>
<td>podman import</td>
<td>é€šè¿‡ä¸€ä¸ªtaråŒ…åˆ›å»ºé•œåƒ</td>
<td>podman import centos-7.tar.gz centos7:v1</td>
<td></td>
</tr>
<tr>
<td>podman histroy</td>
<td>æŸ¥çœ‹é•œåƒåˆ›å»ºçš„å†å²</td>
<td>podman history centos:7</td>
<td></td>
</tr>
</tbody>
</table>
<p>podmanä¸­è¿˜æä¾›äº†ä¸“é—¨ç®¡ç†é•œåƒçš„å­å‘½ä»¤podman image,ç”¨æ³•ä¸podmanå‘½ä»¤ç±»ä¼¼ã€‚</p>
<table>
<thead>
<tr>
<th>podman image å‘½ä»¤</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>podman images</td>
<td>åˆ—å‡ºæ‰€æœ‰é•œåƒ</td>
</tr>
<tr>
<td>podman image ls</td>
<td>åˆ—å‡ºæ‰€æœ‰é•œåƒ</td>
</tr>
<tr>
<td>podman image pull</td>
<td>æ‹‰å–é•œåƒ</td>
</tr>
<tr>
<td>podman image load</td>
<td>å¯¼å…¥é•œåƒ</td>
</tr>
<tr>
<td>podman image rm</td>
<td>åˆ é™¤é•œåƒ</td>
</tr>
<tr>
<td>podman image inspect</td>
<td>æŸ¥çœ‹é•œåƒçš„è¯¦ç»†ä¿¡æ¯</td>
</tr>
<tr>
<td>podman image histroy</td>
<td>æŸ¥çœ‹é•œåƒçš„åˆ›å»ºè®°å½•</td>
</tr>
<tr>
<td>podman image push</td>
<td>æ‹‰å–é•œåƒ</td>
</tr>
<tr>
<td>podman image save</td>
<td>å¯¼å‡ºé•œåƒ</td>
</tr>
<tr>
<td>podman image tag</td>
<td>è®¾ç½®æ ‡ç­¾ï¼ˆä¿®æ”¹ç‰ˆæœ¬ï¼‰</td>
</tr>
<tr>
<td>podman image prune</td>
<td>åˆ é™¤æœªä½¿ç”¨çš„é•œåƒ</td>
</tr>
<tr>
<td>podman image build</td>
<td>podmanfileæ„å»ºé•œåƒ</td>
</tr>
</tbody>
</table>
<h3 id="_2ã€podmanå®¹å™¨ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_2ã€podmanå®¹å™¨ç®¡ç†" aria-hidden="true">#</a> 2ã€podmanå®¹å™¨ç®¡ç†</h3>
<table>
<thead>
<tr>
<th>podman containerå‘½ä»¤</th>
<th>è¯´æ˜</th>
<th>ä¸¾ä¾‹</th>
<th>é€‰é¡¹</th>
</tr>
</thead>
<tbody>
<tr>
<td>podman ps -a</td>
<td>æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td>docekr ps</td>
<td>æŸ¥çœ‹æ‰€æœ‰çš„æ­£åœ¨è¿è¡Œçš„å®¹å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td>podman container ls</td>
<td>æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨</td>
<td>podman container ls</td>
<td>-a/-q</td>
</tr>
<tr>
<td>podman container create</td>
<td>åˆ›å»ºå®¹å™¨ä½†ä¸è¿è¡Œ</td>
<td>podman container create nginx</td>
<td></td>
</tr>
<tr>
<td>podman container start</td>
<td>å¯åŠ¨å®¹å™¨</td>
<td>podman start nginx</td>
<td></td>
</tr>
<tr>
<td>podman container stop</td>
<td>å…³é—­å®¹å™¨</td>
<td>podman stop nginx</td>
<td></td>
</tr>
<tr>
<td>podman container restart</td>
<td>é‡å¯å®¹å™¨</td>
<td>podman restart nginx</td>
<td></td>
</tr>
<tr>
<td>podman container inspect</td>
<td>æŸ¥çœ‹å®¹å™¨çš„ä¿¡æ¯</td>
<td>podman inspect nginx</td>
<td></td>
</tr>
<tr>
<td>podman container rm</td>
<td>åˆ é™¤å®¹å™¨</td>
<td>podman rm -f nginx</td>
<td>-få¼ºåˆ¶åˆ é™¤</td>
</tr>
<tr>
<td>podman container rename</td>
<td>ç»™å®¹å™¨é‡å‘½å</td>
<td>podman rename nginx nginx2</td>
<td></td>
</tr>
<tr>
<td>podman container prune</td>
<td>åˆ é™¤æ²¡æœ‰è¿è¡Œçš„å®¹å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td>podman container pause</td>
<td>æš‚åœå®¹å™¨è¿è¡Œ(æŒ‚èµ·)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>podman container unpause</td>
<td>ç»§ç»­è¿è¡Œå®¹å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td>podman container port</td>
<td>åˆ—å‡ºç«¯å£æ˜ å°„</td>
<td>podman port nginx2</td>
<td></td>
</tr>
<tr>
<td>podman container logs</td>
<td>è·å–å®¹å™¨æ—¥å¿—ä¿¡æ¯</td>
<td>podman logs nginx2</td>
<td></td>
</tr>
<tr>
<td>podman container kill</td>
<td>æ€æ­»æ­£åœ¨è¿è¡Œçš„å®¹å™¨</td>
<td>podman kill nginx2</td>
<td></td>
</tr>
<tr>
<td>podman container stats</td>
<td>æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ</td>
<td>podman stats nginx2</td>
<td></td>
</tr>
<tr>
<td>podman container top</td>
<td>æŸ¥çœ‹å®¹å™¨çš„è¿›ç¨‹</td>
<td>podman top nginx2</td>
<td></td>
</tr>
<tr>
<td>podman container diff</td>
<td>å¯¹æ¯”å®¹å™¨æ–‡ä»¶å˜åŒ–		podman diff nginx nginx2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>podman container cp</td>
<td>å®¹å™¨ä¸ä¸»æœºé—´æ–‡ä»¶å¤åˆ¶</td>
<td>podman cp a.txt nginx:/home/</td>
<td></td>
</tr>
<tr>
<td>podman container exec</td>
<td>åˆ›å»ºå®¹å™¨</td>
<td>podman exec -itd--name nginx nginx:v1åˆ›å»ºå®¹å™¨å¹¶è¿è¡Œ</td>
<td></td>
</tr>
<tr>
<td>podman container export</td>
<td>å®¹å™¨æ–‡ä»¶å¯¼å‡ºä¸ºtar</td>
<td>podman export nginx.tar nginx</td>
<td></td>
</tr>
<tr>
<td>podman container commit</td>
<td>æäº¤å®¹å™¨å˜åŒ–ä¸ºæ–°é•œåƒ</td>
<td>podman commit nginx</td>
<td></td>
</tr>
<tr>
<td>podman container update</td>
<td>æ›´æ–°å®¹å™¨é…ç½®</td>
<td>podman update --restart=always nginx</td>
<td></td>
</tr>
<tr>
<td>podman container wait</td>
<td>é˜»å¡å®¹å™¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td>podman container run</td>
<td>è¿è¡Œä¸€ä¸ªpodmanå®¹å™¨</td>
<td>podman run -itd --name nginx nginx:v1</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="_3ã€podmanè¿è¡Œå®¹å™¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_3ã€podmanè¿è¡Œå®¹å™¨å‘½ä»¤" aria-hidden="true">#</a> 3ã€podmanè¿è¡Œå®¹å™¨å‘½ä»¤</h3>
<p>podman container runå‘½ä»¤æ˜¯æ ¹æ®æŒ‡å®šé•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨è¿è¡Œã€‚å¦‚æœæœ¬åœ°æ²¡æœ‰è¯¥é•œåƒï¼Œåˆ™ä»podmanä»“åº“ä¸­æ‹‰å»é•œåƒã€‚æ‰€ä»¥<br>
podman container run = podman image pull +  podman container create + podman container start<br>
å‘½ä»¤æ ¼å¼:podman container run [é€‰é¡¹] é•œåƒåç§°|é•œåƒID  [command]<br>
å¸¸ç”¨é€‰é¡¹:</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è§£æ</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td>åå°è¿è¡Œå®¹å™¨ï¼Œè¿”å›å®¹å™¨IDï¼Œè¿è¡Œå®ˆæŠ¤è¿›ç¨‹å¼å®¹å™¨</td>
</tr>
<tr>
<td>-i</td>
<td>ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</td>
</tr>
<tr>
<td>-t</td>
<td>ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›</td>
</tr>
<tr>
<td>-P</td>
<td>éšæœºæ˜ å°„ç«¯å£ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„ä¸ºä¸»æœºç«¯å£</td>
</tr>
<tr>
<td>-p</td>
<td>æŒ‡å®šç«¯å£æ˜ å°„ï¼Œ -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</td>
</tr>
<tr>
<td>- -expose</td>
<td>æŒ‡å®šæš´éœ²ç«¯å£æˆ–ç«¯å£èŒƒå›´</td>
</tr>
<tr>
<td>- -name</td>
<td>æŒ‡å®šç”Ÿæˆå®¹å™¨çš„åç§°</td>
</tr>
<tr>
<td>-h</td>
<td>æŒ‡å®šå®¹å™¨çš„ä¸»æœºåç§°</td>
</tr>
<tr>
<td>-v</td>
<td>æ˜ å°„å®¹å™¨å¤–ä¸å®¹å™¨å†…çš„ç›®å½•</td>
</tr>
<tr>
<td>- -net</td>
<td>æŒ‡å®špodmanç½‘ç»œæ¨¡å¼(bridge/host/none/container)</td>
</tr>
<tr>
<td>- -restart</td>
<td>æŒ‡å®šæ˜¯å¦å¼€æœºè‡ªå¯</td>
</tr>
<tr>
<td>- -privileged</td>
<td>ä½¿ç”¨è¯¥å‚æ•°ï¼Œcontainerå†…çš„rootæ‹¥æœ‰çœŸæ­£çš„rootæƒé™ã€‚</td>
</tr>
<tr>
<td>- -dns</td>
<td>æŒ‡å®šDNSæœåŠ¡å™¨åœ°å€ï¼Œé»˜è®¤ä¸ä¸»æœºä¸€è‡´</td>
</tr>
<tr>
<td>-e</td>
<td>è®¾ç½®ç¯å¢ƒå˜é‡</td>
</tr>
<tr>
<td>- -env-file</td>
<td>ä»æŒ‡å®šæ–‡ä»¶è¯»å–ç¯å¢ƒå˜é‡</td>
</tr>
</tbody>
</table>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token number">1</span>.è¿è¡Œäº¤äº’å¼å®¹å™¨ 
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman container run -it --name='centos-1' centos:7 /bin/bash</span>
<span class="token punctuation">[</span>root@3ad7e1a5e55f /<span class="token punctuation">]</span><span class="token comment">#</span>
ç›´æ¥é€€å‡ºï¼Œè¿è¡Œexitï¼Œå®¹å™¨ä¼šç»“æŸè¿è¡Œ
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman container ls -a</span>
CONTAINER ID   IMAGE      COMMAND       CREATED          STATUS                     PORTS     NAMES
3ad7e1a5e55f   centos:7   <span class="token string">"/bin/bash"</span>   <span class="token number">39</span> seconds ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">6</span> seconds ago             centos-1
å¯ä»¥ä½¿ç”¨podman container startå‘½ä»¤å¯åŠ¨å®¹å™¨
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman container start centos-1 </span>
centos-1
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman container ls -a</span>
CONTAINER ID   IMAGE      COMMAND       CREATED              STATUS         PORTS     NAMES
3ad7e1a5e55f   centos:7   <span class="token string">"/bin/bash"</span>   About a minute ago   Up <span class="token number">2</span> seconds             centos-1
è¿è¡Œå®¹å™¨ï¼Œä¸ç»“æŸå®¹å™¨é€€å‡º
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman container run -it --name='centos-2' centos:7 /bin/bash</span>
<span class="token punctuation">[</span>root@764b82cb892f /<span class="token punctuation">]</span><span class="token comment">#ï¼ˆctrl+pqï¼‰</span>

<span class="token number">2</span>.å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹å¼å®¹å™¨
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman container run -d nginx:latest </span>
cef133be2d53c0d4921ceba34855e7dc250984191d10d3dfedf82195e9d85d3c
<span class="token punctuation">[</span>root@podman ~<span class="token punctuation">]</span><span class="token comment"># podman ps -a</span>
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS     NAMES
cef133be2d53   nginx:latest   <span class="token string">"/podman-entrypoint.â€¦"</span>   <span class="token number">6</span> seconds ago   Up <span class="token number">5</span> seconds   <span class="token number">80</span>/tcp    relaxed_lichterman
764b82cb892f   centos:7       <span class="token string">"/bin/bash"</span>              <span class="token number">3</span> minutes ago   Up <span class="token number">3</span> minutes             centos-2
3ad7e1a5e55f   centos:7       <span class="token string">"/bin/bash"</span>              <span class="token number">5</span> minutes ago   Up <span class="token number">4</span> minutes             centos-1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å››ã€é™„åŠ -ä¿®æ”¹podman-å­˜å‚¨è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#å››ã€é™„åŠ -ä¿®æ”¹podman-å­˜å‚¨è·¯å¾„" aria-hidden="true">#</a> å››ã€é™„åŠ ï¼šä¿®æ”¹podman å­˜å‚¨è·¯å¾„</h2>
<p>podmanå’Œdockerä¸€æ ·ï¼Œé»˜è®¤éƒ½æ˜¯å­˜åœ¨ä¸<code v-pre>/var/lib/</code>ä¸‹çš„ï¼Œä¸€èˆ¬é•œåƒå’Œå®¹å™¨éƒ½å¾ˆå¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ ¹ç£ç›˜ç©ºé—´å ç”¨è¿‡å¤§ï¼Œå¦‚æœ<code v-pre>/</code>æ ¹ç›®å½•ä¸‹ç©ºé—´æ»¡äº†ï¼Œæˆ‘ä»¬å°±è¦è€ƒè™‘ç»™å®¹å™¨å’Œé•œåƒæ¢ä½ç½®ï¼›ä¸€èˆ¬æ¥è¯´<code v-pre>/</code>æ ¹ç›®å½•èµ·åˆä¸ä¼šè®¾ç½®çš„å¾ˆå¤§ï¼Œåç»­éƒ½ä¼šå†åŠ ç¡¬ç›˜æ¥æ‰©å®¹ç©ºé—´ï¼Œæ‰€ä»¥è¿™æ—¶å€™æˆ‘ä»¬æŒ‚äº†ä¸€ä¸ªç£ç›˜ï¼Œè¦æŠŠpodmanæ•°æ®å­˜å‚¨åˆ°æ¯”å¦‚<code v-pre>/data/podman</code>ä¸‹ï¼Œé‚£ä¹ˆå°±å¦‚ä¸‹æ“ä½œå°±å¯ä»¥äº†ï¼›</p>
<h3 id="_1ã€podman-ä¸­æ²¡æœ‰æ•°æ®ä¿®æ”¹å­˜å‚¨è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_1ã€podman-ä¸­æ²¡æœ‰æ•°æ®ä¿®æ”¹å­˜å‚¨è·¯å¾„" aria-hidden="true">#</a> 1ã€podman ä¸­æ²¡æœ‰æ•°æ®ä¿®æ”¹å­˜å‚¨è·¯å¾„</h3>
<ul>
<li>æ‰“å¼€ Podman é…ç½®æ–‡ä»¶</li>
</ul>
<p>æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ª</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/containers/storage.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul>
<li>ç¼–è¾‘å­˜å‚¨é…ç½®ï¼š</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>storage<span class="token punctuation">]</span>
driver <span class="token operator">=</span> <span class="token string">"overlay"</span>
runroot <span class="token operator">=</span> <span class="token string">"/data/podman/containers/run"</span>
graphroot <span class="token operator">=</span> <span class="token string">"/data/podman/containers/storage"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>é‡æ–°åŠ è½½å¹¶å¯åŠ¨podmanæœåŠ¡</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">podman</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>podman info æŸ¥çœ‹dockeré…ç½®è·¯å¾„</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">podman</span> info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447436.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>è¿™æ ·å°±ä¿®æ”¹æˆåŠŸäº†ï¼Œå¦‚æœä¸æ”¾å¿ƒå¯ä»¥<code v-pre>ls /data/podman/containers/storage/</code>çœ‹çœ‹ï¼›</p>
<ul>
<li>æŸ¥çœ‹ podman æœåŠ¡è¿è¡ŒçŠ¶æ€</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>systemctl status <span class="token function">podman</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447396.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>è¿è¡ŒçŠ¶æ€ï¼Œé‚£ä¹ˆå°±æ²¡é—®é¢˜äº†ï¼Œæ¥ä¸‹æ¥å¯ä»¥è¯•è¯•<code v-pre>æ‹‰å–é•œåƒ</code>æˆ–è€…<code v-pre>å¯¼å…¥é•œåƒ</code>ï¼›</p>
<h3 id="_2ã€podman-ä¸­æœ‰æ•°æ®è¿ç§»ä¿®æ”¹å­˜å‚¨è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_2ã€podman-ä¸­æœ‰æ•°æ®è¿ç§»ä¿®æ”¹å­˜å‚¨è·¯å¾„" aria-hidden="true">#</a> 2ã€podman ä¸­æœ‰æ•°æ®è¿ç§»ä¿®æ”¹å­˜å‚¨è·¯å¾„</h3>
<blockquote>
<font color=blue>æ³¨æ„ï¼šå¦‚æœpodmanä¸­å·²ç»å­˜åœ¨äº†æ•°æ®ï¼Œé‚£ä¹ˆå°±éœ€è¦å§`/var/lib/containers`ä¸‹çš„å’Œpodmanç›¸å…³çš„éƒ½æŒªåˆ°æ–°çš„å­˜å‚¨ç›®å½•ä¸‹ç„¶ååœ¨ä¿®æ”¹`boltdb`æ•°æ®åº“é‡Œé…ç½®å¹¶é‡å¯æ•°æ®åº“å’ŒpodmanæœåŠ¡æ–¹å¯ç”Ÿæ•ˆï¼›</font><font color=red>åˆ‡è®°ï¼šå…ˆç§»åŠ¨æˆ–å¤åˆ¶ --ã€‹ åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ --ã€‹ åœ¨ä¿®æ”¹`boltdb`æ•°æ®åº“ --ã€‹ åœ¨é‡å¯æœåŠ¡ã€‚</font></blockquote>
<p>podmanåœ¨æ•°æ®åº“ä¸­å¯èƒ½ä¼šå­˜å‚¨æœ‰è¿è¡Œé…ç½®ï¼Œé»˜è®¤æ˜¯åœ¨<code v-pre>/var/lib/containers/storage/libpod/bolt_state.db</code>ä¸­çš„ï¼Œæ‰€ä»¥å¦‚æœè¯¥æ•°æ®åº“ä¸­å­˜å‚¨äº†è¿è¡Œé…ç½®ï¼Œåˆ™åªä¿®æ”¹äº†<code v-pre>/etc/containers/storage.conf</code>ä¸­çš„é…ç½®æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œpodmanä¼šä¼˜å…ˆä½¿ç”¨æ•°æ®åº“ä¸­å­˜å‚¨çš„é…ç½®ï¼Œè¿™ç‚¹å¾ˆå‘ã€‚æˆ‘ä»¬åœ¨ä¿®æ”¹äº†<code v-pre>/etc/containers/storage.conf</code>ä¸­çš„é…ç½®åï¼Œå°†åœ¨/var/lib/containers/å¤åˆ¶åˆ°ä¿®æ”¹çš„è·¯å¾„ä¸‹ï¼Œé‡å¯ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤æ¥æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># åˆ›å»ºä¸€ä¸ªstorage.confæ–‡ä»¶</span>
<span class="token function">sudo</span> <span class="token function">vim</span> /etc/containers/storage.conf

<span class="token comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span>
<span class="token punctuation">[</span>storage<span class="token punctuation">]</span>
driver <span class="token operator">=</span> <span class="token string">"overlay"</span>
runroot <span class="token operator">=</span> <span class="token string">"/data/podman/containers/run"</span>
graphroot <span class="token operator">=</span> <span class="token string">"/data/podman/containers/storage"</span>

<span class="token comment"># é‡å¯podmanæœåŠ¡</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">podman</span>

<span class="token comment"># æŸ¥çœ‹podmanæœåŠ¡çŠ¶æ€</span>
systemctl status <span class="token function">podman</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447403.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>æ²¡æœ‰å¯åŠ¨èµ·æ¥ï¼ŒæŠ¥é”™äº†ï¼›</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹podmanæŠ¥é”™è¯¦ç»†ä¿¡æ¯</span>
<span class="token function">sudo</span> <span class="token function">podman</span> info --log-level<span class="token operator">=</span>debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447016.png" alt="" loading="lazy"><br>
æ‰€ä»¥å¦‚æœboltæ•°æ®åº“å­˜å‚¨äº†ç›¸å…³é…ç½®ï¼Œé‚£ä¹ˆæ— è®ºæ€ä¹ˆä¿®æ”¹<code v-pre>/etc/containers/storage.conf</code>ä¸­çš„é…ç½®éƒ½ä¼šè¢«é‡è½½è€Œä¸èµ·ä½œç”¨ã€‚<br>
<code v-pre>bolt_state.db</code>åˆæ˜¯ä¸€ç§å°ä¼—çš„æ•°æ®åº“ï¼Œæ ¼å¼ä¸ºboltï¼Œç›®å‰BoltDBä¸æ”¯æŒç›´æ¥ä¿®æ”¹å’ŒæŸ¥çœ‹æ•°æ®åº“å†…å®¹ï¼Œéœ€è¦ä½¿ç”¨ä¸“é—¨çš„boltæ•°æ®åº“å·¥å…·æ‰èƒ½æŸ¥çœ‹å’Œä¿®æ”¹ã€‚<br>
<a href="https://github.com/etcd-io/bbolt" target="_blank" rel="noopener noreferrer">https://github.com/etcd-io/bbolt<ExternalLinkIcon/></a> é¡µé¢ç½—åˆ—äº†ä¸å°‘boltå·¥å…·ï¼Œç¬”è€…é€‰ç”¨äº†boltdbwebè¿™æ¬¾Goå†™çš„Webå·¥å…·æ¥æŸ¥çœ‹å’Œä¿®æ”¹ã€‚</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447070.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>æ‰“å¼€<code v-pre>runtime-config</code>å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰<code v-pre>graph-root</code>å°±æ˜¯podmançš„å­˜å‚¨è·¯å¾„ï¼›</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412161447121.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>è¿™é‡Œå¯ä»¥ä¿®æ”¹<code v-pre>graph root</code>ã€<code v-pre>static dir</code>å’Œ<code v-pre>volume path</code>é…ç½®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ é™¤æ‰ï¼Œè®©podmanç›´æ¥ä½¿ç”¨<code v-pre>/etc/containers/storage.conf</code>ä¸­çš„é…ç½®ã€‚</p>
<p><strong>æ³¨æ„ï¼Œ<code v-pre>bolt_state.db</code>æ–‡ä»¶éå¸¸é‡è¦ï¼Œå¦‚æœä¹‹å‰å·²ç»æœ‰å¾ˆå¤šå®¹å™¨ï¼Œåˆ™é‡Œé¢å­˜å‚¨äº†å¾ˆå¤šéå¸¸é‡è¦çš„ä¿¡æ¯ï¼Œå¦‚æœä¸¢å¤±ï¼Œåˆ™ä¹‹å‰çš„å®¹å™¨å°±åºŸäº†ï¼Œæ‰€ä»¥åœ¨æ“ä½œå‰ä¸€å®šè¦å¤‡ä»½ã€‚</strong></p>
<hr>
<p>ä¿®æ”¹æ•°æ®åº“è¿™è¾¹æˆ‘æ²¡æœ‰å¼„ï¼Œå‚è€ƒçš„ï¼š	 <a href="https://blog.csdn.net/witton/article/details/128497746" target="_blank" rel="noopener noreferrer">æ”¹å˜podmançš„å­˜å‚¨è·¯å¾„ - witton<ExternalLinkIcon/></a>ï¼Œæ€»ä¹‹ï¼Œå¦‚æœæ•°æ®å¤šçš„è¯å…ˆå¤‡ä»½ï¼Œè€Œä¸”å¹¶ä¸å»ºè®®æ›´æ¢ã€‚</p>
<hr>
<h2 id="äº”ã€å‚è€ƒæ–‡ç« " tabindex="-1"><a class="header-anchor" href="#äº”ã€å‚è€ƒæ–‡ç« " aria-hidden="true">#</a> äº”ã€å‚è€ƒæ–‡ç« </h2>
<table>
<thead>
<tr>
<th>æ–‡ä»¶å</th>
<th>æ–‡ä»¶è¿æ¥</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://blog.csdn.net/witton/article/details/128497746" target="_blank" rel="noopener noreferrer">æ”¹å˜podmançš„å­˜å‚¨è·¯å¾„ - witton<ExternalLinkIcon/></a></td>
<td><a href="https://blog.csdn.net/witton/article/details/128497746" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/witton/article/details/128497746<ExternalLinkIcon/></a></td>
</tr>
</tbody>
</table>
</div></template>


