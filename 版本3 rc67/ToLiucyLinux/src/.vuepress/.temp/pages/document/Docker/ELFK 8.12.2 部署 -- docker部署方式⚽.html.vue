<template><div><blockquote>
<p>ğŸ‘¨â€ğŸ“<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">CSDNåšå®¢ä¸“å®¶</a><br>
â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…</a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»</a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»</a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº</a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼<br>
ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„<br>
ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—</p>
</blockquote>
<hr>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554918.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h2 id="ä¸€ã€elfkçš„éƒ¨ç½²-dockeréƒ¨ç½²æ–¹å¼âš½" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€elfkçš„éƒ¨ç½²-dockeréƒ¨ç½²æ–¹å¼âš½"><span>ä¸€ã€ELFKçš„éƒ¨ç½² -- dockeréƒ¨ç½²æ–¹å¼âš½</span></a></h2>
<h3 id="_1-å‰ç½®å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-å‰ç½®å‡†å¤‡"><span>1.  å‰ç½®å‡†å¤‡</span></a></h3>
<h4 id="_1-1-æœåŠ¡å™¨ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_1-1-æœåŠ¡å™¨ä¿¡æ¯"><span>1.1 æœåŠ¡å™¨ä¿¡æ¯</span></a></h4>
<table>
<thead>
<tr>
<th style="text-align:center">IP</th>
<th style="text-align:left">æ“ä½œç³»ç»Ÿ</th>
<th style="text-align:left">ç³»ç»Ÿé…ç½®</th>
<th>ç¯å¢ƒ</th>
<th style="text-align:left">æœåŠ¡</th>
<th style="text-align:left">ç«¯å£</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">172.16.11.213</td>
<td style="text-align:left">CentOS Linux 7 (Core)<br>X86æ¶æ„</td>
<td style="text-align:left">CPUï¼š4æ ¸8çº¿ç¨‹<br>å†…å­˜ï¼š16G<br>ç¡¬ç›˜ï¼š100G</td>
<td>docker<br>docker-compose<br></td>
<td style="text-align:left">Elasticsearch<br>Logstash<br/>Kibana<br/>Filebeat<br/>nginx</td>
<td style="text-align:left">9200 / 9300<br>5044<br>5601<br><br>80</td>
</tr>
</tbody>
</table>
<p><strong>è¦ç”¨åˆ°çš„æœåŠ¡åŒ…ä¿¡æ¯ï¼š</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center">è½¯ä»¶å®‰è£…åŒ…åç§°</th>
<th style="text-align:center">è½¯ä»¶ç‰ˆæœ¬</th>
<th style="text-align:center">åŠŸèƒ½</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">docker</td>
<td style="text-align:center">24.0.5</td>
<td style="text-align:center">å®¹å™¨ï¼šæä¾›å•ç‹¬elfkç¯å¢ƒ</td>
</tr>
<tr>
<td style="text-align:center">docker-compose</td>
<td style="text-align:center">1.29.2</td>
<td style="text-align:center">å®¹å™¨ç¼–æ’å·¥å…·ï¼šç”¨äºåŒæ­¥ç®¡ç†elfk</td>
</tr>
<tr>
<td style="text-align:center">elasticsearch</td>
<td style="text-align:center">8.12.2</td>
<td style="text-align:center">æ—¥å¿—å­˜å‚¨</td>
</tr>
<tr>
<td style="text-align:center">kibana</td>
<td style="text-align:center">8.12.2</td>
<td style="text-align:center">æ—¥å¿—æ•°æ®å›¾å½¢åŒ–å±•ç¤º</td>
</tr>
<tr>
<td style="text-align:center">logstash</td>
<td style="text-align:center">8.12.2</td>
<td style="text-align:center">æ—¥å¿—å¤„ç†</td>
</tr>
<tr>
<td style="text-align:center">filebeat</td>
<td style="text-align:center">8.12.2</td>
<td style="text-align:center">æ—¥å¿—é‡‡é›†</td>
</tr>
<tr>
<td style="text-align:center">nginx</td>
<td style="text-align:center">1.24.0</td>
<td style="text-align:center">nginxæœåŠ¡</td>
</tr>
</tbody>
</table>
<p><strong>ELFK å…³ç³»å›¾ï¼š</strong></p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554242.png" alt="ELFKåŸºç¡€æ¶æ„å›¾" tabindex="0" loading="lazy"><figcaption>ELFKåŸºç¡€æ¶æ„å›¾</figcaption></figure>
<h4 id="_1-2-å…³é—­é˜²ç«å¢™åŠselinuxæ²™ç›’" tabindex="-1"><a class="header-anchor" href="#_1-2-å…³é—­é˜²ç«å¢™åŠselinuxæ²™ç›’"><span>1.2 å…³é—­é˜²ç«å¢™åŠselinuxæ²™ç›’</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å…ˆæŸ¥çœ‹é˜²ç«å¢™æ˜¯å¦å¼€å¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> firewalld</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¦‚æœæ˜¯å¼€å¯çš„é‚£å°±å…³é—­å¹¶è®¾ç½®å¼€æœºä¸è‡ªå¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> firewalld</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> disable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> firewalld</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è®¾ç½®selinuxä¸ºDisabled</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/selinux/config</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è®¾ç½® SELINUX=disabled</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554917.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<hr>
<p>å¦‚æœé˜²ç«å¢™å¼€å¯çš„è¯ï¼Œéœ€è¦æ‰“å¼€çš„ç«¯å£æœ‰ï¼šï¼ˆç«¯å£å¯è‡ªè¡Œå®šä¹‰ï¼‰</p>
<ul>
<li>Elasticsearchï¼š<code v-pre>9200</code>ã€<code v-pre>9300</code></li>
<li>Kibanaï¼š<code v-pre>5601</code></li>
<li>Logstashï¼š<code v-pre>5044</code></li>
<li>nginxï¼š<code v-pre>80</code></li>
<li><strong>filebeat</strong> æœ¬èº«ä¸ç›‘å¬ä»»ä½•ç«¯å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ—¥å¿—æ–‡ä»¶æ”¶é›†å™¨ï¼Œç”¨äºå°†æ—¥å¿—å‘é€åˆ°Logstashæˆ–Elasticsearchã€‚</li>
</ul>
<blockquote>
<p><strong>æ³¨ï¼š</strong></p>
<p><strong>9200 æœ¬åœ°elasticsearchæœåŠ¡æœ¬åœ°çš„ç«¯å£<br>
9300 æ˜¯elasticsearché›†ç¾¤çš„é€šä¿¡ç«¯å£</strong></p>
</blockquote>
<h4 id="_1-3-å°†elfké•œåƒåŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š-ä¹Ÿå¯ä»¥ç­‰åœ¨æ‰§è¡Œdocker-composeæ—¶è‡ªåŠ¨æ‹‰å–" tabindex="-1"><a class="header-anchor" href="#_1-3-å°†elfké•œåƒåŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š-ä¹Ÿå¯ä»¥ç­‰åœ¨æ‰§è¡Œdocker-composeæ—¶è‡ªåŠ¨æ‹‰å–"><span>1.3 å°†ELFKé•œåƒåŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼ˆä¹Ÿå¯ä»¥ç­‰åœ¨æ‰§è¡Œdocker-composeæ—¶è‡ªåŠ¨æ‹‰å–ï¼‰</span></a></h4>
<p>åœ¨å¯åŠ¨æœåŠ¡çš„æ—¶å€™é»˜è®¤æ˜¯å¯ä»¥æ‹‰å–ELFKé•œåƒçš„ï¼Œä¸è¿‡æœ€è¿‘dockerhubå¥½åƒå›½å†…ç”¨ä¸äº†äº†ï¼Œæ‹‰ä¸äº†é•œåƒï¼›</p>
<p>è€Œä¸”æ‹‰é•œåƒä¹Ÿæ…¢ï¼Œ<font coolor=red>è¿˜éœ€è¦é…ç½®dockeré•œåƒåŠ é€Ÿ</font>ï¼Œæ‰€ä»¥ï¼Œç¦»çº¿é•œåƒè¿˜æ˜¯æ¯”è¾ƒå¥½çš„ï¼Œå¯ä»¥æå‰ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼›</p>
<ul>
<li>
<p>E: elasticsearch æ•°æ®å­˜å‚¨ã€æ•°æ®æœç´¢ï¼›</p>
<p><s>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://www.elastic.co/cn/downloads/elasticsearch/" target="_blank" rel="noopener noreferrer">https://www.elastic.co/cn/downloads/elasticsearch/</a></s></p>
</li>
<li>
<p>L: logstash æ•°æ®é‡‡é›†ã€æ•°æ®æ¸…æ´—ã€æ•°æ®è¿‡æ»¤ï¼›</p>
<p><s>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://www.elastic.co/cn/downloads/logstash" target="_blank" rel="noopener noreferrer">https://www.elastic.co/cn/downloads/logstash</a></s></p>
</li>
<li>
<p>K: kibana æ•°æ®åˆ†æã€æ•°æ®å±•ç¤ºï¼›</p>
<p><s>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://www.elastic.co/cn/downloads/kibana/" target="_blank" rel="noopener noreferrer">https://www.elastic.co/cn/downloads/kibana/</a></s></p>
</li>
<li>
<p>Fï¼šfilebeat æ”¶é›†æ—¥å¿—æ•°æ®ï¼›</p>
<p><s>å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="https://www.elastic.co/guide/en/beats/filebeat/index.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/beats/filebeat/index.html</a></s></p>
</li>
</ul>
<p>é•œåƒä¸‹è½½åœ°å€ï¼š</p>
<blockquote>
<p>æˆ‘è¿™è¾¹ç›®å‰åªæœ‰ï¼š8.12.2ã€7.1.0ç‰ˆæœ¬ï¼›CSDNä¸‹è½½åœ°å€ï¼›</p>
<p>å…¶ä»–ç‰ˆæœ¬å¯ä»¥ç™¾åº¦çœ‹çœ‹ï¼š</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">åŒ…å</th>
<th style="text-align:center">åœ°å€</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427498" target="_blank" rel="noopener noreferrer">ELFK dockeré•œåƒ-7.1.0ç‰ˆæœ¬ï¼ˆelasticsearchã€filebeatï¼‰</a></td>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427498" target="_blank" rel="noopener noreferrer">https://download.csdn.net/download/liu_chen_yang/89427498</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427504" target="_blank" rel="noopener noreferrer">ELFK dockeré•œåƒ-7.1.0ç‰ˆæœ¬ï¼ˆkibanaã€logstashï¼‰</a></td>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427504" target="_blank" rel="noopener noreferrer">https://download.csdn.net/download/liu_chen_yang/89427504</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427462" target="_blank" rel="noopener noreferrer">ELFK dockeré•œåƒ-8.12.2ç‰ˆæœ¬ï¼ˆelasticsearchã€filebeatï¼‰</a></td>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427462" target="_blank" rel="noopener noreferrer">https://download.csdn.net/download/liu_chen_yang/89427462</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427463" target="_blank" rel="noopener noreferrer">ELFK dockeré•œåƒ-8.12.2ç‰ˆæœ¬ï¼ˆkibanaã€logsatshï¼‰</a></td>
<td style="text-align:center"><a href="https://download.csdn.net/download/liu_chen_yang/89427463" target="_blank" rel="noopener noreferrer">https://download.csdn.net/download/liu_chen_yang/89427463</a></td>
</tr>
</tbody>
</table>
<blockquote>
<font color=red>æ³¨ï¼š ELFKçš„å››ä¸ªé•œåƒåŒ…çš„ä¿æŒç‰ˆæœ¬éœ€ä¸€è‡´ã€‚</font></blockquote>
<h4 id="_1-4-æ ¡æ­£æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#_1-4-æ ¡æ­£æ—¶é—´"><span>1.4 æ ¡æ­£æ—¶é—´</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ä¸‹è½½ntpdateå‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ntpdate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æ—¶é—´æ ¡æ­£</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ntpdate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cn.pool.ntp.org</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-5-æœ¬æ–‡æ³¨æ„äº‹é¡¹" tabindex="-1"><a class="header-anchor" href="#_1-5-æœ¬æ–‡æ³¨æ„äº‹é¡¹"><span>1.5 æœ¬æ–‡æ³¨æ„äº‹é¡¹</span></a></h4>
<blockquote>
<font color=red size=4x>**æ³¨æ„ï¼šæœ¬æ–‡å‡ºç°çš„ IP å’Œ å®¹å™¨å¤–çš„è·¯å¾„ è¯·æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè‡ªå®šä¹‰**</font><br><br><font color=red size=4x>**æ³¨æ„ï¼šæœ¬æ–‡å‡ºç°çš„ IP å’Œ å®¹å™¨å¤–çš„è·¯å¾„ è¯·æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè‡ªå®šä¹‰**</font><br><br><font color=red size=4x>**æ³¨æ„ï¼šæœ¬æ–‡å‡ºç°çš„ IP å’Œ å®¹å™¨å¤–çš„è·¯å¾„ è¯·æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè‡ªå®šä¹‰**</font></blockquote>
<h3 id="_2-éƒ¨ç½²docker" tabindex="-1"><a class="header-anchor" href="#_2-éƒ¨ç½²docker"><span>2. éƒ¨ç½²docker</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> æ–¹æ³•ä¸€ï¼š</label></li>
</ul>
<p>å‚è€ƒéƒ¨ç½²æ–‡æ¡£ï¼š<a href="https://blog.csdn.net/liu_chen_yang/article/details/123842609" target="_blank" rel="noopener noreferrer">linuxï¼ˆcentosï¼‰ä¸­éƒ¨ç½²dockerï¼ˆæ­¥éª¤è¶…å…¨ï¼Œå«å¸¦ä¸€äº›å‘å±•å²å’Œä¸€äº›æ¦‚å¿µï¼‰</a></p>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> æ–¹æ³•äºŒï¼š</label></li>
</ul>
<p>å¯ä»¥é€‰æ‹©ç¦»çº¿ä¸€é”®å®‰è£…ï¼š<a href="https://download.csdn.net/download/liu_chen_yang/88647183" target="_blank" rel="noopener noreferrer">docker24.0.5ç¦»çº¿å®‰è£…åŒ… ï¼ˆä¸€é”®éƒ¨ç½²ï¼‰</a></p>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> æ–¹æ³•ä¸‰ï¼š</label></li>
</ul>
<p>æŒ‰ç…§ä»¥ä¸‹æ–¹å¼å®‰è£…</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å®‰è£…utilså·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> yum-utils</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å®‰è£…dockeræ‰©å±•æºå·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum-config-manager</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --add-repo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å®‰è£…dockeræœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker-ce</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker-ce-cli</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> containerd.io</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è®¾ç½®dockerå¼€æœºè‡ªå¯å¹¶å¯åŠ¨æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> enable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-éƒ¨ç½²docker-compose" tabindex="-1"><a class="header-anchor" href="#_3-éƒ¨ç½²docker-compose"><span>3. éƒ¨ç½²docker-compose</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> æ–¹æ³•ä¸€ï¼š</label></li>
</ul>
<p>å‚è€ƒéƒ¨ç½²æ–‡æ¡£éƒ¨ç½²ï¼š<a href="https://blog.csdn.net/liu_chen_yang/article/details/124688952" target="_blank" rel="noopener noreferrer">Linuxä¸­å®‰è£…/éƒ¨ç½²docker-compose</a></p>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-4"> æ–¹æ³•äºŒï¼š</label></li>
</ul>
<p>å¯ä»¥é€‰æ‹©ç¦»çº¿å®‰è£…ï¼š<a href="https://download.csdn.net/download/liu_chen_yang/89428645" target="_blank" rel="noopener noreferrer">docker-compose1.29.2ç¦»çº¿åŒ…</a></p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554716.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h3 id="_4-éƒ¨ç½²elfk" tabindex="-1"><a class="header-anchor" href="#_4-éƒ¨ç½²elfk"><span>4. éƒ¨ç½²ELFK</span></a></h3>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<blockquote>
<p><strong><font color=red size=4x>æ³¨æ„ï¼šæœ¬æ–‡å‡ºç°çš„ IP å’Œ å®¹å™¨å¤–çš„è·¯å¾„ è¯·æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè‡ªå®šä¹‰</font></strong><br><br><font color=red size=4x><strong>æ³¨æ„ï¼šæœ¬æ–‡å‡ºç°çš„ IP å’Œ å®¹å™¨å¤–çš„è·¯å¾„ è¯·æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè‡ªå®šä¹‰</strong></font><br><br><font color=red size=4x><strong>æ³¨æ„ï¼šæœ¬æ–‡å‡ºç°çš„ IP å’Œ å®¹å™¨å¤–çš„è·¯å¾„ è¯·æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè‡ªå®šä¹‰</strong></font></p>
</blockquote>
<h4 id="_4-1-åˆ›å»ºelfkçš„é¡¹ç›®è·¯å¾„" tabindex="-1"><a class="header-anchor" href="#_4-1-åˆ›å»ºelfkçš„é¡¹ç›®è·¯å¾„"><span>4.1 åˆ›å»ºELFKçš„é¡¹ç›®è·¯å¾„</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h4 id="_4-2-åˆ›å»ºesç›®å½•åŠé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-2-åˆ›å»ºesç›®å½•åŠé…ç½®æ–‡ä»¶"><span>4.2 åˆ›å»ºESç›®å½•åŠé…ç½®æ–‡ä»¶</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºESç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/elasticsearch/{plugins,config,data,logs}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥esçš„configç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/elasticsearch/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºesé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> es.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç»™æ‰€æœ‰ESç›®å½•è¯»å†™æ‰§è¡Œæƒé™</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 775</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -R</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/elasticsearch/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¼–è¾‘esé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> es.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># é›†ç¾¤åç§°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">cluster.name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">mycluster</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># èŠ‚ç‚¹åç§°</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">node.name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">mynode</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç½‘ç»œç»‘å®šåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">network.host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">0.0.0.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># é»˜è®¤ç«¯å£ï¼š9200 æœ¬åœ°elasticsearchæœåŠ¡æœ¬åœ°çš„ç«¯å£ã€9300 æ˜¯elasticsearché›†ç¾¤çš„é€šä¿¡ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">http.port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">9200</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">transport.port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">9300</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¼€å¯å•èŠ‚ç‚¹æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">node.roles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">master</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ingest</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">ml</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å†…å­˜é™åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#bootstrap.memory_lock: true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#ES_JAVA_OPTS: "-Xms512m -Xmx512m"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å…³é—­é›†ç¾¤å‘ç°åŠŸèƒ½ï¼ˆå•èŠ‚ç‚¹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">discovery.type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">single-node</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># --------------------------- sslå®‰å…¨è®¤è¯é…ç½® ----------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å…³é—­ X-Pack å®‰å…¨æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">xpack.security.enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¦ç”¨åˆå§‹åŒ–ç”Ÿæˆå¯†ç åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">xpack.security.enrollment.enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¦ç”¨å®¢æˆ·ç«¯ä¹‹é—´è¿æ¥åŠ å¯†ï¼Œå¦‚æœå¯ç”¨ï¼Œå®¢æˆ·ç«¯ï¼ˆå¦‚ Kibanaã€Logstashã€filebeatï¼‰å°±éœ€è¦é€šè¿‡åŠ å¯†æ–¹å¼è®¿é—®</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">xpack.security.http.ssl.enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŒ‡å®šsslè¯ä¹¦åœ°å€ï¼ˆå¼€å¯å®‰å…¨æ¨¡å¼å°±éœ€è¦å¼€å¯è¿™ä¸ªï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#xpack.security.http.ssl.keystore.path: certs/http.p12</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¦ç”¨ Elasticsearch èŠ‚ç‚¹é—´ä¼ è¾“å±‚é€šä¿¡çš„åŠ å¯†ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">xpack.security.transport.ssl.enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">false</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¯ä¹¦çš„éªŒè¯æ¨¡å¼ï¼Œcertificate ä¸ºåŒå‘ SSL/TLS è®¤è¯ï¼ˆå³èŠ‚ç‚¹é—´ç›¸äº’éªŒè¯è¯ä¹¦ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#xpack.security.transport.ssl.verification_mode: certificate</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¦‚æœå¯ç”¨äº†sslè®¤è¯ï¼Œä¸‹é¢ä¸¤ä¸ªå°±æ˜¯é…ç½®è¯ä¹¦å’Œç§é’¥çš„æ–‡ä»¶è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#xpack.security.transport.ssl.keystore.path: certs/transport.p12</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#xpack.security.transport.ssl.truststore.path: certs/transport.p12</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ----------------------- END SECURITY AUTO CONFIGURATION -------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æ³¨æ„ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®å¯ç”¨ SSL/TLS åŠ å¯†æ¥ä¿æŠ¤æ•°æ®ä¼ è¾“çš„å®‰å…¨æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å…¬å…±æˆ–ä¸å®‰å…¨çš„ç½‘ç»œä¸­ã€‚å¦‚æœä½ é€‰æ‹©å¯ç”¨ SSL/TLSï¼Œéœ€è¦ç¡®ä¿ä½ æœ‰æœ‰æ•ˆçš„è¯ä¹¦å’Œå¯†é’¥åº“ï¼Œå¹¶æ­£ç¡®é…ç½®äº†å¯†é’¥åº“å’Œä¿¡ä»»åº“çš„è·¯å¾„ã€‚åœ¨å¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒä¸­ï¼Œå¯èƒ½ä¼šä¸ºäº†æ–¹ä¾¿è€Œç¦ç”¨è¿™äº›å®‰å…¨ç‰¹æ€§ï¼Œä½†è¦æ„è¯†åˆ°è¿™å¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ã€‚</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-3-åˆ›å»ºlogstashç›®å½•åŠé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-3-åˆ›å»ºlogstashç›®å½•åŠé…ç½®æ–‡ä»¶"><span>4.3 åˆ›å»ºLogstashç›®å½•åŠé…ç½®æ–‡ä»¶</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºlogstashç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/logstash/{conf.d,config,data,logs}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥logstashçš„configç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/logstash/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºlogstashçš„ymlæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¼–è¾‘logstashé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">path.config:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /usr/share/logstash/conf.d/</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B">*</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">path.logs:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /usr/share/logstash/logs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥logstashçš„conf.dç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/logstash/conf.d</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºlogstashé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¼–è¾‘logstashé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash.conf</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">input</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">  beats</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">5044</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    codec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"json"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">output</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    elasticsearch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	# esçš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">      	hosts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"http://172.16.11.213:9200"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      	# ç”¨æˆ·åï¼ˆå¦‚æœeså¼€å¯äº†ç”¨æˆ·åå¯†ç è¿™é‡Œå°±éœ€è¦é…ç½®ï¼Œå¦‚æœæ²¡å¼€å¯å°±ä¸ç”¨é…ç½®ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      	#user => "elastic"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      	# å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      	#password => "123456"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	# ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      	#index => "dashu-park-error-log"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	# ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	#document_type => "fire"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	# ä¸»é”®</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	#document_id => "%{id}"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># mailæ’ä»¶ï¼Œå¯ä»¥ç”¨æ¥æŠ¥è­¦å‘é‚®ä»¶</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#    email {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        port           => "25"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        address        => "smtp.163.com"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        username       => "123123123@163.com"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        password       => "1231231231"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        authentication => "plain"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        use_tls        => false</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        from           => "123123123@qq.com"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        subject        => "dashu-park-zoneé¡¹ç›®ä¸­æœ‰erroræ—¥å¿—ä¿¡æ¯"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        to             => "123123123@qq.com"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        via            => "smtp"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#        body           => "é”™è¯¯æ—¥å¿—ï¼š \n  %{message} "</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#    }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#  }</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#  redis {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     host => ["172.16.11.213"] #è¿™ä¸ªæ˜¯æ ‡æ˜redisæœåŠ¡çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     port => 9001</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     codec => plain</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     db => 1 #redisä¸­çš„æ•°æ®åº“ï¼Œselectçš„å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     key => elk_log #redisä¸­çš„é”®å€¼</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     data_type => list #ä¸€èˆ¬å°±æ˜¯listå’Œchannel</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     password => DaShuRedisoRhFG9xT6kXIZl5b</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     timeout => 5</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#     workers => 1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#  }</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">  stdout</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> codec</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">rubydebug</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-4-åˆ›å»ºkibanaç›®å½•åŠé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-4-åˆ›å»ºkibanaç›®å½•åŠé…ç½®æ–‡ä»¶"><span>4.4 åˆ›å»ºKibanaç›®å½•åŠé…ç½®æ–‡ä»¶</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºkibanaç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/kibana/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥kibanaç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/kibana/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºkibanaé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kibana.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¼–è¾‘kibanaé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kibana.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">server.host</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"0.0.0.0"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">server.shutdownTimeout</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"5s"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">elasticsearch.hosts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"http://172.16.11.213:9200"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> ]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># é…ç½®ä¸­æ–‡</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">i18n.locale</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">zh-CN</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># é…ç½®ç”¨æˆ·åå¯†ç ï¼ˆesæœ‰ç”¨æˆ·åå¯†ç çš„æ—¶å€™åœ¨å¼€å¯ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#elasticsearch.username: "kibana"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#elasticsearch.password: "123456"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-5-åˆ›å»ºfilebeatç›®å½•åŠé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_4-5-åˆ›å»ºfilebeatç›®å½•åŠé…ç½®æ–‡ä»¶"><span>4.5 åˆ›å»ºfilebeatç›®å½•åŠé…ç½®æ–‡ä»¶</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºfilebeatç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/{config,data,logs}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥filebeat/configç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºfilebeaté…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å»é™¤filebeatç»„å’Œå…¶ä»–ç”¨æˆ·çš„å†™å…¥æƒé™ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> go-w</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/config/filebeat.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¼–è¾‘filebeaté…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#=========================== Filebeat inputs =============================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">filebeat.inputs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">log</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # Change to true to enable this input configuration.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # Paths that should be crawled and fetched. Glob based paths.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  paths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#å¯ä»¥é…ç½®å¤šä¸ªæ—¥å¿—è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # å¦‚æœæ˜¯dockeréƒ¨ç½²ï¼Œè¿™é‡Œå°±æ˜¯dockerå®¹å™¨å†…çš„è·¯å¾„ï¼Œè€Œä¸”éœ€è¦å’Œå®¿ä¸»æœºçš„è·¯å¾„è¿›è¡Œæ˜ å°„</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/usr/share/filebeat/logs/*.log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    #- </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/usr/share/filebeat/logs/info.log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  #</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">æŒ‡å®šè‡ªå®šä¹‰å­—æ®µ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  fields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:							</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">       project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"fire"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  #</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">å­—æ®µ1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">       #</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">hostName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"172.16.11.213"</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  #å­—æ®µ2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  multiline</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    #å¤šè¡ŒåŒ¹é…è§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    pattern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'^[[:space:]]+(at|\.{3})\b&#x26;^Caused by:'</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    #å°†ä¸åŒ¹é…çš„è§„åˆ™çš„è¡Œåˆå¹¶åœ¨ä¸€èµ·</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    negate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    #åˆå¹¶åˆ°åŒ¹é…è§„åˆ™çš„ä¸Šä¸€è¡Œæœ«å°¾</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    match</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">after</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#================================ Outputs =====================================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#----------------------------- Logstash output --------------------------------</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">output.logstash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # The Logstash hosts</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  hosts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"172.16.11.213:5044"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]   </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # Optional SSL. By default is off.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # List of root certificates for HTTPS server verifications</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #ssl.certificate_authorities: ["/etc/pki/root/ca.pem"]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # Certificate for SSL client authentication</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #ssl.certificate: "/etc/pki/client/cert.pem"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # Client Certificate Key</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #ssl.key: "/etc/pki/client/cert.key"</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#output.elasticsearch:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#  hosts: 172.16.11.213:9200</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#  indices:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#    - index: "filebeat-%{+yyyy.MM.dd}"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#output.redis:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #hosts: ["172.16.11.213:9001"]</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #password: DaShuRedisoRhFG9xT6kXIZl5b</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #key: "filebeat-redis"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #db: 1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #timeout: 60</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">   </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æ§åˆ¶å°è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#output.console:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #pretty: true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #enable: true</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-6-å¯¼å…¥elfké•œåƒ" tabindex="-1"><a class="header-anchor" href="#_4-6-å¯¼å…¥elfké•œåƒ"><span>4.6 å¯¼å…¥ELFKé•œåƒ</span></a></h4>
<p>æå‰å¯¼å…¥å¥½é•œåƒåœ¨æ‰§è¡Œdocker-composeæ—¶å°±ä¸ç”¨åœ¨æ‹‰å–äº†ï¼Œè€Œä¸”ç½‘ç»œä¸ç¨³å®šä¹Ÿå®¹æ˜“ä¸­æ–­ï¼›<br>
å¦‚æœdockeré»˜è®¤è·¯å¾„æ²¡ç©ºé—´ï¼Œå¯å‚è€ƒæ­¤æ–‡ç« ä¿®æ”¹dockerå­˜å‚¨è·¯å¾„ï¼š<a href="https://blog.csdn.net/liu_chen_yang/article/details/124322403" target="_blank" rel="noopener noreferrer">ã€dockerã€‘å¯¼å…¥é•œåƒæŠ¥é”™ç£ç›˜ç©ºé—´ä¸è¶³çš„è§£å†³æ–¹æ³• &amp;&amp; ã€dockerã€‘ä¿®æ”¹é»˜è®¤çš„å­˜å‚¨è·¯å¾„</a></p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> load</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> elasticsearch.tar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> load</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash.tar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> load</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kibana.tar</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> load</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat.tar</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost config]# docker images </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">REPOSITORY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">                                      TAG</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       IMAGE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">       CREATED</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">        SIZE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elastic/kibana</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">                                  8.12.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    2870bdfe2474</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> months</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ago</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   1.05GB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elastic/elasticsearch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">                           8.12.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    c02b14250fd3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> months</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ago</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   1.36GB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elastic/logstash</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">                                8.12.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    341c9b96c97b</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> months</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ago</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   769MB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elastic/filebeat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">                                8.12.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">    89c084ca559d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> months</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ago</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">   325MB</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554234.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554657.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h4 id="_4-7-ä½¿ç”¨docker-composeå¯åŠ¨elfkæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_4-7-ä½¿ç”¨docker-composeå¯åŠ¨elfkæœåŠ¡"><span>4.7 ä½¿ç”¨docker-composeå¯åŠ¨ELFKæœåŠ¡</span></a></h4>
<p>â‘ ã€å…ˆåˆ›å»ºdocker-composeç›®å½•ç”¨æ¥ç®¡ç†ELFKæœåŠ¡</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºdocker-composeç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥docker-composeç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºdocker-composeçš„ymlé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker-compose.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#ç¼–è¾‘docker-composeé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker-compose.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'3'</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  elasticsearch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">elastic/elasticsearch:8.12.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">es</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    hostname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">es</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/elasticsearch/config/es.yml:/usr/share/elasticsearch/config/elasticsearch.yml</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/elasticsearch/plugins:/usr/share/elasticsearch/plugins</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/elasticsearch/data:/usr/share/elasticsearch/data</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/elasticsearch/logs:/usr/share/elasticsearch/logs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/localtime:/etc/localtime</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9200:9200</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">9300:9300</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  logstash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">elastic/logstash:8.12.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">logstash</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    hostname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">logstash</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    logging</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      driver</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">json-file</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">      options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        max-size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"10m"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">        max-file</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"2"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/logstash/config/logstash.yml:/usr/share/logstash/config/logstash.yml</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/logstash/conf.d/:/usr/share/logstash/conf.d/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/localtime:/etc/localtime</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">5044:5044</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  kibana</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">elastic/kibana:8.12.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">kibana</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    hostname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">kibana</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/kibana/kibana.yml:/usr/share/kibana/config/kibana.yml</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    ports</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">5601:5601</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  filebeat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">elastic/filebeat:8.12.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">filebeat</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    hostname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">filebeat</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">root</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      # æ—¥å¿—æ–‡ä»¶å¤¹æ˜ å°„åˆ°å®¹å™¨ä¸­[ä½œä¸ºæ•°æ®æº]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/filebeat/logs:/usr/share/filebeat/logs/</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      # é‡‡é›†æ—¥å¿—é…ç½®æ˜ å°„é…ç½®æ–‡ä»¶åˆ°å®¹å™¨ä¸­</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/filebeat/config/filebeat.yml:/usr/share/filebeat/filebeat.yml:ro</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/localtime:/etc/localtime</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    network_mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">host</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<p>å¦‚æœé˜²ç«å¢™å¼€å¯çš„è¯ï¼Œéœ€è¦æ‰“å¼€çš„ç«¯å£æœ‰ï¼šï¼ˆç«¯å£å¯è‡ªè¡Œå®šä¹‰ï¼‰</p>
<ul>
<li>Elasticsearchï¼š<code v-pre>9200</code>ã€<code v-pre>9300</code></li>
<li>Kibanaï¼š<code v-pre>5601</code></li>
<li>Logstashï¼š<code v-pre>5044</code></li>
<li>nginxï¼š<code v-pre>80</code></li>
<li><strong>filebeat</strong> æœ¬èº«ä¸ç›‘å¬ä»»ä½•ç«¯å£ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ—¥å¿—æ–‡ä»¶æ”¶é›†å™¨ï¼Œç”¨äºå°†æ—¥å¿—å‘é€åˆ°Logstashæˆ–Elasticsearchã€‚</li>
</ul>
<blockquote>
<p><strong>æ³¨ï¼š</strong></p>
<p><strong>9200 æœ¬åœ°elasticsearchæœåŠ¡æœ¬åœ°çš„ç«¯å£<br>
9300 æ˜¯elasticsearché›†ç¾¤çš„é€šä¿¡ç«¯å£</strong></p>
</blockquote>
<hr>
<p>â‘¡ã€å¯åŠ¨ELFKæœåŠ¡</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥docker-compose.ymlä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¯åŠ¨ï¼ˆä¸¤ç§äºŒé€‰ä¸€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose/docker-compose.yml</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â‘¢ã€æŸ¥çœ‹ELFKæœåŠ¡çŠ¶æ€</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554963.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>StateçŠ¶æ€ä¸ºï¼š<code v-pre>UP</code>æˆ–è€…<code v-pre>running</code>å°±ä¸ºè¿è¡ŒçŠ¶æ€ã€‚</p>
<hr>
<p>â‘£ã€å¯åŠ¨å®ŒELFKéƒ½çœ‹ä¸€ä¸‹è¿™äº›å®¹å™¨çš„æ—¥å¿—</p>
<p>å¯åŠ¨å®ŒELFKéƒ½çœ‹ä¸€ä¸‹è¿™äº›å®¹å™¨çš„æ—¥å¿—ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ï¼›</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹esçš„æœåŠ¡æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> es</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹logstashçš„æœåŠ¡æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹kibanaçš„æœåŠ¡æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kibana</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹filebeatçš„æœåŠ¡æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåœ¨å¯åŠ¨ <strong>kibana</strong> æ—¶é‡åˆ°ä»¥ä¸‹æç¤ºå†…å®¹ï¼Œä¸ç”¨ç®¡ï¼Œè¿™ä¸ªæç¤ºè¯´çš„æ˜¯æ²¡æœ‰é…ç½®è´¦æˆ·ä»¤ç‰Œï¼Œä¸å½±å“æˆ‘ä»¬çš„è®¿é—®åŠæ‹¿æ—¥å¿—ï¼›</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554129.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h4 id="_4-8-è®¿é—®esã€kibanaåœ°å€" tabindex="-1"><a class="header-anchor" href="#_4-8-è®¿é—®esã€kibanaåœ°å€"><span>4.8 è®¿é—®esã€kibanaåœ°å€</span></a></h4>
<p>è®¿é—®esã€kibanaåœ°å€ï¼Œç¡®è®¤æ˜¯å¦å¯ä»¥è®¿é—®åˆ°ï¼Œæ²¡æœ‰é—®é¢˜ï¼›</p>
<font color=red>æ³¨æ„æŠŠ ip æ¢æˆè‡ªå·±çš„ï¼›</font><ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-5"> esåœ°å€ï¼š<a href="http://172.16.11.213:9200" target="_blank" rel="noopener noreferrer">http://172.16.11.213:9200</a></label></li>
</ul>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191554085.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-6"> kibanaåœ°å€ï¼š<a href="http://172.16.11.213:5601" target="_blank" rel="noopener noreferrer">http://172.16.11.213:5601</a></label></li>
</ul>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553636.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553856.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h4 id="_4-9-å®‰è£…å¹¶é…ç½®nginx" tabindex="-1"><a class="header-anchor" href="#_4-9-å®‰è£…å¹¶é…ç½®nginx"><span>4.9 å®‰è£…å¹¶é…ç½®nginx</span></a></h4>
<p>éƒ¨ç½²nginxå¯ä»¥å‚è€ƒï¼š<a href="https://blog.csdn.net/liu_chen_yang/article/details/133928000" target="_blank" rel="noopener noreferrer">ã€Linuxã€‘nginxåŸºç¡€ç¯‡ -- ä»‹ç»åŠyumå®‰è£…nginx</a>ã€<a href="https://blog.csdn.net/liu_chen_yang/article/details/132145067" target="_blank" rel="noopener noreferrer">ã€Linuxã€‘ç¯å¢ƒä¸‹éƒ¨ç½²NginxæœåŠ¡ - äºŒè¿›åˆ¶éƒ¨ç½²æ–¹å¼</a></p>
<p>è¿™é‡Œæˆ‘ä¹ æƒ¯äºäºŒè¿›åˆ¶çš„éƒ¨ç½²æ–¹å¼ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨äºŒè¿›åˆ¶éƒ¨ç½²ï¼Œè¿™é‡Œå°±ç®€å•å†™ä¸€ä¸‹ï¼Œå…·ä½“çš„æ“ä½œå¯ä»¥çœ‹äºŒè¿›åˆ¶éƒ¨ç½²æ–‡æ¡£ï¼›</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æ‹‰å–1.24.0å®‰è£…åŒ…</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> https://nginx.org/download/nginx-1.24.0.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å®‰è£…å¿…è¦çš„æ’ä»¶ä¾èµ–åŒ…</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">yum</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gcc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> gcc-c++</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> zlib</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> zlib-devel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> pcre-devel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openssl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> openssl-devel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è§£å‹åˆ°/usr/srcä¸‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> xf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx-1.24.0.tar.gz</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /usr/src/</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /usr/src/nginx-1.24.0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¼–è¯‘å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">./configure</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --prefix=/usr/local/nginx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">make</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &#x26;&#x26; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">make</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> install</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…å®Œæˆåï¼Œè¿™é‡Œéœ€è¦ä¿®æ”¹ä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼ŒæŠŠnginxçš„æ—¥å¿—è·¯å¾„æŒ‡åˆ°filebeatçš„logsç›®å½•ä¸‹</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥nginxé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /usr/local/nginx/conf/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> nginx.conf</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553772.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¯åŠ¨nginxæœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">/usr/local/nginx/sbin/nginx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -c</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  /usr/local/nginx/conf/nginx.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹filebeatæ—¥å¿—æ˜¯å¦æœ‰è¾“å‡ºï¼Œé¡µé¢è®¿é—®http://172.16.11.213 nginxåˆ·æ–°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/logs/nginx_access.log</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553824.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h4 id="_4-10-è·å–æœåŠ¡æ—¥å¿—å¹¶è¿›è¡Œé¡µé¢å±•ç¤º" tabindex="-1"><a class="header-anchor" href="#_4-10-è·å–æœåŠ¡æ—¥å¿—å¹¶è¿›è¡Œé¡µé¢å±•ç¤º"><span>4.10 è·å–æœåŠ¡æ—¥å¿—å¹¶è¿›è¡Œé¡µé¢å±•ç¤º</span></a></h4>
<p>é¡µé¢è®¿é—®kibanaæŸ¥çœ‹æ—¥å¿—ï¼š<a href="http://172.16.11.213:5601" target="_blank" rel="noopener noreferrer">http://172.16.11.213:5601</a></p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553390.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>åˆ·æ–°nginxé¡µé¢ï¼Œä½¿å…¶äº§ç”Ÿæ—¥å¿—ï¼Œå¹¶å®æ—¶ç›‘æ§æ—¥å¿—</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553145.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553760.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<hr>
<center>åˆ°æ­¤éƒ¨ç½²å°±å®Œæˆï¼Œå¦‚æœæƒ³è¦åŠ ä¸€äº›å®‰å…¨æ€§æ¯”å¦‚å¯†ç è®¤è¯ï¼Œå¯ä»¥æ¥ç€çœ‹ä¸‹é¢çš„å†…å®¹ï¼›</center>
<hr>
<h2 id="äºŒã€elk8-12-2ç‰ˆæœ¬é…ç½®å¯†ç è®¤è¯" tabindex="-1"><a class="header-anchor" href="#äºŒã€elk8-12-2ç‰ˆæœ¬é…ç½®å¯†ç è®¤è¯"><span>äºŒã€ELK8.12.2ç‰ˆæœ¬é…ç½®å¯†ç è®¤è¯</span></a></h2>
<h3 id="_1ã€é…ç½®-es-å¼€å¯å®‰å…¨éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_1ã€é…ç½®-es-å¼€å¯å®‰å…¨éªŒè¯"><span>1ã€é…ç½® ES å¼€å¯å®‰å…¨éªŒè¯</span></a></h3>
<h4 id="_1-1-ä¿®æ”¹-es-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1-1-ä¿®æ”¹-es-é…ç½®æ–‡ä»¶"><span>1.1 ä¿®æ”¹ es é…ç½®æ–‡ä»¶</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ESé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/elasticsearch/config/es.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å°†xpack.security.enabled=falseæ”¹ä¸ºtrueå¯ç”¨ X-Pack å®‰å…¨æ€§ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xpack.security.enabled:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> true</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-é‡å¯-es-å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_1-2-é‡å¯-es-å®¹å™¨"><span>1.2 é‡å¯ es å®¹å™¨</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> es</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>é‡å¯å®Œè®°å¾—å†çœ‹ä¸€ä¸‹esæ—¥å¿—ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ä»€ä¹ˆçš„ï¼›</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> es</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>é‡å¯å®Œkibanaä¼šè¿æ¥ä¸åˆ°ï¼Œå› ä¸ºå¼€å¯äº†å®‰å…¨è®¤è¯ï¼Œkibanaæ²¡æœ‰æ‰¾åˆ°ç›¸å…³é…ç½®ï¼Œæ‰€ä»¥ï¼Œä¼šè¿æ¥ä¸åˆ°ï¼Œåœ¨æŠ¥é”™ï¼Œåœ¨åé¢æˆ‘ä»¬ä¼šé…ç½®çš„ï¼›</p>
<h4 id="_1-3-è¿›å…¥å®¹å™¨ç”Ÿæˆå¯†ç " tabindex="-1"><a class="header-anchor" href="#_1-3-è¿›å…¥å®¹å™¨ç”Ÿæˆå¯†ç "><span>1.3 è¿›å…¥å®¹å™¨ç”Ÿæˆå¯†ç </span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> exec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -it</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> es</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç”Ÿæˆå¯†ç ï¼ˆè‡ªåŠ¨ä¸æ‰‹åŠ¨äºŒé€‰ä¸€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## è‡ªåŠ¨ç”Ÿæˆå¯†ç </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elasticsearch-setup-passwords</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> auto</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">## æ‰‹åŠ¨è¾“å…¥å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elasticsearch-setup-passwords</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> interactive</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œæˆ‘é€‰æ‹©æ‰‹åŠ¨è¾“å…¥å¯†ç ï¼›æ‰‹åŠ¨è¾“å…¥å¯†ç æ¯ä¸ªç”¨æˆ·éƒ½è¦è¾“å…¥ä¸¤éå¯†ç ï¼Œä¸€éæ˜¯è¾“å…¥ä¸€éæ˜¯ç¡®è®¤å¯†ç ï¼›</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553580.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h4 id="_1-4-è®¿é—®-es-é¡µé¢è¿›è¡ŒéªŒè¯" tabindex="-1"><a class="header-anchor" href="#_1-4-è®¿é—®-es-é¡µé¢è¿›è¡ŒéªŒè¯"><span>1.4 è®¿é—® es é¡µé¢è¿›è¡ŒéªŒè¯</span></a></h4>
<p>é¡µé¢è®¿é—®ï¼š<a href="http://172.16.11.213:9200" target="_blank" rel="noopener noreferrer">http://172.16.11.213:9200</a></p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553210.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>è¾“å…¥å®Œç”¨æˆ·åå¯†ç ï¼Œå°±åˆ°è¿™ä¸ªé¡µé¢äº†ï¼›</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553444.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h3 id="_2ã€é…ç½®-logstash-è¿æ¥ç”¨æˆ·å¯†ç " tabindex="-1"><a class="header-anchor" href="#_2ã€é…ç½®-logstash-è¿æ¥ç”¨æˆ·å¯†ç "><span>2ã€é…ç½® logstash è¿æ¥ç”¨æˆ·å¯†ç </span></a></h3>
<h4 id="_2-1-ä¿®æ”¹-logstash-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-1-ä¿®æ”¹-logstash-é…ç½®æ–‡ä»¶"><span>2.1 ä¿®æ”¹ logstash é…ç½®æ–‡ä»¶</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥logstashé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/logstash/conf.d/logstash.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åœ¨outputä¸­è¾“å…¥ç”¨æˆ·åå¯†ç </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"elastic"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">password</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"åˆšåˆšç”Ÿæˆæˆ–æ‰‹åŠ¨è¾“å…¥çš„å¯†ç "</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>xpack.monitoring.enabled: true<br>
xpack.monitoring.elasticsearch.username: elastic<br>
xpack.monitoring.elasticsearch.password: lcy123...</p>
<h4 id="_2-2-é‡å¯-logstash-å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_2-2-é‡å¯-logstash-å®¹å™¨"><span>2.2 é‡å¯ logstash å®¹å™¨</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>é‡å¯å®Œè®°å¾—å†çœ‹ä¸€ä¸‹ logstash æ—¥å¿—ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ä»€ä¹ˆçš„ï¼›</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logstash</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3 id="_3ã€é…ç½®-kibana-è¿æ¥ç”¨æˆ·å¯†ç " tabindex="-1"><a class="header-anchor" href="#_3ã€é…ç½®-kibana-è¿æ¥ç”¨æˆ·å¯†ç "><span>3ã€é…ç½® kibana è¿æ¥ç”¨æˆ·å¯†ç </span></a></h3>
<h4 id="_3-1-ä¿®æ”¹-kibana-é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-1-ä¿®æ”¹-kibana-é…ç½®æ–‡ä»¶"><span>3.1 ä¿®æ”¹ kibana é…ç½®æ–‡ä»¶</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥kibanaé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/kibana/kibana.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åœ¨æœ€åæ·»åŠ æˆ–ä¿®æ”¹ï¼ˆè¿™é‡Œç”¨æˆ·åä¸èƒ½ç”¨elasticï¼Œå¦åˆ™å¯åŠ¨ä¼šæŠ¥é”™ï¼Œelasticæ˜¯è¶…çº§ç”¨æˆ·ï¼Œåœ¨8.*ç‰ˆæœ¬é‡Œæ˜¯è¢«ç¦æ­¢çš„ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elasticsearch.username:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "kibana"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">elasticsearch.password:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "åˆšåˆšç”Ÿæˆæˆ–æ‰‹åŠ¨è¾“å…¥çš„å¯†ç "</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-é‡å¯-kibana-å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#_3-2-é‡å¯-kibana-å®¹å™¨"><span>3.2 é‡å¯ kibana å®¹å™¨</span></a></h4>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kibana</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>é‡å¯å®Œè®°å¾—å†çœ‹ä¸€ä¸‹ kibana æ—¥å¿—ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™ä»€ä¹ˆçš„ï¼›</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> kibana</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>è¿™é‡Œå¯ä»¥æŠŠELFKå…¨éƒ¨é‡å¯ä¸€ä¸‹ï¼ˆä¸¤ç§æ–¹å¼äºŒé€‰ä¸€ï¼‰è®°å¾—é‡å¯å®ŒæŸ¥çœ‹æ—¥å¿—ï¼›</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose/docker-compose.yml</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> restart</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-è®¿é—®-kibana-é¡µé¢è¿›è¡ŒéªŒè¯" tabindex="-1"><a class="header-anchor" href="#_3-3-è®¿é—®-kibana-é¡µé¢è¿›è¡ŒéªŒè¯"><span>3.3 è®¿é—® kibana é¡µé¢è¿›è¡ŒéªŒè¯</span></a></h4>
<p>è®¿é—®kibanaé¡µé¢ï¼š<a href="http://172.16.11.213:5601" target="_blank" rel="noopener noreferrer">http://172.16.11.213:5601</a></p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191553253.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>è¿™é‡Œå¯ä»¥è¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œå¹¶ä¸æ˜¯éè¦kibanaé…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ç”¨æˆ·åå¯†ç ï¼Œç”¨å“ªä¸ªç™»å½•ä¸Šæ¥ä¼šæ²¡æœ‰æƒé™ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç™»å½•<code v-pre>elastic</code>ç”¨æˆ·ï¼Œå¯†ç ä¹Ÿæ˜¯åˆšåˆšè®¾ç½®çš„å¯†ç ï¼›</p>
<p>ç™»å½•è¿›æ¥ï¼Œå³ä¸Šè§’å°±ä¼šå¤šå‡ºä¸€ä¸ªå¤´åƒç­‰ç”¨æˆ·ä¿¡æ¯ï¼›</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191552311.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h2 id="ä¸‰ã€é™„åŠ -ä¿®æ”¹-elk-è®¤è¯å¯†ç " tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€é™„åŠ -ä¿®æ”¹-elk-è®¤è¯å¯†ç "><span>ä¸‰ã€é™„åŠ ï¼šä¿®æ”¹ ELK è®¤è¯å¯†ç </span></a></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -H</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "Content-Type:application/json"</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -XPOST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> elastic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'http://ip:9200/_xpack/security/user/elastic/_password'</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> '{ "password" : "è¦ä¿®æ”¹çš„å¯†ç " }'</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h2 id="å››ã€é™„åŠ -è·å–å¤šå°æœåŠ¡å™¨æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#å››ã€é™„åŠ -è·å–å¤šå°æœåŠ¡å™¨æ—¥å¿—"><span>å››ã€é™„åŠ ï¼šè·å–å¤šå°æœåŠ¡å™¨æ—¥å¿—</span></a></h2>
<p>â€ƒâ€ƒè¦è·å–å¤šå°æœåŠ¡å™¨æ—¥å¿—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨è¦è·å–æ—¥å¿—çš„é‚£å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²æ—¥å¿—æ”¶é›†å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„<code v-pre>filebeat</code>æœåŠ¡ï¼›<font color=red>å‰ææ˜¯ï¼Œå¿…é¡»å¯ä»¥è¿æ¥åˆ°ã€pingé€šéƒ¨ç½²ELFKçš„è¿™å°ä¸»æœåŠ¡å™¨ä¸Šã€‚</font></p>
<h3 id="_1ã€åˆ›å»ºfilebeatç›®å½•åŠé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_1ã€åˆ›å»ºfilebeatç›®å½•åŠé…ç½®æ–‡ä»¶"><span>1ã€åˆ›å»ºfilebeatç›®å½•åŠé…ç½®æ–‡ä»¶</span></a></h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºfilebeatç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/{config,data,logs}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥filebeat/configç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/config</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºfilebeaté…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å»é™¤filebeatç»„å’Œå…¶ä»–ç”¨æˆ·çš„å†™å…¥æƒé™ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> go-w</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/config/filebeat.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç¼–è¾‘filebeaté…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#=========================== Filebeat inputs =============================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">filebeat.inputs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">log</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # Change to true to enable this input configuration.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  enabled</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # Paths that should be crawled and fetched. Glob based paths.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  paths</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#å¯ä»¥é…ç½®å¤šä¸ªæ—¥å¿—è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # å¦‚æœæ˜¯dockeréƒ¨ç½²ï¼Œè¿™é‡Œå°±æ˜¯dockerå®¹å™¨å†…çš„è·¯å¾„ï¼Œè€Œä¸”éœ€è¦å’Œå®¿ä¸»æœºçš„è·¯å¾„è¿›è¡Œæ˜ å°„</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/usr/share/filebeat/logs/*.log</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    #- </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/usr/share/filebeat/logs/info.log</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  #</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">æŒ‡å®šè‡ªå®šä¹‰å­—æ®µ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  fields</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:							</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">       project</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"fire"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  #</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">å­—æ®µ1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">	</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">       #</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">hostName</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"172.16.11.213"</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	  #å­—æ®µ2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">  </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  multiline</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    #å¤šè¡ŒåŒ¹é…è§„åˆ™</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    pattern</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'^[[:space:]]+(at|\.{3})\b&#x26;^Caused by:'</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    #å°†ä¸åŒ¹é…çš„è§„åˆ™çš„è¡Œåˆå¹¶åœ¨ä¸€èµ·</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    negate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">true</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    #åˆå¹¶åˆ°åŒ¹é…è§„åˆ™çš„ä¸Šä¸€è¡Œæœ«å°¾</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    match</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">after</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#================================ Outputs =====================================</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#----------------------------- Logstash output --------------------------------</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">output.logstash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  # The Logstash hosts</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  hosts</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"172.16.11.213:5044"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">]</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€ä¸Šä¼ å¹¶å¯¼å…¥-filebeat-é•œåƒ" tabindex="-1"><a class="header-anchor" href="#_2ã€ä¸Šä¼ å¹¶å¯¼å…¥-filebeat-é•œåƒ"><span>2ã€ä¸Šä¼ å¹¶å¯¼å…¥ filebeat é•œåƒ</span></a></h3>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> load</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat.tar</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3 id="_3ã€ä½¿ç”¨docker-composeå¯åŠ¨filebeatæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_3ã€ä½¿ç”¨docker-composeå¯åŠ¨filebeatæœåŠ¡"><span>3ã€ä½¿ç”¨docker-composeå¯åŠ¨filebeatæœåŠ¡</span></a></h3>
<p>â‘ ã€å…ˆåˆ›å»ºdocker-composeç›®å½•ç”¨æ¥ç®¡ç† filebeat æœåŠ¡</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºdocker-composeç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥docker-composeç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºdocker-composeçš„ymlé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">touch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker-compose.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#ç¼–è¾‘docker-composeé…ç½®</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> docker-compose.yml</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"3"</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">services</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">  filebeat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    image</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">elastic/filebeat:8.12.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    container_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">filebeat</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    hostname</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">filebeat</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    restart</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">always</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">root</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    volumes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      # æ—¥å¿—æ–‡ä»¶å¤¹æ˜ å°„åˆ°å®¹å™¨ä¸­[ä½œä¸ºæ•°æ®æº]ï¼Œå¯ä»¥åˆ‡æ¢ä¸ºè‡ªå·±æœåŠ¡çš„æ—¥å¿—è·¯å¾„ï¼›</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/filebeat/logs/:/usr/share/filebeat/logs/</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      # é‡‡é›†æ—¥å¿—é…ç½®æ˜ å°„é…ç½®æ–‡ä»¶åˆ°å®¹å™¨ä¸­</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/data/ELK/filebeat/config/filebeat.yml:/usr/share/filebeat/filebeat.yml:ro</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">      - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/etc/localtime:/etc/localtime</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    # ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">    network_mode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">host</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<p>å¦‚æœä¸æƒ³ç”¨docker-composeï¼Œå°±è¦ç”¨dockerçš„è¯ä¹Ÿå¯ä»¥ï¼ŒæŠŠä»–è½¬æ¢æˆdockerå‘½ä»¤å°±è¡Œï¼›</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --hostname=filebeat</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --restart=always</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --network=host</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/logs/:/usr/share/filebeat/logs/</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/filebeat/config/filebeat.yml:/usr/share/filebeat/filebeat.yml:ro</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/localtime:/etc/localtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> elastic/filebeat:8.12.2</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><hr>
<p>â‘¡ã€å¯åŠ¨ filebeat æœåŠ¡</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¿›å…¥docker-compose.ymlä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¯åŠ¨ï¼ˆä¸¤ç§äºŒé€‰ä¸€ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /data/ELK/docker-compose/docker-compose.yml</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -d</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â‘¢ã€æŸ¥çœ‹ filebeat æœåŠ¡çŠ¶æ€</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker-compose</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ps</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191552730.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>StateçŠ¶æ€ä¸ºï¼š<code v-pre>UP</code>æˆ–è€…<code v-pre>running</code>å°±ä¸ºè¿è¡ŒçŠ¶æ€ã€‚</p>
<hr>
<p>â‘£ã€å¯åŠ¨å®Œçœ‹ä¸€ä¸‹ filebeat å®¹å™¨çš„æ—¥å¿—ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æŠ¥é”™</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> filebeat</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><h3 id="_4ã€ç™»å½•-kibana-é¡µé¢æŸ¥çœ‹æ–°èŠ‚ç‚¹çš„æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_4ã€ç™»å½•-kibana-é¡µé¢æŸ¥çœ‹æ–°èŠ‚ç‚¹çš„æ—¥å¿—"><span>4ã€ç™»å½• kibana é¡µé¢æŸ¥çœ‹æ–°èŠ‚ç‚¹çš„æ—¥å¿—</span></a></h3>
<p>æ²¡æœ‰é—®é¢˜çš„è¯å°±å¯ä»¥äº§ç”Ÿä¸€äº›æ—¥å¿—ï¼Œç„¶åå»<strong>kibana</strong>é¡µé¢æŸ¥çœ‹æ—¥å¿—ï¼›<br>
<a href="http://172.16.11.213:5601" target="_blank" rel="noopener noreferrer">http://172.16.11.213:5601</a></p>
<h2 id="äº”ã€é™„åŠ -kibana-é¡µé¢æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#äº”ã€é™„åŠ -kibana-é¡µé¢æ“ä½œ"><span>äº”ã€é™„åŠ ï¼škibana é¡µé¢æ“ä½œ</span></a></h2>
<h3 id="_1ã€æŸ¥çœ‹æ—¥å¿—å±äºå“ªä¸ªè·¯å¾„ä¸‹åŠæ—¥å¿—å" tabindex="-1"><a class="header-anchor" href="#_1ã€æŸ¥çœ‹æ—¥å¿—å±äºå“ªä¸ªè·¯å¾„ä¸‹åŠæ—¥å¿—å"><span>1ã€æŸ¥çœ‹æ—¥å¿—å±äºå“ªä¸ªè·¯å¾„ä¸‹åŠæ—¥å¿—å</span></a></h3>
<p>å¦‚æœè¦çœ‹è¿™ä¸ªæ—¥å¿—æ˜¯å“ªä¸ªè·¯å¾„çš„è¯ï¼Œå¯ä»¥<code v-pre>Discover</code>ä¸­æœç´¢<code v-pre>log.file.path</code></p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191552363.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191552691.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h3 id="_2ã€ä»ªè¡¨æ¿" tabindex="-1"><a class="header-anchor" href="#_2ã€ä»ªè¡¨æ¿"><span>2ã€ä»ªè¡¨æ¿</span></a></h3>
<p>ä»ªè¡¨æ¿å¯ä»¥åœ¨<code v-pre>Home</code>--&gt;<code v-pre>Dashboards</code>åˆ›å»ºï¼›</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191552380.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412191552439.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h2 id="å…­ã€ç›¸å…³æ–‡ç« " tabindex="-1"><a class="header-anchor" href="#å…­ã€ç›¸å…³æ–‡ç« "><span>å…­ã€ç›¸å…³æ–‡ç« </span></a></h2>
<table>
<thead>
<tr>
<th style="text-align:center">æ–‡ç« åç§°</th>
<th style="text-align:center">æ–‡ç« é“¾æ¥</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/139653744" target="_blank" rel="noopener noreferrer">ELFKç®€ä»‹</a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/139653744" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/139653744</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/139761024" target="_blank" rel="noopener noreferrer">ELFK 8.12.2 å•æœºéƒ¨ç½² -- dockeréƒ¨ç½²æ–¹å¼âš½</a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/139761024" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/139761024</a></td>
</tr>
</tbody>
</table>
</div></template>


