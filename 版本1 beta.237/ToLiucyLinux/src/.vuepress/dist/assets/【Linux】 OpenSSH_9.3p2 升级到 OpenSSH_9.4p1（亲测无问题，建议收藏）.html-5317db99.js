import{_ as c}from"./plugin-vue_export-helper-c27b6911.js";import{r,o as i,c as p,a as n,b as e,d as s,w as l,e as o}from"./app-6706a352.js";const d={},u=n("p",null,[e("👨‍🎓"),n("strong",null,"博主简介")],-1),h={href:"https://blog.csdn.net/liu_chen_yang?type=blog",target:"_blank",rel:"noopener noreferrer"},b=n("br",null,null,-1),_={href:"https://bbs.huaweicloud.com/community/myblog",target:"_blank",rel:"noopener noreferrer"},m=n("br",null,null,-1),g={href:"https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz",target:"_blank",rel:"noopener noreferrer"},k=n("br",null,null,-1),v=n("strong",null,"交流社区：",-1),S={href:"https://bbs.csdn.net/forums/lcy",target:"_blank",rel:"noopener noreferrer"},f=n("br",null,null,-1),y=n("br",null,null,-1),O=n("hr",null,null,-1),H=n("h2",{id:"文章声明",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#文章声明","aria-hidden":"true"},"#"),e(" 文章声明")],-1),x=n("br",null,null,-1),L=n("br",null,null,-1),q=n("br",null,null,-1),w=o('<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/379775b034b741f09bed3dfae40fa1dd.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="漏洞描述" tabindex="-1"><a class="header-anchor" href="#漏洞描述" aria-hidden="true">#</a> 漏洞描述</h2><p><strong>OpenSSH 命令注入漏洞(CVE-2020-15778) 详细描述：</strong></p><blockquote><p>OpenSSH（OpenBSD Secure Shell）是OpenBSD计划组的一套用于安全访问远程计算机的连接工具。该工具是SSH协议的开源实现，支持对所有的传输进行加密，可有效阻止窃听、连接劫持以及其他网络级的攻击。<br> OpenSSH 9.3p3及之前版本中的scp的scp.c文件存在命令注入漏洞。该漏洞源于外部输入数据构造可执行命令过程中，网络系统或产品未正确过滤其中的特殊元素。攻击者可利用该漏洞执行非法命令。</p></blockquote><p><strong>OpenSSH 安全漏洞(CVE-2023-38408) 详细描述：</strong></p><blockquote><p>OpenSSH（OpenBSD Secure Shell）是加拿大OpenBSD计划组的一套用于安全访问远程计算机的连接工具。该工具是SSH协议的开源实现，支持对所有的传输进行加密，可有效阻止窃听、连接劫持以及其他网络级的攻击。</p><p>OpenSSH 9.3p2之前版本存在安全漏洞，该漏洞源于ssh-agent的PKCS11功能存在安全问题。攻击者可利用该漏洞执行远程代码。</p></blockquote><h2 id="前述" tabindex="-1"><a class="header-anchor" href="#前述" aria-hidden="true">#</a> 前述</h2><blockquote><p>OpenSSH（OpenBSD Secure Shell）是OpenBSD计划组的一套用于安全访问远程计算机的连接工具。该工具是SSH协议的开源实现，支持对所有的传输进行加密，可有效阻止窃听、连接劫持以及其他网络级的攻击。 OpenSSH 8.9版本至9.4之前版本存在安全漏洞，该漏洞源于将智能卡密钥添加到ssh-agent，会导致忽略每次转发的目标约束。<br> 注：此操作步骤同样适用于Red Hat系所有 9.x 服务器系统。</p></blockquote>',8),B=n("blockquote",null,[n("p",null,[e("在升级之前，建议打开多个SSH终端连接，并安装telnet服务器，确保在SSH服务器升级异常时，可以通过telnet服务器远程连接，进行紧急问题修复处理。"),n("br"),e(" 在升级前一定要备份原有的配置文件，以防出现意外情况。")])],-1),C=n("h2",{id:"此文升级是基于9-3p2升级9-4p1-如是7-4升级9-4p1-可参考文章最后的参考文章",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#此文升级是基于9-3p2升级9-4p1-如是7-4升级9-4p1-可参考文章最后的参考文章","aria-hidden":"true"},"#"),e(" 此文升级是基于9.3p2升级9.4p1（如是7.4升级9.4p1，可参考文章最后的参考文章）")],-1),E={href:"https://liucy.blog.csdn.net/article/details/133697104",target:"_blank",rel:"noopener noreferrer"},V=o(`<h3 id="备份openssh9-3p2的配置文件" tabindex="-1"><a class="header-anchor" href="#备份openssh9-3p2的配置文件" aria-hidden="true">#</a> 备份openssh9.3p2的配置文件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mv /usr/sbin/sshd /usr/sbin/sshd-9.3p2</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mv /usr/bin/ssh /usr/bin/ssh-9.3p2</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mv /usr/bin/ssh-keygen /usr/bin/ssh-keygen-9.3p2</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mv /etc/init.d/sshd /etc/init.d/sshd-9.3p2</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mv /etc/pam.d/sshd.pam /etc/pam.d/sshd.pam-9.3p2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>如果不需要这些配置可以在升级完成之后确认没有问题再将其删除</p></blockquote><h3 id="下载-openssh9-4p1-的安装包" tabindex="-1"><a class="header-anchor" href="#下载-openssh9-4p1-的安装包" aria-hidden="true">#</a> 下载 openssh9.4p1 的安装包：</h3>`,4),z={href:"https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/",target:"_blank",rel:"noopener noreferrer"},D={href:"https://download.csdn.net/download/liu_chen_yang/88405608",target:"_blank",rel:"noopener noreferrer"},A=n("strong",null,"网盘下载：",-1),F=n("br",null,null,-1),N={href:"https://pan.baidu.com/s/1lqPe1J3wbUuEyA9otQO35g?pwd=open",target:"_blank",rel:"noopener noreferrer"},j=n("br",null,null,-1),I=o(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.4p1.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="解压并编译安装openssh9-4p1" tabindex="-1"><a class="header-anchor" href="#解压并编译安装openssh9-4p1" aria-hidden="true">#</a> 解压并编译安装OpenSSH9.4p1</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 将下载的openssh安装包移动到/usr/local下</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mv openssh-9.4p1.tar.gz /usr/local/</span>

<span class="token comment"># 进入/usr/local/目录解压openssh9.4</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd /usr/local/</span>
<span class="token punctuation">[</span>root@localhost local<span class="token punctuation">]</span><span class="token comment"># tar xf openssh-9.4p1.tar.gz</span>

<span class="token comment"># 进入openssh目录</span>
<span class="token punctuation">[</span>root@localhost local<span class="token punctuation">]</span><span class="token comment"># cd openssh-9.4p1</span>

<span class="token comment"># 编译安装</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># CCFLAGS=&quot;-I/usr/local/include&quot; \\</span>
<span class="token assign-left variable">LDFLAGS</span><span class="token operator">=</span><span class="token string">&quot;-L/usr/local/lib64&quot;</span> <span class="token punctuation">\\</span>
./configure <span class="token punctuation">\\</span>
<span class="token parameter variable">--sysconfdir</span><span class="token operator">=</span>/etc/ssh <span class="token punctuation">\\</span>
--with-zlib <span class="token punctuation">\\</span>
--with-ssl-dir<span class="token operator">=</span>/usr/local/openssl

<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># make -j 4</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># make install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="授权执行权限" tabindex="-1"><a class="header-anchor" href="#授权执行权限" aria-hidden="true">#</a> 授权执行权限</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># chmod 600 /etc/ssh/*</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="复制配置文件" tabindex="-1"><a class="header-anchor" href="#复制配置文件" aria-hidden="true">#</a> 复制配置文件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># cp -rf /usr/local/sbin/sshd /usr/sbin/sshd</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># cp -rf /usr/local/bin/ssh /usr/bin/ssh</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># cp -rf /usr/local/bin/ssh-keygen /usr/bin/ssh-keygen</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># cp -ar /usr/local/openssh-9.4p1/contrib/redhat/sshd.init /etc/init.d/sshd</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># cp -ar /usr/local/openssh-9.4p1/contrib/redhat/sshd.pam /etc/pam.d/sshd.pam</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="给sshd授予权限" tabindex="-1"><a class="header-anchor" href="#给sshd授予权限" aria-hidden="true">#</a> 给sshd授予权限</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">chmod</span> <span class="token number">755</span> /etc/init.d/sshd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="启用sshd-生成服务配置文件-并重启服务" tabindex="-1"><a class="header-anchor" href="#启用sshd-生成服务配置文件-并重启服务" aria-hidden="true">#</a> 启用sshd，生成服务配置文件，并重启服务</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 启用sshd，生成服务配置文件</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># systemctl enable sshd</span>
sshd.service is not a native service, redirecting to /sbin/chkconfig.
Executing /sbin/chkconfig sshd on

<span class="token comment"># 重启服务</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># systemctl restart sshd</span>
<span class="token comment"># 查看服务状态</span>
<span class="token punctuation">[</span>root@localhost openssh-9.4p1<span class="token punctuation">]</span><span class="token comment"># systemctl status sshd</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="验证升级是否成功" tabindex="-1"><a class="header-anchor" href="#验证升级是否成功" aria-hidden="true">#</a> 验证升级是否成功</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ssh -V</span>
OpenSSH_9.4p1, OpenSSL <span class="token number">1.1</span>.1t  <span class="token number">7</span> Feb <span class="token number">2023</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/97cc98e2d9a9482a8da90f8d78468dbc.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="相关专栏" tabindex="-1"><a class="header-anchor" href="#相关专栏" aria-hidden="true">#</a> 相关专栏</h2>`,15),P=n("thead",null,[n("tr",null,[n("th",null,"专栏标题"),n("th",null,"专栏链接")])],-1),G={href:"https://blog.csdn.net/liu_chen_yang/category_12463139.html",target:"_blank",rel:"noopener noreferrer"},J={href:"https://blog.csdn.net/liu_chen_yang/category_12463139.html",target:"_blank",rel:"noopener noreferrer"},Q={href:"https://blog.csdn.net/liu_chen_yang/category_10887074.html",target:"_blank",rel:"noopener noreferrer"},U={href:"https://blog.csdn.net/liu_chen_yang/category_10887074.html",target:"_blank",rel:"noopener noreferrer"},K={href:"https://blog.csdn.net/liu_chen_yang/category_12390514.html",target:"_blank",rel:"noopener noreferrer"},R={href:"https://blog.csdn.net/liu_chen_yang/category_12390514.html",target:"_blank",rel:"noopener noreferrer"},T=n("h2",{id:"相关文章",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#相关文章","aria-hidden":"true"},"#"),e(" 相关文章")],-1),M=n("thead",null,[n("tr",null,[n("th",null,"文章标题"),n("th",null,"文章链接")])],-1),W={href:"https://liucy.blog.csdn.net/article/details/130484944",target:"_blank",rel:"noopener noreferrer"},X={href:"https://liucy.blog.csdn.net/article/details/130484944",target:"_blank",rel:"noopener noreferrer"},Y={href:"https://liucy.blog.csdn.net/article/details/131398113",target:"_blank",rel:"noopener noreferrer"},Z={href:"https://liucy.blog.csdn.net/article/details/131398113",target:"_blank",rel:"noopener noreferrer"},$={href:"https://liucy.blog.csdn.net/article/details/133460612",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://liucy.blog.csdn.net/article/details/133460612",target:"_blank",rel:"noopener noreferrer"},en={href:"https://liucy.blog.csdn.net/article/details/133697104",target:"_blank",rel:"noopener noreferrer"},sn={href:"https://liucy.blog.csdn.net/article/details/133697104",target:"_blank",rel:"noopener noreferrer"},an={href:"https://liucy.blog.csdn.net/article/details/136536352",target:"_blank",rel:"noopener noreferrer"},tn={href:"https://liucy.blog.csdn.net/article/details/136536352",target:"_blank",rel:"noopener noreferrer"},ln={href:"https://liucy.blog.csdn.net/article/details/133460539",target:"_blank",rel:"noopener noreferrer"},on={href:"https://liucy.blog.csdn.net/article/details/133460539",target:"_blank",rel:"noopener noreferrer"},rn={href:"https://liucy.blog.csdn.net/article/details/134717718",target:"_blank",rel:"noopener noreferrer"},cn={href:"https://liucy.blog.csdn.net/article/details/134717718",target:"_blank",rel:"noopener noreferrer"},pn={href:"https://liucy.blog.csdn.net/article/details/136327961",target:"_blank",rel:"noopener noreferrer"},dn={href:"https://liucy.blog.csdn.net/article/details/136327961",target:"_blank",rel:"noopener noreferrer"},un={href:"https://liucy.blog.csdn.net/article/details/133682882",target:"_blank",rel:"noopener noreferrer"},hn={href:"https://liucy.blog.csdn.net/article/details/133682882",target:"_blank",rel:"noopener noreferrer"};function bn(_n,mn){const a=r("ExternalLinkIcon"),t=r("font");return i(),p("div",null,[n("blockquote",null,[u,n("p",null,[e("  🏅"),n("a",h,[e("云计算领域优质创作者"),s(a)]),b,e("   🏅"),n("a",_,[e("华为云开发者社区专家博主"),s(a)]),m,e("   🏅"),n("a",g,[e("阿里云开发者社区专家博主"),s(a)]),k,e(" 💊"),v,n("a",S,[e("运维交流社区"),s(a)]),e(" 欢迎大家的加入！"),f,e(" 🐋 希望大家多多支持，我们一起进步！😄"),y,e(" 🎉如果文章对你有帮助的话，欢迎 点赞 👍🏻 评论 💬 收藏 ⭐️ 加关注+💗")])]),O,H,n("blockquote",null,[n("p",null,[e("文章声明：此文基于实操撰写 生产环境：此文升级是基于9.3p2升级9.4p1"),x,e(" ssh -V查看版本是：OpenSSH_9.3p2, OpenSSL 1.1.1t 7 Feb 2023"),L,e(" 问题关键字："),s(t,{color:"red"},{default:l(()=>[e("OpenSSH 升级, OpenSSH 更新, OpenSSH 漏洞修复")]),_:1}),q,e(" 漏洞信息："),s(t,{color:"red"},{default:l(()=>[e("OpenSSH 命令注入漏洞(CVE-2020-15778)、OpenSSH 安全漏洞(CVE-2023-38408)")]),_:1})])]),w,s(t,{color:"red"},{default:l(()=>[e("注意事项：")]),_:1}),B,C,n("blockquote",null,[n("p",null,[e("7.4p1升级到9.4p1文档："),n("a",E,[e("【Linux】 OpenSSH_7.4p1 升级到 OpenSSH_9.4p1（亲测无问题，建议收藏）"),s(a)])])]),V,n("p",null,[e("OpenSSH官网："),n("a",z,[e("下载官网"),s(a)])]),n("p",null,[e("或者是使用我提供的离线包："),n("a",D,[e("openssh7.4p1 升级到 openssh9.4p1 所需的离线包"),s(a)])]),n("p",null,[A,F,e(" 链接："),n("a",N,[e("https://pan.baidu.com/s/1lqPe1J3wbUuEyA9otQO35g?pwd=open "),s(a)]),j,e(" 提取码：open")]),I,n("table",null,[P,n("tbody",null,[n("tr",null,[n("td",null,[n("a",G,[e("《OpenSSH 系列》"),s(a)])]),n("td",null,[n("a",J,[e("https://blog.csdn.net/liu_chen_yang/category_12463139.html"),s(a)])])]),n("tr",null,[n("td",null,[n("a",Q,[e("《Linux从入门到精通》"),s(a)])]),n("td",null,[n("a",U,[e("https://blog.csdn.net/liu_chen_yang/category_10887074.html"),s(a)])])]),n("tr",null,[n("td",null,[n("a",K,[e("《Linux服务器安全》"),s(a)])]),n("td",null,[n("a",R,[e("https://blog.csdn.net/liu_chen_yang/category_12390514.html"),s(a)])])])])]),T,n("table",null,[M,n("tbody",null,[n("tr",null,[n("td",null,[n("a",W,[e("【Linux】 OpenSSH_7.4p1 升级到 OpenSSH_8.7p1（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",X,[e("https://liucy.blog.csdn.net/article/details/130484944"),s(a)])])]),n("tr",null,[n("td",null,[n("a",Y,[e("【Linux】 OpenSSH_7.4p1 升级到 OpenSSH_9.3p1（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",Z,[e("https://liucy.blog.csdn.net/article/details/131398113"),s(a)])])]),n("tr",null,[n("td",null,[n("a",$,[e("【Linux】 OpenSSH_7.4p1 升级到 OpenSSH_9.3p2（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",nn,[e("https://liucy.blog.csdn.net/article/details/133460612"),s(a)])])]),n("tr",null,[n("td",null,[n("a",en,[e("【Linux】 OpenSSH_7.4p1 升级到 OpenSSH_9.4p1（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",sn,[e("https://liucy.blog.csdn.net/article/details/133697104"),s(a)])])]),n("tr",null,[n("td",null,[n("a",an,[e("【Linux】 OpenSSH_7.4p1 升级到 OpenSSH_9.6p1（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",tn,[e("https://liucy.blog.csdn.net/article/details/136536352"),s(a)])])]),n("tr",null,[n("td",null,[n("a",ln,[e("【Linux】 OpenSSH_9.3p1 升级到 OpenSSH_9.3p2（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",on,[e("https://liucy.blog.csdn.net/article/details/133460539"),s(a)])])]),n("tr",null,[n("td",null,[n("a",rn,[e("【Linux】 OpenSSH_9.3p1 升级到 OpenSSH_9.5p1（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",cn,[e("https://liucy.blog.csdn.net/article/details/134717718"),s(a)])])]),n("tr",null,[n("td",null,[n("a",pn,[e("【Linux】 OpenSSH_9.3p1 升级到 OpenSSH_9.6p1（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",dn,[e("https://liucy.blog.csdn.net/article/details/136327961"),s(a)])])]),n("tr",null,[n("td",null,[n("a",un,[e("【Linux】 OpenSSH_9.3p2 升级到 OpenSSH_9.4p1（亲测无问题，建议收藏）"),s(a)])]),n("td",null,[n("a",hn,[e("https://liucy.blog.csdn.net/article/details/133682882"),s(a)])])])])])])}const vn=c(d,[["render",bn],["__file","【Linux】 OpenSSH_9.3p2 升级到 OpenSSH_9.4p1（亲测无问题，建议收藏）.html.vue"]]);export{vn as default};
