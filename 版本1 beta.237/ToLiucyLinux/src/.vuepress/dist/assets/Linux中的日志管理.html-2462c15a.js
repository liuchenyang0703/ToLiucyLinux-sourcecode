import{_ as l}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as r,c,d as a,w as t,a as n,e as o,b as e}from"./app-6706a352.js";const d={},p=o('<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/202412200948362.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><blockquote><p>/var/log 一般都存在这里面<br> /var/log/messages 系统日志</p></blockquote><p>从CentOs6开始，日志由系统中的rsyslog服务管理<br> 日志存放在/var/log目录下</p><h2 id="相关命令" tabindex="-1"><a class="header-anchor" href="#相关命令" aria-hidden="true">#</a> 相关命令：</h2><blockquote><p>dmesg 查看内核和硬件相关的日志<br><br> last 查看用户登录的记录<br><br> lastlog 查看用户最后一次登录的时间<br><br> lastb 记录用户登录失败的信息<br><br> logrotate 实现日志轮割</p></blockquote><h2 id="日志的级别-9个" tabindex="-1"><a class="header-anchor" href="#日志的级别-9个" aria-hidden="true">#</a> 日志的级别（9个）：</h2><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>0</td><td>emerg 紧急（会导致主机系统不可用）</td></tr><tr><td>1</td><td>alert 警告（必须马上处理）</td></tr><tr><td>2</td><td>crit 严重（比较严重）</td></tr><tr><td>3</td><td>err 错误信息</td></tr><tr><td>4</td><td>warning 提醒（警告）</td></tr><tr><td>5</td><td>notice 注意</td></tr><tr><td>6</td><td>info 一般信息</td></tr><tr><td>7</td><td>debug 程序或系统的调试信息</td></tr><tr><td>8</td><td>none 空，不记录日志</td></tr></tbody></table><h2 id="参考实例" tabindex="-1"><a class="header-anchor" href="#参考实例" aria-hidden="true">#</a> 参考实例：</h2><blockquote><p>在周期计划性任务里写（crontab -e）cp file1 file1-$(date +%Y%m%d) &amp;&amp; &gt;<br> file1【在周期计划性任务中，实现把当前目录下的file1复制一份重新创建一个叫file1-时间（注意date里面的年月日..要加转义\\）然后重定向清空file1】<br><br> 在crontab中%是有特殊含义的，表示换的意思。如果要用的话，必须进行转义%，如经常用的date<br><code>+%Y%m%d</code>在crontab中是不会执行的，应该换成date<code>+\\%Y\\%m\\%d</code></p></blockquote><h2 id="syslog管理" tabindex="-1"><a class="header-anchor" href="#syslog管理" aria-hidden="true">#</a> syslog管理：</h2><p>系统的日志由服务rsyslog管理<br> 日志集中系统:</p>',11),u=o(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
<span class="token punctuation">[</span>root@nginx-1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/rsyslog.conf </span>
 <span class="token number">15</span> <span class="token variable">$ModLoad</span> imudp
 <span class="token number">16</span> <span class="token variable">$UDPServerRun</span> <span class="token number">514</span>

<span class="token punctuation">[</span>root@nginx-1 ~<span class="token punctuation">]</span><span class="token comment">#systemctl restart rsyslog  重启服务</span>

<span class="token comment">#先安装yum -y install net-tools配置网络要用的比如ifconfig</span>
<span class="token punctuation">[</span>root@nginx-1 ~<span class="token punctuation">]</span><span class="token comment">#netstat -anput|grep 514  </span>

<span class="token comment">#查看是否开放514号端口的服务 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),m=o(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#添加服务端信息</span>
<span class="token punctuation">[</span>root@nginx-2 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/rsyslog.conf</span>
	<span class="token number">90</span> *.* @192.168.2.11:514  
	* 所有的服务 <span class="token builtin class-name">.</span> 表示以上级别 * 所有级别 
	@ 表示UDP @@ 表示TCP   服务端ip:端口 

<span class="token comment">#重启rsyslog服务</span>
<span class="token punctuation">[</span>root@nginx-2 ~<span class="token punctuation">]</span><span class="token comment">#systemctl restart rsyslog </span>

<span class="token comment">#测试时使用tail -f 观察服务端/var/log/messages日志的变化</span>
<span class="token punctuation">[</span>root@nginx-2 ~<span class="token punctuation">]</span><span class="token comment">#logger &quot;123123&quot;  产生一条日志测试 </span>
<span class="token punctuation">[</span>root@nginx-2 ~<span class="token punctuation">]</span><span class="token comment">#tailf /var/log/messages</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>. 记录包含该等级及以上级别的信息<br> .= 只记录当前等级的信息<br> ! 除了该等级都记录</p></blockquote>`,2);function b(v,g){const s=i("font");return r(),c("div",null,[a(s,{color:"teal"},{default:t(()=>[e("日志：记录系统中相关的信息 系统日志 程序日志")]),_:1}),p,n("p",null,[n("strong",null,[a(s,{color:"blue"},{default:t(()=>[e("服务端 ：")]),_:1})])]),u,n("p",null,[n("strong",null,[a(s,{color:"blue"},{default:t(()=>[e("客户端：")]),_:1})])]),m])}const f=l(d,[["render",b],["__file","Linux中的日志管理.html.vue"]]);export{f as default};
