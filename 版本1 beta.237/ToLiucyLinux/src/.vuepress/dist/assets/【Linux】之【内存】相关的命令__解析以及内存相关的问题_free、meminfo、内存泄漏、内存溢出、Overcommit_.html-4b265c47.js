import{_ as c}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as r,c as i,a as n,d as a,w as l,b as s,e as o}from"./app-6706a352.js";const u={},d=n("h2",{id:"ä¸€ã€å†…å­˜ç›¸å…³å‘½ä»¤",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ä¸€ã€å†…å­˜ç›¸å…³å‘½ä»¤","aria-hidden":"true"},"#"),s(" ä¸€ã€å†…å­˜ç›¸å…³å‘½ä»¤")],-1),m=n("h3",{id:"_1ã€free-â€“-æ˜¾ç¤ºç³»ç»Ÿå†…å­˜ä½¿ç”¨é‡æƒ…å†µ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1ã€free-â€“-æ˜¾ç¤ºç³»ç»Ÿå†…å­˜ä½¿ç”¨é‡æƒ…å†µ","aria-hidden":"true"},"#"),s(" 1ã€free â€“ æ˜¾ç¤ºç³»ç»Ÿå†…å­˜ä½¿ç”¨é‡æƒ…å†µ")],-1),b=n("blockquote",null,[n("p",null,"freeå‘½ä»¤çš„åŠŸèƒ½æ˜¯æ˜¾ç¤ºç³»ç»Ÿå†…å­˜ä½¿ç”¨é‡æƒ…å†µï¼ŒåŒ…å«ç‰©ç†å’Œäº¤æ¢å†…å­˜çš„æ€»é‡ã€ä½¿ç”¨é‡å’Œç©ºé—²é‡æƒ…å†µã€‚")],-1),k=o(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">free</span> <span class="token punctuation">[</span>å‚æ•°<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),v=o("<table><thead><tr><th>å‚æ•°</th><th>è§£æ</th></tr></thead><tbody><tr><td>-b</td><td>ä»¥Byteæ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ</td></tr><tr><td>-k</td><td>ä»¥kbä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ</td></tr><tr><td>-m</td><td>ä»¥mbä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ</td></tr><tr><td>-g</td><td>ä»¥gbä¸ºå•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ</td></tr><tr><td>-s</td><td>æŒç»­æ˜¾ç¤ºå†…å­˜</td></tr><tr><td>-t</td><td>æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æ€»åˆ</td></tr><tr><td>-h</td><td>ä»¥æ˜“è¯»çš„å•ä½æ–¹å¼æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ</td></tr></tbody></table>",1),h=o(`<p>ä»¥é»˜è®¤çš„å®¹é‡å•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨é‡ä¿¡æ¯ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># free</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:       <span class="token number">65353144</span>     <span class="token number">8354168</span>    <span class="token number">53956676</span>       <span class="token number">39716</span>     <span class="token number">3042300</span>    <span class="token number">56522796</span>
Swap:             <span class="token number">0</span>           <span class="token number">0</span>           <span class="token number">0</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥MBä½å•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨é‡ä¿¡æ¯ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># free -m</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:          <span class="token number">63821</span>        <span class="token number">8154</span>       <span class="token number">52696</span>          <span class="token number">38</span>        <span class="token number">2971</span>       <span class="token number">55202</span>
Swap:             <span class="token number">0</span>           <span class="token number">0</span>           <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥æ˜“è¯»çš„å•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨é‡ä¿¡æ¯ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># free -h</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:            62G        <span class="token number">8</span>.0G         51G         38M        <span class="token number">2</span>.9G         53G
Swap:            0B          0B          0B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»¥æ˜“è¯»çš„å•ä½æ˜¾ç¤ºå†…å­˜ä½¿ç”¨é‡ä¿¡æ¯ï¼Œæ¯ä¸ª10ç§’åˆ·æ–°ä¸€æ¬¡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># free -hs 10</span>
              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:            62G        <span class="token number">8</span>.0G         51G         38M        <span class="token number">2</span>.9G         53G
Swap:            0B          0B          0B

              total        used        <span class="token function">free</span>      shared  buff/cache   available
Mem:            62G        <span class="token number">8</span>.0G         51G         38M        <span class="token number">2</span>.9G         53G
Swap:            0B          0B          0B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),_=n("br",null,null,-1),f=n("br",null,null,-1),g=n("br",null,null,-1),B=n("br",null,null,-1),y=n("br",null,null,-1),x=o(`<h3 id="_2ã€cat-proc-meminfo" tabindex="-1"><a class="header-anchor" href="#_2ã€cat-proc-meminfo" aria-hidden="true">#</a> 2ã€cat /proc/meminfo</h3><blockquote><p>meminfoä¸­åŒ…å«æ‰€æœ‰çš„å†…å­˜ç›¸å…³ä¿¡æ¯ã€‚</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/meminfo </span>
MemTotal:       <span class="token number">65353144</span> kB
MemFree:        <span class="token number">53956672</span> kB
MemAvailable:   <span class="token number">56523144</span> kB
Buffers:           <span class="token number">49180</span> kB
Cached:          <span class="token number">2889216</span> kB
SwapCached:            <span class="token number">0</span> kB
Active:          <span class="token number">7603092</span> kB
Inactive:        <span class="token number">2691064</span> kB
Active<span class="token punctuation">(</span>anon<span class="token punctuation">)</span>:    <span class="token number">7356648</span> kB
Inactive<span class="token punctuation">(</span>anon<span class="token punctuation">)</span>:    <span class="token number">38800</span> kB
Active<span class="token punctuation">(</span>file<span class="token punctuation">)</span>:     <span class="token number">246444</span> kB
Inactive<span class="token punctuation">(</span>file<span class="token punctuation">)</span>:  <span class="token number">2652264</span> kB
Unevictable:           <span class="token number">0</span> kB
Mlocked:               <span class="token number">0</span> kB
SwapTotal:             <span class="token number">0</span> kB
SwapFree:              <span class="token number">0</span> kB
Dirty:                <span class="token number">36</span> kB
Writeback:             <span class="token number">0</span> kB
AnonPages:       <span class="token number">7360372</span> kB
Mapped:           <span class="token number">764500</span> kB
Shmem:             <span class="token number">39684</span> kB
Slab:             <span class="token number">306384</span> kB
SReclaimable:     <span class="token number">104216</span> kB
SUnreclaim:       <span class="token number">202168</span> kB
KernelStack:       <span class="token number">22464</span> kB
PageTables:        <span class="token number">30644</span> kB
NFS_Unstable:          <span class="token number">0</span> kB
Bounce:                <span class="token number">0</span> kB
WritebackTmp:          <span class="token number">0</span> kB
CommitLimit:    <span class="token number">32676572</span> kB <span class="token comment">#ç³»ç»Ÿä¸­å¯ä»¥ç”³è¯·çš„è™šæ‹Ÿå†…å­˜æœ€å¤§å€¼</span>
Committed_AS:   <span class="token number">27883644</span> kB <span class="token comment">#ç³»ç»Ÿå·²ç»ç”³è¯·çš„è™šæ‹Ÿå†…å­˜</span>
VmallocTotal:   <span class="token number">34359738367</span> kB
VmallocUsed:      <span class="token number">525916</span> kB
VmallocChunk:   <span class="token number">34325372924</span> kB
HardwareCorrupted:     <span class="token number">0</span> kB
AnonHugePages:   <span class="token number">4573184</span> kB
CmaTotal:              <span class="token number">0</span> kB
CmaFree:               <span class="token number">0</span> kB
HugePages_Total:       <span class="token number">0</span>
HugePages_Free:        <span class="token number">0</span>
HugePages_Rsvd:        <span class="token number">0</span>
HugePages_Surp:        <span class="token number">0</span>
Hugepagesize:       <span class="token number">2048</span> kB
DirectMap4k:      <span class="token number">771124</span> kB
DirectMap2M:    <span class="token number">11393024</span> kB
DirectMap1G:    <span class="token number">56623104</span> kB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äºŒã€å†…å­˜ç›¸å…³é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#äºŒã€å†…å­˜ç›¸å…³é—®é¢˜" aria-hidden="true">#</a> äºŒã€å†…å­˜ç›¸å…³é—®é¢˜</h2><h3 id="_1ã€å†…å­˜æ³„æ¼" tabindex="-1"><a class="header-anchor" href="#_1ã€å†…å­˜æ³„æ¼" aria-hidden="true">#</a> 1ã€å†…å­˜æ³„æ¼</h3><p>è§£æï¼š</p><blockquote><p>å¦‚æœç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½æ­£å¸¸å›æ”¶ä¸ç”¨çš„å†…å­˜ï¼Œé‚£ä¹ˆä¸€æ®µæ—¶é—´å°±ä¼šå¯¼è‡´å†…å­˜å¢é•¿å¾ˆé«˜ï¼Œæœ€ç»ˆå¯¼è‡´ç³»ç»Ÿä¸å¯ä»¥ç”¨ï¼Œè¿™ç§æƒ…å†µç§°ä¸ºå†…å­˜æ³„æ¼ã€‚</p></blockquote><p>å†…å­˜æ³„æ¼å¯ä»¥ä½¿ç”¨å†…å­˜åˆ†äº«å·¥å…·valgrindè¿›è¡Œå†…å­˜åˆ†æã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># yum -y install valgrind</span>
<span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># valgrind --tool=memcheck  ./mem_leak -t</span>
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> Memcheck, a memory error detector
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span>-2017, and GNU GPL&#39;d, by Julian Seward et al.
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> Using Valgrind-3.13.0 and LibVEX<span class="token punctuation">;</span> rerun with <span class="token parameter variable">-h</span> <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> Command: ./mem_leak <span class="token parameter variable">-t</span>
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> HEAP SUMMARY:
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span>     <span class="token keyword">in</span> use at exit: <span class="token number">4</span> bytes <span class="token keyword">in</span> <span class="token number">1</span> blocks
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span>   total heap usage: <span class="token number">1</span> allocs, <span class="token number">0</span> frees, <span class="token number">4</span> bytes allocated
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> LEAK SUMMARY:
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span>    definitely lost: <span class="token number">4</span> bytes <span class="token keyword">in</span> <span class="token number">1</span> blocks
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span>    indirectly lost: <span class="token number">0</span> bytes <span class="token keyword">in</span> <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span>      possibly lost: <span class="token number">0</span> bytes <span class="token keyword">in</span> <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span>    still reachable: <span class="token number">0</span> bytes <span class="token keyword">in</span> <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span>         suppressed: <span class="token number">0</span> bytes <span class="token keyword">in</span> <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> Rerun with --leak-check<span class="token operator">=</span>full to see details of leaked memory
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> For counts of detected and suppressed errors, rerun with: <span class="token parameter variable">-v</span>
<span class="token operator">==</span><span class="token number">1738</span><span class="token operator">==</span> ERROR SUMMARY: <span class="token number">0</span> errors from <span class="token number">0</span> contexts <span class="token punctuation">(</span>suppressed: <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€è™šæ‹Ÿå†…å­˜ã€ç‰©ç†å†…å­˜" tabindex="-1"><a class="header-anchor" href="#_2ã€è™šæ‹Ÿå†…å­˜ã€ç‰©ç†å†…å­˜" aria-hidden="true">#</a> 2ã€è™šæ‹Ÿå†…å­˜ã€ç‰©ç†å†…å­˜</h3><p>å†…å­˜çš„æœ€å°å•ä½ä¸ºé¡µï¼ˆpagingï¼‰,é»˜è®¤æƒ…å†µä¸€é¡µæ˜¯4Kã€‚</p><ul><li>è™šæ‹Ÿå†…å­˜ä¸ç‰©ç†å†…å­˜</li></ul><p>â€ƒâ€ƒå½“è¿›ç¨‹å‘æ“ä½œç³»ç»Ÿç”³è¯·10Gå†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ”¶åˆ°è¯·æ±‚åå…ˆè¿›è¡Œè‡ªæˆ‘æ£€æŸ¥ï¼Œç»è¿‡åˆ†æåå†³å®šç»™äºˆè¿›ç¨‹10Gå†…å­˜ç©ºé—´ï¼Œä½†æ˜¯ç³»ç»Ÿæ­¤æ—¶å¹¶æ²¡æœ‰çœŸæ­£ç»™è¿›ç¨‹10Gï¼Œç³»ç»Ÿä¼šåˆ¤æ–­è¿›ç¨‹è¿è¡Œå®é™…éœ€è¦çš„å†…å­˜å¤§å°ï¼Œæ¯”å¦‚è¯¥è¿›ç¨‹éœ€è¦300Må°±å¤Ÿç”¨äº†ï¼Œæ‰€ä»¥ç³»ç»Ÿåªåˆ’åˆ†300Må†…å­˜ç»™è¿›ç¨‹è¿è¡Œï¼Œè¿™ç§å®é™…åˆ†é…çš„å†…å­˜ç§°ä¸ºç‰©ç†å†…å­˜ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># ps aux|head -1</span>
<span class="token environment constant">USER</span>        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
<span class="token comment">#VSZ è™šæ‹Ÿå†…å­˜</span>
<span class="token comment">#RSS ç‰©ç†å†…å­˜</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€å†…å­˜æº¢å‡º" tabindex="-1"><a class="header-anchor" href="#_3ã€å†…å­˜æº¢å‡º" aria-hidden="true">#</a> 3ã€å†…å­˜æº¢å‡º</h3><blockquote><p>å†…å­˜æº¢å‡ºï¼ˆout of memoryï¼ŒOOMï¼‰ï¼Œå½“è¿›ç¨‹è¿è¡Œå‘ç³»ç»Ÿç”³è¯·å†…å­˜æ—¶ï¼Œç³»ç»Ÿæ²¡æœ‰æ›´å¤šçš„è¿›ç¨‹åˆ†é…ç»™è¯¥è¿›ç¨‹äº†ï¼Œå°±ä¼šå‡ºç°å†…å­˜æº¢å‡ºã€‚å†…å­˜æº¢å‡ºåç³»ç»Ÿä¼šæ€æ‰ç³»ç»Ÿä¸­çš„ä¸€äº›è¿›ç¨‹æ¥é‡Šæ”¾å†…å­˜ï¼Œé€šå¸¸OOM Killeræ€æ­»çš„éƒ½æ˜¯å ç”¨å†…å­˜è¾ƒå¤šçš„æœåŠ¡ï¼Œç›´åˆ°å†…å­˜å¤Ÿç”¨ä¸ºæ­¢ï¼Œæ‰€ä»¥å†…å­˜æº¢å‡ºçš„ç›´è§‚ç°è±¡é€šå¸¸æ˜¯æŸäº›æœåŠ¡å¼‚å¸¸æˆ–å®•æœºã€‚å½“å‘ç”Ÿå†…å­˜æº¢å‡ºåå¯ä»¥é€šè¿‡dmesgå‘½ä»¤æˆ–è€…é€šè¿‡/var/log/messagesæ¥å¿«é€Ÿç¡®å®šã€‚</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># dmesg |tail -5</span>
<span class="token punctuation">[</span> <span class="token number">3613.796390</span><span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token number">1277</span><span class="token punctuation">]</span>     <span class="token number">0</span>  <span class="token number">1277</span>    <span class="token number">28983</span>        <span class="token number">1</span>      <span class="token number">16</span>      <span class="token number">217</span>             <span class="token number">0</span> <span class="token function">bash</span>
<span class="token punctuation">[</span> <span class="token number">3613.796393</span><span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token number">1446</span><span class="token punctuation">]</span>     <span class="token number">0</span>  <span class="token number">1446</span>    <span class="token number">29003</span>        <span class="token number">0</span>      <span class="token number">16</span>      <span class="token number">221</span>             <span class="token number">0</span> <span class="token function">bash</span>
<span class="token punctuation">[</span> <span class="token number">3613.796395</span><span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token number">1546</span><span class="token punctuation">]</span>     <span class="token number">0</span>  <span class="token number">1546</span>   <span class="token number">774216</span>   <span class="token number">213712</span>    <span class="token number">1439</span>   <span class="token number">513149</span>             <span class="token number">0</span> python
<span class="token punctuation">[</span> <span class="token number">3613.796396</span><span class="token punctuation">]</span> Out of memory: Kill process <span class="token number">1546</span> <span class="token punctuation">(</span>python<span class="token punctuation">)</span> score <span class="token number">912</span> or sacrifice child
<span class="token punctuation">[</span> <span class="token number">3613.796422</span><span class="token punctuation">]</span> Killed process <span class="token number">1546</span> <span class="token punctuation">(</span>python<span class="token punctuation">)</span> total-vm:3096864kB, anon-rss:854848kB, file-rss:0kB, shmem-rss:0kB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># cat /proc/sys/vm/panic_on_oom </span>
<span class="token number">0</span>
<span class="token punctuation">[</span>root@root ~<span class="token punctuation">]</span><span class="token comment"># echo 1 &gt; /proc/sys/vm/panic_on_oom</span>

panic_on_oomè¯¥å‚æ•°çš„å€¼å…±æœ‰ä¸‰ä¸ªé€‰é¡¹:
<span class="token number">0</span>æ˜¯è§¦å‘oom killerè¿›è¡Œæ€è¿›ç¨‹å¤„ç†<span class="token punctuation">(</span>/proc/sys/vm/oom_kill_allocating_taské»˜è®¤å€¼ä¸º0ï¼Œç»“æŸå ç”¨å†…å­˜å¤šçš„è¿›ç¨‹<span class="token punctuation">;</span>å¦‚æœè®¾ç½®ä¸º1,å°±æ€æ­»å½“å‰ç”³è¯·å†…å­˜çš„è¿›ç¨‹<span class="token punctuation">)</span>
<span class="token number">2</span>æ˜¯ç›´æ¥è§¦å‘kernel panicï¼ˆç±»ä¼¼äºWindowsçš„è“å±ï¼‰ï¼Œæ­¤æ—¶ç³»ç»Ÿå¼€å‘äººå‘˜å¯ä»¥è¿æ¥è¿›è¡Œdebug,ä½†æ˜¯å¯¹å…¶ä»–äººå¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ã€‚æ›´å¤šå¸Œæœ›ç³»ç»Ÿå¿«é€Ÿé‡å¯ï¼ˆ/proc/sys/kernel/panicè®¾ç½®å¤šå°‘ç§’åé‡å¯ï¼‰
<span class="token number">1</span>æ˜¯æ ¹æ®ä¸åŒæƒ…å†µä¼šæœ‰ä¸åŒå¤„ç†<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4ã€overcommit" tabindex="-1"><a class="header-anchor" href="#_4ã€overcommit" aria-hidden="true">#</a> 4ã€Overcommit</h3><blockquote><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿›ç¨‹å¹¶ä¸ä¼šä¸€æ¬¡ç”¨å…‰ç”³è¯·çš„å†…å­˜ï¼Œæ‰€ä»¥æ“ä½œç³»ç»Ÿä¸ºäº†æé«˜å†…å­˜ä½¿ç”¨ç‡ï¼Œä¼šå‘è¿›ç¨‹â€œè¶…å–â€å†…å­˜ï¼Œä»¥ä¾¿èƒ½å“åº”æ›´å¤šçš„è¿›ç¨‹å†…å­˜ç”³è¯·ã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯ç¨‹åºçš„ç¨³å®šè¿è¡Œï¼Œç³»ç»Ÿå¹¶ä¸ä¼šæ— é™åˆ¶å“åº”å†…å­˜ç”³è¯·ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å†…å­˜ç”³è¯·è¿‡å¤šï¼Œå¯¼è‡´ç³»ç»Ÿæœ¬èº«å†…å­˜ç©ºé—´ä¸è¶³è€Œæ— æ³•æ­£å¸¸è¿è¡Œã€‚Linuxç³»ç»Ÿä¸­ä½¿ç”¨OverCommitçš„æ–¹å¼æ§åˆ¶å†…å­˜çš„ç”³è¯·ã€‚</p></blockquote><blockquote><p>å†…æ ¸å‚æ•°overcommit_memory å†…å­˜åˆ†é…ç­–ç•¥<br> å¯é€‰å€¼ï¼š0ã€1ã€2ã€‚<br> 0ï¼Œ è¡¨ç¤ºå†…æ ¸å°†æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ä¾›åº”ç”¨è¿›ç¨‹ä½¿ç”¨ï¼›å¦‚æœæœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜ï¼Œå†…å­˜ç”³è¯·å…è®¸ï¼›å¦åˆ™ï¼Œå¼•å‘OOMã€‚<br> 1ï¼Œ è¡¨ç¤ºå†…æ ¸å…è®¸åˆ†é…æ‰€æœ‰çš„ç‰©ç†å†…å­˜ï¼Œè€Œä¸ç®¡å½“å‰çš„å†…å­˜çŠ¶æ€å¦‚ä½•ã€‚<br> 2ï¼Œ è¡¨ç¤ºå†…æ ¸ä¸å…è®¸è¿›ç¨‹ç”³è¯·è¶…è¿‡ç³»ç»Ÿè®¾ç½®å¤§å°çš„å†…å­˜ç©ºé—´ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç³»ç»Ÿè®¾ç½®çš„å¯ç”³è¯·å†…å­˜ç©ºé—´å¤§å°ä¸ºï¼šSwap+RAM*(â€œ/proc/sys/vm/overcommit_ratioâ€/100)<br> è¯´æ˜:/proc/sys/vm/overcommit_ratioå°±æ˜¯ç³»ç»Ÿæœ€å¤§å¯ä»¥åˆ†é…å†…å­˜çš„ç™¾åˆ†æ¯”ï¼Œé»˜è®¤æ˜¯50.</p></blockquote><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><h2 id="ç›¸å…³æ–‡ç« " tabindex="-1"><a class="header-anchor" href="#ç›¸å…³æ–‡ç« " aria-hidden="true">#</a> â€ƒç›¸å…³æ–‡ç« </h2>`,23),M={href:"https://blog.csdn.net/liu_chen_yang/article/details/125143646",target:"_blank",rel:"noopener noreferrer"},S=n("hr",null,null,-1),w={href:"https://blog.csdn.net/liu_chen_yang/article/details/125146057",target:"_blank",rel:"noopener noreferrer"},G=n("hr",null,null,-1),C={href:"https://blog.csdn.net/liu_chen_yang/article/details/125256901?spm=1001.2014.3001.5501",target:"_blank",rel:"noopener noreferrer"},A=n("hr",null,null,-1),L={href:"https://blog.csdn.net/liu_chen_yang/article/details/125146080",target:"_blank",rel:"noopener noreferrer"},T=n("hr",null,null,-1),O={href:"https://blog.csdn.net/liu_chen_yang/article/details/125146126",target:"_blank",rel:"noopener noreferrer"},R=n("hr",null,null,-1),q={href:"https://blog.csdn.net/liu_chen_yang/article/details/125169987",target:"_blank",rel:"noopener noreferrer"},P=n("hr",null,null,-1);function U(V,E){const t=p("font"),e=p("ExternalLinkIcon");return r(),i("div",null,[d,m,b,n("p",null,[n("strong",null,[a(t,{color:"teal"},{default:l(()=>[s("è¯­æ³•æ ¼å¼")]),_:1})])]),k,n("p",null,[n("strong",null,[a(t,{color:"teal"},{default:l(()=>[s("å¸¸ç”¨å‚æ•°")]),_:1})])]),v,n("p",null,[n("strong",null,[a(t,{color:"teal"},{default:l(()=>[s("å‚è€ƒå®ä¾‹")]),_:1})])]),h,n("blockquote",null,[n("p",null,[n("strong",null,[a(t,{color:"orager"},{default:l(()=>[s("å­—æ®µè§£æ")]),_:1})])]),a(t,{color:"red"},{default:l(()=>[s("#totalï¼šç‰©ç†å†…å­˜å¤§å°ï¼Œå°±æ˜¯æœºå™¨å®é™…çš„å†…å­˜"),_,s(" #usedï¼šå·²ä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œè¿™ä¸ªå€¼åŒ…æ‹¬äº†cachedå’Œåº”ç”¨ç¨‹åºå®é™…ä½¿ç”¨çš„å†…å­˜"),f,s(" #freeï¼šæœªè¢«ä½¿ç”¨çš„å†…å­˜å¤§å°ï¼ˆä¿—ç§°ï¼šç©ºé—²å†…å­˜ï¼‰"),g,s(" #sharedï¼šå…±äº«å†…å­˜å¤§å°ï¼Œæ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼"),B,s(" #buffersï¼šè¢«ç¼“å†²åŒºå ç”¨çš„å†…å­˜å¤§å°"),y,s(" #cachedï¼šè¢«ç¼“å­˜å ç”¨çš„å†…å­˜å¤§å°")]),_:1})]),x,n("blockquote",null,[n("p",null,[s("ğŸ’»"),n("a",M,[s("ã€Linuxã€‘ä¹‹ã€CPUã€‘ç›¸å…³çš„å‘½ä»¤åŠè§£æ[lscpuã€mpstat]"),a(e)])]),S,n("p",null,[s("ğŸ’»"),n("a",w,[s("ã€Linuxã€‘ä¹‹ã€å†…å­˜ã€‘ç›¸å…³çš„å‘½ä»¤&&è§£æä»¥åŠå†…å­˜ç›¸å…³çš„é—®é¢˜[freeã€meminfoã€å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡ºã€Overcommit]"),a(e)])]),G,n("p",null,[s("ğŸ’»"),n("a",C,[s("ã€Linuxã€‘ä¹‹ã€ç£ç›˜ã€‘ç›¸å…³çš„å‘½ä»¤åŠè§£æ[dfã€duã€iostatã€iotop]"),a(e)])]),A,n("p",null,[s("ğŸ’»"),n("a",L,[s("ã€Linuxã€‘ä¹‹ã€ç½‘ç»œã€‘ç›¸å…³çš„å‘½ä»¤åŠè§£æ[ethtoolã€nloadã€nethogsã€iftopã€iptrafã€ifstat]"),a(e)])]),T,n("p",null,[s("ğŸ’»"),n("a",O,[s("ã€Linuxã€‘ç»¼åˆæ€§å‘½ä»¤åŠè§£æã€topã€htopã€vmstatã€dstatã€glancesã€sarã€‘"),a(e)])]),R,n("p",null,[s("ğŸ’»"),n("a",q,[s("ã€Linuxã€‘ç³»ç»Ÿå¦‚ä½•æŸ¥çœ‹æœåŠ¡å™¨å¸¦å®½åŠç½‘ç»œä½¿ç”¨æƒ…å†µ"),a(e)])]),P])])}const N=c(u,[["render",U],["__file","ã€Linuxã€‘ä¹‹ã€å†…å­˜ã€‘ç›¸å…³çš„å‘½ä»¤__è§£æä»¥åŠå†…å­˜ç›¸å…³çš„é—®é¢˜_freeã€meminfoã€å†…å­˜æ³„æ¼ã€å†…å­˜æº¢å‡ºã€Overcommit_.html.vue"]]);export{N as default};
