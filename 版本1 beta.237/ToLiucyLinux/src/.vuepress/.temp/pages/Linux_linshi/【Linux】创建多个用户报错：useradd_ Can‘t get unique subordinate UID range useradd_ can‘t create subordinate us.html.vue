<template><div><blockquote>
<p>ğŸ‘¨â€ğŸ“<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº<ExternalLinkIcon/></a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼<br>
ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„<br>
ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—</p>
</blockquote>
<hr>
<h2 id="æŠ¥é”™æ•°æ®" tabindex="-1"><a class="header-anchor" href="#æŠ¥é”™æ•°æ®" aria-hidden="true">#</a> æŠ¥é”™æ•°æ®</h2>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>useradd: Can<span class="token string">'t get unique subordinate UID range
useradd: can'</span>t create subordinate user IDs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æŠ¥é”™åŸå› " tabindex="-1"><a class="header-anchor" href="#æŠ¥é”™åŸå› " aria-hidden="true">#</a> æŠ¥é”™åŸå› </h2>
<blockquote>
<p>è¿™ä¸ªæŠ¥é”™æ˜¯å› ä¸ºï¼šè¿™æ˜¯ç”±äºåœ¨åˆ›å»ºæ–°ç”¨æˆ·æ—¶ï¼Œç³»ç»Ÿæ— æ³•ä¸ºå…¶åˆ†é…å”¯ä¸€çš„ç”¨æˆ·IDèŒƒå›´ï¼ˆUID rangeï¼‰æ‰€å¯¼è‡´çš„é”™è¯¯ã€‚å¯èƒ½æ˜¯ç”±äºç³»ç»Ÿä¸­å·²ç»å­˜åœ¨äº†å¤ªå¤šçš„ç”¨æˆ·ï¼Œå¯¼è‡´UIDå·²ç»å…¨éƒ¨è¢«ä½¿ç”¨å®Œæ¯•ï¼Œæ²¡æœ‰å¯ç”¨çš„èŒƒå›´æ¥åˆ†é…ç»™æ–°ç”¨æˆ·ã€‚è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•æ˜¯éœ€è¦æ‰‹åŠ¨ä¸ºæ–°ç”¨æˆ·åˆ†é…ä¸€ä¸ªå¯ç”¨çš„UIDèŒƒå›´ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹â€œ/etc/login.defsâ€æ–‡ä»¶ä¸­çš„â€œUID_MINâ€å’Œâ€œUID_MAXâ€å€¼æ¥å¢åŠ å¯ç”¨çš„UIDèŒƒå›´ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åˆ é™¤ä¸€äº›ä¸å¿…è¦çš„ç”¨æˆ·æ¥é‡Šæ”¾ä¸€äº›UIDèŒƒå›´ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™ä¸ªæ˜¯å› ä¸ºéœ€è¦åœ¨æœåŠ¡å™¨ä¸­åˆ›å»º20000ä¸ªç”¨æˆ·ï¼Œä½†æ˜¯è·‘åˆ°äº†8000å¤šä¸ªå°±å¼€å§‹æŠ¥é”™ã€‚</p>
</blockquote>
<h2 id="è§£å†³æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#è§£å†³æ–¹æ³•" aria-hidden="true">#</a> è§£å†³æ–¹æ³•</h2>
<p>ç¼–è¾‘/etc/login.defsï¼Œå°†ä»¥ä¸‹ä»£ç è¿½åŠ åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@locahost ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/login.defs</span>
SUB_UID_MIN   <span class="token number">100000</span>
SUB_UID_MAX   <span class="token number">2000000000</span>
SUB_UID_COUNT <span class="token number">65536</span>
SUB_GID_MIN   <span class="token number">100000</span>
SUB_GID_MAX   <span class="token number">20000000000</span>
SUB_GID_COUNT <span class="token number">65536</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•" aria-hidden="true">#</a> æµ‹è¯•</h2>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">useradd</span> <span class="token parameter variable">-g</span> mailgroup <span class="token parameter variable">-s</span> /sbin/nologin cs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æµ‹è¯•å®Œæˆã€‚</p>
<h2 id="é™„åŠ -linuxåˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç åŠé‚®ä»¶ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#é™„åŠ -linuxåˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç åŠé‚®ä»¶ç³»ç»Ÿ" aria-hidden="true">#</a> é™„åŠ ï¼šLinuxåˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç åŠé‚®ä»¶ç³»ç»Ÿ</h2>
<p>åˆ›å»º20000ä¸ªç”¨æˆ·ï¼Œå¹¶è®¾ç½®å¯†ç ï¼Œå’Œåˆ›å»ºmailé‚®ä»¶ç³»ç»Ÿã€‚</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">while</span> <span class="token builtin class-name">read</span> username<span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token function">useradd</span> <span class="token parameter variable">-g</span> mail <span class="token parameter variable">-s</span> /sbin/nologin <span class="token variable">$username</span>
        <span class="token builtin class-name">echo</span> <span class="token number">123456</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> <span class="token variable">$username</span>
        <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/<span class="token variable">$username</span>/mail/.imap/INBOX
        <span class="token function">chown</span> <span class="token parameter variable">-R</span> <span class="token variable">$username</span>:mailgroup  /home/<span class="token variable">$username</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> /root/username.txt
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token function">cat</span> /root/username.txt <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> username<span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token function">useradd</span> <span class="token parameter variable">-g</span> mail <span class="token parameter variable">-s</span> /sbin/nologin <span class="token variable">$username</span>
        <span class="token builtin class-name">echo</span> <span class="token number">123456</span> <span class="token operator">|</span> <span class="token function">passwd</span> <span class="token parameter variable">--stdin</span> <span class="token variable">$username</span>
        <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/<span class="token variable">$username</span>/mail/.imap/INBOX
        <span class="token function">chown</span> <span class="token parameter variable">-R</span> <span class="token variable">$username</span>:mailgroup  /home/<span class="token variable">$username</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


