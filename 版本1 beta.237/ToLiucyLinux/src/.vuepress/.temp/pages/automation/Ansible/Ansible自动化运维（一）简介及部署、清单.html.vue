<template><div><blockquote>
<p>ğŸ‘¨â€ğŸ“<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº<ExternalLinkIcon/></a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼<br>
ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„<br>
ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—</p>
</blockquote>
<h2 id="ä¸€ã€è‡ªåŠ¨åŒ–è¿ç»´" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€è‡ªåŠ¨åŒ–è¿ç»´" aria-hidden="true">#</a> ä¸€ã€è‡ªåŠ¨åŒ–è¿ç»´</h2>
<h3 id="_1-1-ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–è¿ç»´" tabindex="-1"><a class="header-anchor" href="#_1-1-ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–è¿ç»´" aria-hidden="true">#</a> 1.1 ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–è¿ç»´</h3>
<p>â€ƒâ€ƒè‡ªåŠ¨åŒ–è¿ç»´æ˜¯æŒ‡å°†æ—¥å¸¸è¿ç»´çš„ã€å¤§é‡çš„é‡å¤æ€§å·¥ä½œè‡ªåŠ¨åŒ–ï¼ŒæŠŠæ‰‹å·¥æ‰§è¡Œçš„å·¥ä½œï¼Œé€šè¿‡æ¢³ç†åˆ†æï¼Œè¿›è¡Œé€»è¾‘åˆ†è§£ï¼Œå€ŸåŠ©å¹³å°æˆ–å·¥å…·è½¬ä¸ºè‡ªåŠ¨åŒ–æ“ä½œã€‚è‡ªåŠ¨åŒ–æ˜¯ITè¿ç»´å·¥ä½œçš„å‡åï¼ŒITè¿ç»´è‡ªåŠ¨åŒ–ä¸å•çº¯æ˜¯ä¸€ä¸ªç»´æŠ¤è¿‡ç¨‹ï¼Œæ›´æ˜¯ä¸€ä¸ªç®¡ç†çš„æå‡è¿‡ç¨‹ï¼Œæ˜¯è¿ç»´çš„æ›´é«˜å±‚æ¬¡ï¼Œä¹Ÿæ˜¯æœªæ¥çš„å‘å±•è¶‹åŠ¿ã€‚</p>
<h3 id="_1-2-è¿ç»´è‡ªåŠ¨åŒ–è§£å†³çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_1-2-è¿ç»´è‡ªåŠ¨åŒ–è§£å†³çš„é—®é¢˜" aria-hidden="true">#</a> 1.2 è¿ç»´è‡ªåŠ¨åŒ–è§£å†³çš„é—®é¢˜</h3>
<ul class="task-list-container">
<li class="task-list-item">
<p><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> é¡¹ç›®æ•´ä½“å·¥ä½œæ•ˆç‡æå‡ï¼›</label></p>
</li>
<li class="task-list-item">
<p><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> å‡å°‘äººä¸ºè¯¯æ“ä½œï¼›</label></p>
</li>
<li class="task-list-item">
<p><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> æ–¹ä¾¿ä¿¡æ¯ä¼ é€’ï¼Œé…ç½®ç±»ä¿¡æ¯èšåˆï¼Œä¿¡æ¯é“¾æ›´å®Œæ•´ï¼›</label></p>
</li>
<li class="task-list-item">
<p><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> äº‹åŠ¡ç•™ç—•ï¼Œæ–¹ä¾¿è·Ÿè¸ªï¼Œè¿½è¿°ï¼›</label></p>
</li>
<li class="task-list-item">
<p><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-4"> è¿ç»´å·¥ä½œæ›´åŠ è½»æ¾ã€çµåŠ¨ï¼›</label></p>
</li>
<li class="task-list-item">
<p><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-5"> æå‡è¿ç»´å·¥ä½œä»·å€¼ï¼Œç®¡ç†æ›´å¤šèµ„æºï¼Œæ›´å¤šæœåŠ¡å¯¹è±¡ï¼›</label></p>
</li>
</ul>
<h3 id="_1-3-è‡ªåŠ¨åŒ–è¿ç»´åˆ†ç±»å·¥å…·" tabindex="-1"><a class="header-anchor" href="#_1-3-è‡ªåŠ¨åŒ–è¿ç»´åˆ†ç±»å·¥å…·" aria-hidden="true">#</a> 1.3 è‡ªåŠ¨åŒ–è¿ç»´åˆ†ç±»å·¥å…·</h3>
<ul>
<li>
<p>ç³»ç»Ÿå®‰è£…ï¼š<font color=red>PXEï¼ŒCobbler</font></p>
</li>
<li>
<p>åº”ç”¨ç¨‹åºé…ç½®ï¼š<font color=red>Puppetï¼ŒAnsibleï¼ŒSaltstack</font></p>
</li>
<li>
<p>å‘½ä»¤æ‰§è¡Œä¸æ§åˆ¶ï¼š<font color=red>Fabricï¼ŒFuncï¼ŒAnsible</font></p>
</li>
<li>
<p>ç¨‹åºå‘å¸ƒï¼š<font color=red>git/svn(ç‰ˆæœ¬ç®¡ç†)ï¼ŒJenkins/Gitlab-runner(æŒç»­é›†æˆ)	</font></p>
</li>
</ul>
<h3 id="_1-4-è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_1-4-è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·å¯¹æ¯”" aria-hidden="true">#</a> 1.4 è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·å¯¹æ¯”</h3>
<p>æ­¤å¤„åªå¯¹æ¯”Puppetï¼ŒAnsibleï¼ŒSaltstack</p>
<table>
<thead>
<tr>
<th></th>
<th>Puppet</th>
<th>Saltstack</th>
<th>Ansible</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¼€å‘è¯­è¨€</td>
<td>Rubyè¯­è¨€</td>
<td>Pythonè¯­è¨€</td>
<td>Pythonè¯­è¨€</td>
</tr>
<tr>
<td>æ˜¯å¦æ”¯æŒå®¢æˆ·ç«¯</td>
<td>æœ‰</td>
<td>æœ‰ï¼ˆsalt-sshæ— å®¢æˆ·ç«¯ï¼‰</td>
<td>æ— </td>
</tr>
<tr>
<td>æ˜¯å¦æ”¯æŒäºŒæ¬¡å¼€å‘</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>é€šä¿¡åŠ å¯†</td>
<td>æ ‡å‡†çš„SSLåŠ å¯†</td>
<td>AESåŠ å¯†</td>
<td>OpenSSH</td>
</tr>
<tr>
<td>å¹³å°æ”¯æŒ</td>
<td>AIX , BSD, HP-UX, Linux , Mac OSX , Solaris, Windows</td>
<td>BSD, Linux , Mac OS X , Solaris, Windows</td>
<td>AIX , BSD , HP-UX , Linux , Mac OS X , Solaris</td>
</tr>
<tr>
<td>æ˜¯å¦æä¾›web UI</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
<td>å•†ç”¨æä¾›</td>
</tr>
<tr>
<td>é…ç½®æ–‡ä»¶è¯­æ³•</td>
<td>Rubyè¯­æ³•æ ¼å¼</td>
<td>YAML</td>
<td>YAML</td>
</tr>
<tr>
<td>å‘½ä»¤è¡Œæ‰§è¡Œ</td>
<td>ä¸æ”¯æŒï¼ˆé…ç½®å®ç°ï¼‰</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
</tbody>
</table>
<h2 id="äºŒã€ansible" tabindex="-1"><a class="header-anchor" href="#äºŒã€ansible" aria-hidden="true">#</a> äºŒã€Ansible</h2>
<h3 id="_2-1-ansibleç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_2-1-ansibleç®€ä»‹" aria-hidden="true">#</a> 2.1 Ansibleç®€ä»‹</h3>
<p>â€ƒâ€ƒAnsibleæ˜¯ä¸€æ¬¾ä½¿ç”¨Pythonå¼€å‘ï¼Œæ¨¡å—åŒ–ï¼Œä¾èµ–äºsshåè®®å®ç°çš„è‡ªåŠ¨åŒ–ç»Ÿä¸€é…ç½®ç®¡ç†å·¥å…·ï¼Œè‡ªåŠ¨åŒ–ä¸»è¦ä½“ç°åœ¨Ansibleé›†æˆäº†ä¸°å¯Œæ¨¡å—ä»¥åŠåŠŸèƒ½ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªå‘½ä»¤å®Œæˆä¸€ç³»åˆ—çš„æ“ä½œï¼Œè¿›è€Œèƒ½å‡å°‘é‡å¤æ€§çš„å·¥ä½œå’Œç»´æŠ¤æˆæœ¬ï¼Œå¯ä»¥æé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<blockquote>
<p>å®˜ç½‘åœ°å€ï¼š<a href="www.ansible.com">www.ansible.com</a></p>
</blockquote>
<h3 id="_2-2-ansibleçš„ä¼˜åŠ¿" tabindex="-1"><a class="header-anchor" href="#_2-2-ansibleçš„ä¼˜åŠ¿" aria-hidden="true">#</a> 2.2 Ansibleçš„ä¼˜åŠ¿</h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-6"> å®‰è£…éƒ¨ç½²ç®€å•(ä¸»æ§ç«¯å®‰è£…ansibleï¼Œä¸éœ€è¦é¢å¤–å®‰è£…å®¢æˆ·ç«¯)</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-7" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-7"> åŸºäºsshç°æœ‰åè®®å®ç°çš„ (1.3ä»¥ä¸Š)</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-8" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-8"> Ansibleæ²¡æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼Œä¸éœ€è¦å¯åŠ¨</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-9" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-9"> æ—¥å¿—é›†ä¸­åœ¨ä¸»æ§ç«¯ï¼Œæ–¹ä¾¿é”™è¯¯æ’æŸ¥</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-10" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-10"> ç®€å•æ˜“ç”¨ï¼Œä¸éœ€è¦æœ‰ç¼–ç¨‹åŸºç¡€</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-11" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-11"> é€šè¿‡æ¨¡å—å®ç°ï¼ŒåŠŸèƒ½å¼ºå¤§</label></li>
</ul>
<h3 id="_2-3-ansibleçš„æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_2-3-ansibleçš„æ¶æ„" aria-hidden="true">#</a> 2.3 Ansibleçš„æ¶æ„</h3>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/29d2cf993fb4438ab17883f77714b350.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>1ã€ä¸»æœºæ¸…å•Inventoryå®šä¹‰Ansibleéœ€è¦æ“ä½œä¸»æœºçš„èŒƒå›´</p>
<p>2ã€å‰§æœ¬Playbook Ansibleçš„é…ç½®æ–‡ä»¶,å°†å¤šä¸ªä»»åŠ¡å®šä¹‰åœ¨å‰§æœ¬ä¸­ï¼Œç”±ansibleè‡ªåŠ¨æ‰§è¡Œ</p>
<p>3ã€æ ¸å¿ƒæ¨¡å—Core Modulesè¿æ¥ä¸»æœºå®ç°æ“ä½œï¼Œ å®ƒä¾èµ–äºå…·ä½“çš„æ¨¡å—æ¥åšå…·ä½“çš„äº‹æƒ…</p>
<p>4ã€è‡ªå®šä¹‰æ¨¡å—Custom Modulesæ ¹æ®è‡ªå·±çš„éœ€æ±‚ç¼–å†™å…·ä½“çš„æ¨¡å—</p>
<p>5ã€è¿æ¥æ’ä»¶Connection Pluginsç”¨äºè¿æ¥ä¸»æœº ç”¨æ¥è¿æ¥è¢«ç®¡ç†ç«¯</p>
<p>6ã€æ’ä»¶Pluginså®Œæˆæ¨¡å—åŠŸèƒ½çš„è¡¥å……</p>
<font color=red>æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼šAnsibleæ˜¯æ¨¡å—åŒ–çš„ï¼Œå®ƒæ‰€æœ‰çš„æ“ä½œéƒ½ä¾èµ–äºæ¨¡å—ã€‚</font><h3 id="_2-4-ansibleæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_2-4-ansibleæ¨¡å¼" aria-hidden="true">#</a> 2.4 Ansibleæ¨¡å¼</h3>
<p>Ansibleä¸­æœ‰ä¸¤ç§æ¨¡å¼ï¼šåˆ†åˆ«æ˜¯ad-hocæ¨¡å¼å’Œplaybookæ¨¡å¼ï¼›</p>
<ul>
<li>
<p>ad-hocï¼šç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯â€œä¸´æ—¶å‘½ä»¤â€ï¼Œä¸ä¼šä¿å­˜ï¼›</p>
</li>
<li>
<p>playbookï¼šç¿»è¯‘è¿‡æ¥å°±æ˜¯å‰§æœ¬ï¼Œåœ¨æ–‡ä»¶ä¸­ä¿å­˜æ‰§è¡Œçš„æµç¨‹ï¼›</p>
</li>
</ul>
<p>Ansibleä¸SaltStackå¯¹æ¯”:</p>
<blockquote>
<p>ç›¸åŒç‚¹:</p>
<p>1.éƒ½æ˜¯ä½¿ç”¨pythonè¯­è¨€å¼€å‘çš„</p>
<p>2.éƒ½å…·æœ‰äºŒæ¬¡å¼€å‘çš„ç‰¹æ€§</p>
<p>3.æ‰§è¡Œå‘½ä»¤éƒ½æ”¯æŒAd-hocæ¨¡å¼  (ä¸´æ—¶å‘½ä»¤ï¼Œæ‰§è¡Œå®Œå°±è¿”å›)</p>
<p>4.éƒ½å¯ä»¥é€šè¿‡YAMLæ ¼å¼æ–‡ä»¶æ‰¹é‡æ‰§è¡Œ</p>
<p>5.è¿”å›çš„ç»“æœéƒ½æ˜¯JSONæ•°æ®ï¼Œä¾¿äºåç»­å¤„ç†<br></p>
<p>ä¸åŒç‚¹:</p>
<p>1.Ansibleéƒ¨ç½²æ›´ç®€å•ï¼Œæ²¡æœ‰å®¢æˆ·ç«¯ï¼Œè€ŒSaltstackæœ‰å®¢æˆ·ç«¯ï¼›</p>
<p>2.Saltstackçš„å“åº”é€Ÿåº¦è¦æ¯”Ansibleæ›´å¿«ï¼›Ansibleé€šè¿‡SSHåè®®å®ç°ï¼ŒSaltstackä½¿ç”¨äº†ZeroMQå®ç°é€šä¿¡;</p>
<p>3.Ansibleæ›´åŠ å®‰å…¨ï¼ŒSSHåŠ å¯†ä¼ è¾“</p>
<p>4.Saltstackå¯¹äºWindowsæ”¯æŒæ›´å‹å¥½ï¼ŒAnsibleé€šè¿‡Power Shellæ¥ç®¡ç†Windows</p>
<p>5.Ansibleç»´æŠ¤ç®€å•ï¼Œæ²¡æœ‰å®¢æˆ·ç«¯ï¼Œæ²¡æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼›saltstackéœ€è¦æœ‰Masterå’Œminion,ä¸»æœºè¦å¯åŠ¨ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ã€‚</p>
</blockquote>
<h3 id="_2-5-ansibleéƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#_2-5-ansibleéƒ¨ç½²" aria-hidden="true">#</a> 2.5 Ansibleéƒ¨ç½²</h3>
<p>Ansibleéƒ¨ç½²æ—¶ç›´æ¥ä½¿ç”¨é˜¿é‡Œäº‘çš„åŸºç¡€æºä¸epelæ‰©å±•æºå¯ä»¥ç›´æ¥å®‰è£…ï¼›</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># å…ˆæ‹‰å–epelæ‰©å±•æº</span>
<span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo

<span class="token comment"># æ›´æ–°yumæº</span>
yum makecache fast


<span class="token comment"># å®‰è£…Ansible</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> ansible

<span class="token comment"># æŸ¥çœ‹Ansibleç‰ˆæœ¬</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ansible --version</span>

ansible <span class="token number">2.9</span>.27
  config <span class="token function">file</span> <span class="token operator">=</span> /etc/ansible/ansible.cfg
  configured module search path <span class="token operator">=</span> <span class="token punctuation">[</span>u<span class="token string">'/root/.ansible/plugins/modules'</span>, u<span class="token string">'/usr/share/ansible/plugins/modules'</span><span class="token punctuation">]</span>
  ansible python module location <span class="token operator">=</span> /usr/lib/python2.7/site-packages/ansible
  executable location <span class="token operator">=</span> /usr/bin/ansible
  python version <span class="token operator">=</span> <span class="token number">2.7</span>.5 <span class="token punctuation">(</span>default, Aug  <span class="token number">7</span> <span class="token number">2019</span>, 00:51:29<span class="token punctuation">)</span> <span class="token punctuation">[</span>GCC <span class="token number">4.8</span>.5 <span class="token number">20150623</span> <span class="token punctuation">(</span>Red Hat <span class="token number">4.8</span>.5-39<span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/c9e85ea6314c403ea2baa387df8df410.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<h4 id="_2-5-1-ansibleå‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-5-1-ansibleå‚æ•°" aria-hidden="true">#</a> 2.5.1 Ansibleå‚æ•°</h4>
<ul>
<li>å¸¸ç”¨å‚æ•°</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token parameter variable">-m</span>          <span class="token comment">#æŒ‡å®šä½¿ç”¨çš„æ¨¡å—åç§°ï¼Œä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨commandæ¨¡å—</span>
<span class="token parameter variable">-a</span>          <span class="token comment">#ä½¿ç”¨çš„æ¨¡å—å‚æ•°ï¼Œæ¨¡å—çš„å…·ä½“åŠ¨ä½œï¼›æŒ‡å®šè¦æ‰§è¡Œçš„å…·ä½“å‘½ä»¤</span>
--syntax-check      <span class="token comment">#éªŒè¯è¯­æ³•</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>ä¸å¸¸ç”¨å‚æ•°</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment">#ä¸å¸¸ç”¨å‚æ•°</span>
<span class="token parameter variable">--version</span>   <span class="token comment">#ansibleç‰ˆæœ¬ä¿¡æ¯</span>
<span class="token parameter variable">-v</span>          <span class="token comment">#æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span>
<span class="token parameter variable">-i</span>          <span class="token comment">#ä¸»æœºæ¸…å•æ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤æ˜¯åœ¨/etc/ansible/hosts</span>
<span class="token parameter variable">-k</span>          <span class="token comment">#æç¤ºè¾“å…¥sshå¯†ç ï¼Œè€Œä¸ä½¿ç”¨åŸºäºsshçš„å¯†é’¥è®¤è¯</span>
<span class="token parameter variable">-C</span>          <span class="token comment">#æ¨¡æ‹Ÿæ‰§è¡Œæµ‹è¯•ï¼Œä½†ä¸ä¼šçœŸçš„æ‰§è¡Œ</span>
<span class="token parameter variable">-T</span>          <span class="token comment">#æ‰§è¡Œå‘½ä»¤çš„è¶…æ—¶</span>
<span class="token parameter variable">-f</span>  		<span class="token comment">#ä¸€æ¬¡è¿”å›å‡ ä¸ªç»“æœ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>ansibleå¸®åŠ©å‘½ä»¤</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>ansible-doc 		<span class="token comment">#å¸®åŠ©å‘½ä»¤ </span>
ansible-doc <span class="token parameter variable">-l</span>   	<span class="token comment">#åˆ—å‡ºæ‰€ä»¥çš„æ¨¡å—</span>
ansible-doc æ¨¡å—å   <span class="token comment">#æŸ¥çœ‹æ¨¡å—çš„è¯¦ç»†ä¿¡æ¯</span>
ansible-doc æ¨¡å—å <span class="token parameter variable">-s</span>  <span class="token comment">#æŸ¥çœ‹æ¨¡å—çš„é€‰é¡¹ä½¿ç”¨è¯´æ˜</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-5-2-ansibleä¸»æœºæ¸…å•" tabindex="-1"><a class="header-anchor" href="#_2-5-2-ansibleä¸»æœºæ¸…å•" aria-hidden="true">#</a> 2.5.2 Ansibleä¸»æœºæ¸…å•</h4>
<p>ä¸»æœºèµ„äº§æ¸…å•ï¼Œç”¨äºå®šä¹‰è¢«ç®¡ç†ä¸»æœºçš„è®¤è¯ä¿¡æ¯ï¼Œ ä¾‹å¦‚sshç™»å½•ç”¨æˆ·åã€å¯†ç ä»¥åŠkeyç›¸å…³ä¿¡æ¯ã€‚</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹ansibleé…ç½®æ–‡ä»¶è·¯å¾„</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># rpm -qc ansible</span>
/etc/ansible/ansible.cfg
/etc/ansible/hosts
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>ä¸»æœºæ¸…å•ä½ç½®ï¼š<font color=red>é»˜è®¤æ˜¯/etc/ansible/hosts</font></p>
<p>ansible -i æŒ‡å®šä¸»æœºæ¸…å•</p>
<p>åœ¨ansibleé…ç½®æ–‡ä»¶ansible.cfgä¸­æŒ‡å®šé»˜è®¤çš„ä¸»æœºæ¸…å•æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„ï¼š<font color=red>/etc/ansible/ansible.cfg</font></p>
</blockquote>
<ul>
<li>ansible.cfgå¸¸ç”¨é…ç½®è§£æ</li>
</ul>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>defaults<span class="token punctuation">]</span>
<span class="token comment">#inventory      = /etc/ansible/hosts      #ä¸»æœºåˆ—è¡¨é…ç½®æ–‡ä»¶</span>
<span class="token comment">#library        = /usr/share/my_modules/  #åº“æ–‡ä»¶å­˜æ”¾ç›®å½•</span>
<span class="token comment">#remote_tmp     = ~/.ansible/tmp          #ä¸´æ—¶pyæ–‡ä»¶å­˜æ”¾åœ¨è¿œç¨‹ä¸»æœºç›®å½•</span>
<span class="token comment">#local_tmp      = ~/.ansible/tmp          #æœ¬æœºçš„ä¸´æ—¶æ‰§è¡Œç›®å½•</span>
<span class="token comment">#forks          = 5                       #é»˜è®¤å¹¶å‘æ•°</span>
<span class="token comment">#sudo_user      = root                    #é»˜è®¤sudoç”¨æˆ·</span>
<span class="token comment">#ask_sudo_pass = True                     #æ¯æ¬¡æ‰§è¡Œæ˜¯å¦è¯¢é—®sudoçš„sshå¯†ç </span>
<span class="token comment">#ask_pass      = True                     #æ¯æ¬¡æ‰§è¡Œæ˜¯å¦è¯¢é—®sshå¯†ç </span>
<span class="token comment">#remote_port    = 22                      #è¿œç¨‹ä¸»æœºç«¯å£</span>
host_key_checking <span class="token operator">=</span> False                 <span class="token comment">#è·³è¿‡æ£€æŸ¥ä¸»æœºæŒ‡çº¹</span>
log_path <span class="token operator">=</span> /var/log/ansible.log           <span class="token comment">#ansibleæ—¥å¿—</span>
 
<span class="token comment">#æ™®é€šç”¨æˆ·ææƒæ“ä½œ</span>
<span class="token punctuation">[</span>privilege_escalation<span class="token punctuation">]</span>
<span class="token comment">#become=True</span>
<span class="token comment">#become_method=sudo</span>
<span class="token comment">#become_user=root</span>
<span class="token comment">#become_ask_pass=False</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸é…ç½®<code v-pre>host_key_checking </code> å’Œ <code v-pre>log_path</code>ï¼Œä¼šå¯¼è‡´æŠ¥é”™ï¼›<br>
ä¸é…ç½®<code v-pre>host_key_checking </code>ä¼šå¯¼è‡´ï¼Œæ‰§è¡Œansibleå‘½ä»¤çš„æ—¶å€™æŠ¥é”™ï¼š</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token number">172.16</span>.11.209 <span class="token operator">|</span> FAILED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span>-1 <span class="token operator">>></span>
Using a SSH password instead of a key is not possible because Host Key checking is enabled and sshpass does not support this.  Please <span class="token function">add</span> this host's fingerprint to your known_hosts <span class="token function">file</span> to manage this host.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é…ç½® <code v-pre>log_path</code> æ˜¯ä¸ºäº†æ›´å¥½çš„æ’æŸ¥é—®é¢˜æ‰€åœ¨ï¼›</p>
<h4 id="_2-5-3-ä¸»æœºæ¸…å•é…ç½®è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_2-5-3-ä¸»æœºæ¸…å•é…ç½®è§„åˆ™" aria-hidden="true">#</a> 2.5.3 ä¸»æœºæ¸…å•é…ç½®è§„åˆ™</h4>
<p>ï¼ˆåœ¨/etc/ansible/hostsä¸­é…ç½®ï¼‰</p>
<p>ä¸»æœº:</p>
<p>1.å¯ä»¥ä½¿ç”¨ä¸»æœºå(åŸŸå)æˆ–IPåœ°å€</p>
<p>2.æ”¯æŒä¸»æœºåé€šé…ä»¥åŠæ­£åˆ™è¡¨è¾¾å¼</p>
<p>3.æ”¯æŒæŒ‡å®šä¸»æœºå®šä¹‰ä¸åŒçš„å˜é‡ï¼ŒåŒ…æ‹¬å¯†ç ï¼Œç«¯å£å·ï¼Œç”¨æˆ·ç­‰ç­‰</p>
<p><strong>1ï¼‰å•ä¸»æœºé…ç½®</strong></p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># æ–¹å¼ä¸€ï¼š ip + ç«¯å£ + ç”¨æˆ·å + ç”¨æˆ·å¯†ç </span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># vim /etc/ansible/hosts </span>
<span class="token punctuation">[</span>web01<span class="token punctuation">]</span>
<span class="token number">172.16</span>.11.209 <span class="token assign-left variable">ansible_ssh_port</span><span class="token operator">=</span><span class="token number">22</span> <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>
<span class="token punctuation">[</span>web02<span class="token punctuation">]</span>
<span class="token number">172.16</span>.10.232 <span class="token assign-left variable">ansible_ssh_port</span><span class="token operator">=</span><span class="token number">22</span> <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>

<span class="token comment"># æµ‹è¯•ï¼šansible ä¸»æœºå -m æŒ‡å®šæ¨¡å—</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible web01 -m ping</span>
<span class="token number">172.16</span>.11.209 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible web02 -m ping</span>
<span class="token number">172.16</span>.10.232 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/1a42e5136f524d2da8a96b6e934b568c.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>å¦‚æœé‡åˆ°ä»¥ä¸‹æŠ¥é”™ï¼š</p>
<figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/aa24a71963354fa0abcebea311afdf3a.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<blockquote>
<p>åœ¨ansible.cfgé…ç½®æ–‡ä»¶ä¸­å¼€å¯è¿™ä¸¤ä¸ªï¼šï¼ˆå°†æ³¨é‡Šæ³¨é”€äº†ï¼‰</p>
<p>host_key_checking = False                 #è·³è¿‡æ£€æŸ¥ä¸»æœºæŒ‡çº¹<br>
log_path = /var/log/ansible.log           #ansibleæ—¥å¿—</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># æ–¹å¼äºŒï¼š ip + ç”¨æˆ·å¯†ç </span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># vim /etc/ansible/hosts </span>
<span class="token punctuation">[</span>web01<span class="token punctuation">]</span>
<span class="token number">172.16</span>.11.209 <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>
<span class="token punctuation">[</span>web02<span class="token punctuation">]</span>
<span class="token number">172.16</span>.10.232 <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>

<span class="token comment"># æµ‹è¯•ï¼šansible ä¸»æœºå -m æŒ‡å®šæ¨¡å—</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible web01 -m ping</span>
<span class="token number">172.16</span>.11.209 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible web02 -m ping</span>
<span class="token number">172.16</span>.10.232 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>

<span class="token comment">#æ²¡æœ‰å®šä¹‰ç”¨æˆ·æ—¶ï¼Œé»˜è®¤ä½¿ç”¨å½“å‰ç™»å½•ç”¨æˆ·ï¼›</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/f99e4374685d49f8b8123821f9bd4667.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p><strong>2ï¼‰å¤šä¸»æœºé…ç½®</strong></p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment">#IP+ç«¯å£+å¯†ç </span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># vim /etc/ansible/hosts </span>
<span class="token punctuation">[</span>web<span class="token punctuation">]</span>
<span class="token number">172.16</span>.11.209 <span class="token assign-left variable">ansible_ssh_port</span><span class="token operator">=</span><span class="token number">22</span> <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>
<span class="token number">172.16</span>.10.232 <span class="token assign-left variable">ansible_ssh_port</span><span class="token operator">=</span><span class="token number">22</span> <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>

<span class="token comment"># æµ‹è¯•ï¼šansible ä¸»æœºå -m æŒ‡å®šæ¨¡å—</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible web -m ping</span>
<span class="token number">172.16</span>.10.232 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
<span class="token number">172.16</span>.11.209 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/913eb04c2155496897ecdc262ae34950.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>ä¸»æœºç»„ï¼š</p>
<p>1.åµŒå¥—  [ç»„å:children]</p>
<p>2.å¯¹ç»„å®šä¹‰å˜é‡  [ç»„å:vars]</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment">#ä¸»æœºç»„å˜é‡+ä¸»æœº+å¯†ç </span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># vim /etc/ansible/hosts </span>
<span class="token punctuation">[</span>web_group<span class="token punctuation">]</span>
<span class="token number">172.16</span>.11.209
<span class="token number">172.16</span>.10.232

<span class="token punctuation">[</span>web_group:vars<span class="token punctuation">]</span>
<span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>


<span class="token comment"># æµ‹è¯•ï¼šansible ä¸»æœºå -m æŒ‡å®šæ¨¡å—</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible web_group -m ping</span>
<span class="token number">172.16</span>.10.232 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
<span class="token number">172.16</span>.11.209 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment">#å®šä¹‰å¤šç»„ï¼Œå¤šç»„åµŒå¥—</span>

<span class="token comment"># webserversç»„åŒ…æ‹¬ä¸¤ä¸ªå­ç»„[apache,nginx]</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># vim /etc/ansible/hosts </span>
<span class="token comment">#å®šä¹‰æ€»ip</span>
<span class="token punctuation">[</span>web_group<span class="token punctuation">]</span>
<span class="token number">172.16</span>.11.209
<span class="token number">172.16</span>.10.232
<span class="token number">172.16</span>.10.129

<span class="token comment">#apacheæœ‰ä¸¤å°</span>
<span class="token punctuation">[</span>apache<span class="token punctuation">]</span>
<span class="token number">172.16</span>.11.209
<span class="token number">172.16</span>.10.232

<span class="token comment">#nginxæœ‰ä¸€å°</span>
<span class="token punctuation">[</span>nginx<span class="token punctuation">]</span>
<span class="token number">172.16</span>.10.129 <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'csnginx123'</span>

<span class="token comment">#å®šä¹‰å¯†ç </span>
<span class="token punctuation">[</span>apache:vars<span class="token punctuation">]</span>
<span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span><span class="token string">'123123'</span>

<span class="token punctuation">[</span>web_group:children<span class="token punctuation">]</span>
apache
nginx



<span class="token comment"># æµ‹è¯•ï¼šansible ä¸»æœºå -m æŒ‡å®šæ¨¡å—</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible web_group -m ping</span>
<span class="token number">172.16</span>.11.209 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
<span class="token number">172.16</span>.10.232 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
<span class="token number">172.16</span>.10.129 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible apache -m ping</span>
<span class="token number">172.16</span>.11.209 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
<span class="token number">172.16</span>.10.232 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>

<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ansible nginx -m ping</span>
<span class="token number">172.16</span>.10.129 <span class="token operator">|</span> SUCCESS <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token string">"ansible_facts"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
        <span class="token string">"discovered_interpreter_python"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/python"</span>
    <span class="token punctuation">}</span>, 
    <span class="token string">"changed"</span><span class="token builtin class-name">:</span> false, 
    <span class="token string">"ping"</span><span class="token builtin class-name">:</span> <span class="token string">"pong"</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº†å¯ä»¥ä½¿ç”¨å¯†ç è¿æ¥ï¼Œä¹Ÿå¯ä»¥é…ç½®ç§˜é’¥ï¼Œå®ç°å…å¯†ç™»é™†ï¼Œæ­¤æ—¶ä¸»æœºé…ç½®æ–‡ä»¶ä¸­ä¸éœ€è¦æŒ‡å®šå¯†ç </p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token number">1</span>.ç”Ÿæˆå¯†é’¥å¯¹
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ssh-keygen</span>
 
<span class="token number">2</span>.æ¨é€å…¬é’¥
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id 172.16.11.209</span>
<span class="token punctuation">[</span>root@localhost ansible<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id 172.16.10.232</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ—¶å€™é…ç½®hostsæ—¶å°±ä¸éœ€è¦æŒ‡å®šå¯†ç äº†ã€‚</p>
<h2 id="ä¸‰ã€ç›¸å…³æ–‡ç« " tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€ç›¸å…³æ–‡ç« " aria-hidden="true">#</a> ä¸‰ã€ç›¸å…³æ–‡ç« </h2>
<table>
<thead>
<tr>
<th style="text-align:center">æ–‡ç« æ ‡é¢˜</th>
<th style="text-align:center">æ–‡ç« é“¾æ¥</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133769300" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆä¸€ï¼‰ç®€ä»‹åŠéƒ¨ç½²ã€æ¸…å•<ExternalLinkIcon/></a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133769300" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133769300<ExternalLinkIcon/></a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133772023" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆäºŒï¼‰ad-hoc æ¨¡å¼è¯¦è§£<ExternalLinkIcon/></a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133772023" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133772023<ExternalLinkIcon/></a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133899966" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆä¸‰ï¼‰Playbook æ¨¡å¼è¯¦è§£<ExternalLinkIcon/></a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133899966" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133899966<ExternalLinkIcon/></a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133994509" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆå››ï¼‰jinja2 æ¨¡æ¿ã€Rolesè§’è‰²è¯¦è§£<ExternalLinkIcon/></a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133994509" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133994509<ExternalLinkIcon/></a></td>
</tr>
</tbody>
</table>
</div></template>


