<template><div><blockquote>
<p>ğŸ‘¨â€ğŸ“<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº<ExternalLinkIcon/></a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼<br>
ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„<br>
ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—</p>
</blockquote>
<hr>
<p>@[toc]</p>
<h1 id="docker-history-image" tabindex="-1"><a class="header-anchor" href="#docker-history-image" aria-hidden="true">#</a> docker history image</h1>
<p>ä½¿ç”¨ï¼š<code v-pre>docker history image(é•œåƒå)</code>å¯ä»¥çœ‹åˆ°æ„å»ºé•œåƒæ—¶æ¯æ¡å‘½ä»¤æ‰§è¡Œçš„å¤§å°</p>
<p>è¿™é‡Œæ˜¾ç¤ºçš„æ˜¯æ‰€æœ‰å±‚çš„ä¿¡æ¯ï¼›<br>
å¦‚æœçœ‹å‘½ä»¤ä¸çŸ¥é“æ˜¯å“ªä¸ªçš„æ—¶å€™ï¼Œå¯æ ¹æ®åœ¨buildé•œåƒæ—¶çš„IMAGEæ¥åˆ¤æ–­æ˜¯å“ªä¸ªã€‚</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost mysql<span class="token punctuation">]</span><span class="token comment"># docker history redhat-mysql</span>
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
cf14a9a9f753        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  CMD ["mysqld"]               0B                  </span>
312a16d871a0        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  EXPOSE 3306                  0B                  </span>
372e0847f04a        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> mysqld --initialize-insecure --usâ€¦   127MB               
3f40e557ffcf        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV PATH=/opt/mysql-5.7.3â€¦   0B                  </span>
cec92708a0d1        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop) COPY file:c21e035f53b78962â€¦   162B                </span>
b904f83aa22c        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql:mysql /opt/mysql-5â€¦   <span class="token number">2</span>.68GB              
62c02bad85d5        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token function">groupadd</span> mysql <span class="token operator">&amp;&amp;</span> <span class="token function">useradd</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-g</span> mâ€¦   359kB               
789b6d170caf        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop) ADD file:41225123e9b5895c2â€¦   2.68GB              </span>
978bac9547fa        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> libaio numactl        <span class="token number">66</span>.1MB              
069661fe1d9a        <span class="token number">4</span> days ago          /bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV LANG=en_US.utf8          0B                  </span>
8d7d859c98e3        <span class="token number">5</span> days ago          /bin/bash                                       319MB               
9da37a681956        <span class="token number">3</span> years ago                                                         <span class="token number">2</span>.94kB              
<span class="token operator">&lt;</span>missing<span class="token operator">></span>           <span class="token number">3</span> years ago                                                         205MB               Imported from -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæˆ‘åªè¦æ˜¾ç¤ºCREATED BYå’Œæ¯å±‚çš„å¤§å°ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ï¼š<code v-pre>--format='{{.CreatedBy}} - {{.Size}}'</code></p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost mysql<span class="token punctuation">]</span><span class="token comment"># docker history --format='{{.CreatedBy}} - {{.Size}}' redhat-mysql</span>
/bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  CMD ["mysqld"] - 0B</span>
/bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  EXPOSE 3306 - 0B</span>
/bin/sh <span class="token parameter variable">-c</span> mysqld --initialize-insecure --usâ€¦ - 127MB
/bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV PATH=/opt/mysql-5.7.3â€¦ - 0B</span>
/bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop) COPY file:c21e035f53b78962â€¦ - 162B</span>
/bin/sh <span class="token parameter variable">-c</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql:mysql /opt/mysql-5â€¦ - <span class="token number">2</span>.68GB
/bin/sh <span class="token parameter variable">-c</span> <span class="token function">groupadd</span> mysql <span class="token operator">&amp;&amp;</span> <span class="token function">useradd</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-g</span> mâ€¦ - 359kB
/bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop) ADD file:41225123e9b5895c2â€¦ - 2.68GB</span>
/bin/sh <span class="token parameter variable">-c</span> yum <span class="token function">install</span> <span class="token parameter variable">-y</span> libaio numactl - <span class="token number">66</span>.1MB
/bin/sh <span class="token parameter variable">-c</span> <span class="token comment">#(nop)  ENV LANG=en_US.utf8 - 0B</span>
/bin/bash - 319MB
 - <span class="token number">2</span>.94kB
 - 205MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="é™„åŠ -ä¸çœ‹" tabindex="-1"><a class="header-anchor" href="#é™„åŠ -ä¸çœ‹" aria-hidden="true">#</a> é™„åŠ ï¼šä¸çœ‹</h1>
<ul>
<li>
<p>ç®€ä»‹<br>
é€šè¿‡ä½¿ç”¨å®¹å™¨åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè®¾ç½®å’Œé…ç½®æˆ‘ä»¬çš„éƒ¨ç½²ç¯å¢ƒï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬èŠ‚çœæ—¶é—´å’Œèµ„æºã€‚è€ƒè™‘åˆ° â€œä¸€æ¬¡ç¼–å†™ï¼Œéšåœ°éƒ¨ç½² â€œçš„ç›®æ ‡ï¼Œå®¹å™¨åŒ–å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–ç°ä»£åº”ç”¨ç¨‹åºçš„éƒ¨ç½²è¿‡ç¨‹ï¼Œè€Œè¿™å¯èƒ½æ˜¯å¤æ‚çš„ã€‚</p>
</li>
<li>
<p>å¯»æ‰¾Dockeré•œåƒçš„å±‚å’Œå±‚å¤§å°<br>
åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•æ‰¾åˆ°æ¯ä¸ªDockeré•œåƒçš„å±‚å’Œå±‚å¤§å°ã€‚è¿™å¯¹äºè¯†åˆ«å¯èƒ½å¯¼è‡´é•œåƒæ•´ä½“å¤§å°çš„å¤§å‹å±‚ï¼Œä»¥åŠç¡®å®šå“ªäº›å±‚å¯ä»¥è¢«åˆ é™¤æˆ–ä¼˜åŒ–ä»¥å‡å°‘é•œåƒçš„å¤§å°æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p>
</li>
<li>
<p>æ–¹æ³•<br>
ä½¿ç”¨Dockerfile</p>
</li>
</ul>
<p>ä½¿ç”¨Docker Image Inspectå‘½ä»¤</p>
<p>è®©æˆ‘ä»¬è¯¦ç»†äº†è§£å…¶ä¸­çš„æ¯ä¸€é¡¹ï¼Œå¹¶é€šè¿‡å®ä¾‹çœ‹åˆ°å®ƒä»¬çš„ä½œç”¨ã€‚</p>
<ul>
<li>ä½¿ç”¨Dockerfile<br>
ç¤ºä¾‹</li>
</ul>
<p>ç¬¬1æ­¥ â€“ ä¸ºä½ çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•ï¼Œå¹¶å¯¼èˆªåˆ°è¯¥ç›®å½• â€”</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>$ <span class="token function">mkdir</span> directoryname 
$ <span class="token builtin class-name">cd</span> directoryname
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬2æ­¥ â€“ åœ¨è¿™ä¸ªæ–°ç›®å½•ä¸‹åˆ¶ä½œä¸€ä¸ªåä¸º â€œDockerfile â€œçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ â€”</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>FROM alpine:latest 
RUN apk <span class="token function">add</span> --no-cache <span class="token function">curl</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™åŒ…æ‹¬å»ºç«‹ä½ çš„å›¾åƒçš„è¯´æ˜ä»¥åŠåŸºæœ¬å›¾åƒã€‚</p>
<p>ç¬¬3æ­¥ â€“ åœ¨ç»ˆç«¯è¿è¡Œdocker buildå‘½ä»¤ï¼Œä½¿ç”¨Dockerfileæ„å»ºé•œåƒâ€”-ã€‚</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker</span> build <span class="token parameter variable">-t</span> myimage <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬4æ­¥ â€“ è¦æ£€æŸ¥å›¾å±‚å’Œå›¾å±‚å¤§å°ï¼Œåœ¨ç»ˆç«¯è¿è¡Œdocker imageså‘½ä»¤ï¼Œåˆ—å‡ºç³»ç»Ÿä¸­æ‰€æœ‰å¯ç”¨çš„å›¾åƒâ€“</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker</span> images
REPOSITORY        TAG      IMAGE ID       CREATED        SIZE
myimage           latest   499a9ddb3acd   <span class="token number">2</span> minutes ago  <span class="token number">9</span>.29MB
docker-apps       latest   eb6dda32a60d   <span class="token number">3</span> hours ago    176MB
docker101tutorial latest   1ebfcd22ec64   <span class="token number">3</span> hours ago    47MB
ubuntu            latest   6b7dfa7e8fdb   <span class="token number">4</span> weeks ago    <span class="token number">77</span>.8MB
alpine/git        latest   22d84a66cda4   <span class="token number">7</span> weeks ago    <span class="token number">43</span>.6MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬5æ­¥ â€“ åœ¨ç»ˆç«¯è¿è¡Œdocker inspectå‘½ä»¤æ¥æ£€æŸ¥é•œåƒå¹¶è·å¾—å…¶ç»†èŠ‚ï¼ŒåŒ…æ‹¬å±‚å’Œå®ƒä»¬çš„å¤§å°ã€‚</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker</span> inspect IMAGE_ID
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker</span> inspect 499a9ddb3acd
<span class="token punctuation">[</span>
   <span class="token punctuation">{</span>
      <span class="token string">"Id"</span><span class="token builtin class-name">:</span> <span class="token string">"sha256:499a9ddb3acdf2117fdb4df826e0782d05d01aa8d1c0574c96e7bed6fbbcf698"</span>,
      <span class="token string">"RepoTags"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
         <span class="token string">"myimage:latest"</span>
      <span class="token punctuation">]</span>,
      <span class="token string">"RepoDigests"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
      <span class="token string">"Parent"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"Comment"</span><span class="token builtin class-name">:</span> <span class="token string">"buildkit.dockerfile.v0"</span>,
      <span class="token string">"Created"</span><span class="token builtin class-name">:</span> <span class="token string">"2023-01-08T07:49:58.294267525Z"</span>,
      <span class="token string">"Container"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"ContainerConfig"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Hostname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Domainname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"User"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"AttachStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStdout"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStderr"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Tty"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"OpenStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"StdinOnce"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Env"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Cmd"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Image"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Volumes"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"WorkingDir"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Entrypoint"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"OnBuild"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Labels"</span><span class="token builtin class-name">:</span> null
      <span class="token punctuation">}</span>,
      <span class="token string">"DockerVersion"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"Author"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"Config"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Hostname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Domainname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"User"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"AttachStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStdout"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStderr"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Tty"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"OpenStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"StdinOnce"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Env"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span>
         <span class="token punctuation">]</span>,
         <span class="token string">"Cmd"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">"/bin/sh"</span>
         <span class="token punctuation">]</span>,
         <span class="token string">"Image"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Volumes"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"WorkingDir"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Entrypoint"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"OnBuild"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Labels"</span><span class="token builtin class-name">:</span> null
      <span class="token punctuation">}</span>,
      <span class="token string">"Architecture"</span><span class="token builtin class-name">:</span> <span class="token string">"amd64"</span>,
      <span class="token string">"Os"</span><span class="token builtin class-name">:</span> <span class="token string">"linux"</span>,
      <span class="token string">"Size"</span><span class="token builtin class-name">:</span> <span class="token number">9292948</span>,
      <span class="token string">"VirtualSize"</span><span class="token builtin class-name">:</span> <span class="token number">9292948</span>,
      <span class="token string">"GraphDriver"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Data"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">"LowerDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/e4c1f1bb76c66c5d1781a775c8a2ca9338065ea0b398aeaed4230a00a15d2952/diff"</span>,
            <span class="token string">"MergedDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/osfaf1c97lm7awgfbaqibrt6p/merged"</span>,
            <span class="token string">"UpperDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/osfaf1c97lm7awgfbaqibrt6p/diff"</span>,
            <span class="token string">"WorkDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/osfaf1c97lm7awgfbaqibrt6p/work"</span>
         <span class="token punctuation">}</span>,
         <span class="token string">"Name"</span><span class="token builtin class-name">:</span> <span class="token string">"overlay2"</span>
      <span class="token punctuation">}</span>,
      <span class="token string">"RootFS"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Type"</span><span class="token builtin class-name">:</span> <span class="token string">"layers"</span>,
         <span class="token string">"Layers"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">"sha256:ded7a220bb058e28ee3254fbba04ca90b679070424424761a53a043b93b612bf"</span>,
            <span class="token string">"sha256:19bc0373c06b6727c115ef34961486b1a9f3b7c8ccbd3441c4b108aeef2b338d"</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>,
      <span class="token string">"Metadata"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"LastTagTime"</span><span class="token builtin class-name">:</span> <span class="token string">"2023-01-08T07:49:58.412703277Z"</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨Docker Image Inspectå‘½ä»¤<br>
â€œdocker image inspect â€œå‘½ä»¤å…è®¸æˆ‘ä»¬æ¢ç´¢å…³äºDockeré•œåƒçš„å…¨é¢ç»†èŠ‚ï¼Œæ¯”å¦‚å®ƒçš„å±‚æ•°å’Œå¤§å°ã€‚</p>
<p>ä¸‹é¢çš„æ­¥éª¤å¯ä»¥ç”¨æ¥è·å¾—Dockeré•œåƒçš„å±‚å’Œå±‚å¤§å°â€”â€”ã€‚</p>
<p>ç¬¬1æ­¥ â€“ é€šè¿‡æ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ï¼Œè¿›å…¥åŒ…å«ä½ çš„Dockeré•œåƒçš„ç›®å½•ã€‚</p>
<p>ç¬¬2æ­¥ â€“ è¦æŸ¥çœ‹æ‰€æœ‰å¯è®¿é—®çš„Dockeré•œåƒï¼Œè¯·åœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ â€”</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker</span> image <span class="token function">ls</span>
REPOSITORY         TAG     IMAGE ID       CREATED           SIZE
myimage           latest   499a9ddb3acd   <span class="token number">17</span> minutes ago    <span class="token number">9</span>.29MB
docker-apps       latest   eb6dda32a60d   <span class="token number">3</span> hours ago       176MB
docker101tutorial latest   1ebfcd22ec64   <span class="token number">3</span> hours ago       47MB
ubuntu            latest   6b7dfa7e8fdb   <span class="token number">4</span> weeks ago       <span class="token number">77</span>.8MB
alpine/git        latest   22d84a66cda4   <span class="token number">7</span> weeks ago       <span class="token number">43</span>.6MB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬3æ­¥ â€“ é€‰æ‹©ä½ æƒ³æ£€æŸ¥çš„å›¾åƒï¼Œå¹¶è®°ä¸‹ä½ ä¹‹å‰è¾“å‡ºçš„IDã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨IDä¸º â€œ499a9ddb3acd â€œçš„å›¾åƒã€‚<br>
ç¬¬4æ­¥</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker</span> image inspect 499a9ddb3acd
<span class="token punctuation">[</span>
   <span class="token punctuation">{</span>
      <span class="token string">"Id"</span><span class="token builtin class-name">:</span> <span class="token string">"sha256:499a9ddb3acdf2117fdb4df826e0782d05d01aa8d1c0574c96e7bed6fbbcf698"</span>,
      <span class="token string">"RepoTags"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
         <span class="token string">"myimage:latest"</span>
      <span class="token punctuation">]</span>,
      <span class="token string">"RepoDigests"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>,
      <span class="token string">"Parent"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"Comment"</span><span class="token builtin class-name">:</span> <span class="token string">"buildkit.dockerfile.v0"</span>,
      <span class="token string">"Created"</span><span class="token builtin class-name">:</span> <span class="token string">"2023-01-08T07:49:58.294267525Z"</span>,
      <span class="token string">"Container"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"ContainerConfig"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Hostname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Domainname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"User"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"AttachStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStdout"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStderr"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Tty"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"OpenStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"StdinOnce"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Env"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Cmd"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Image"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Volumes"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"WorkingDir"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Entrypoint"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"OnBuild"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Labels"</span><span class="token builtin class-name">:</span> null
      <span class="token punctuation">}</span>,
      <span class="token string">"DockerVersion"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"Author"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
      <span class="token string">"Config"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Hostname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Domainname"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"User"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"AttachStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStdout"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"AttachStderr"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Tty"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"OpenStdin"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"StdinOnce"</span><span class="token builtin class-name">:</span> false,
         <span class="token string">"Env"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">"PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</span>
         <span class="token punctuation">]</span>,
         <span class="token string">"Cmd"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">"/bin/sh"</span>
         <span class="token punctuation">]</span>,
         <span class="token string">"Image"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Volumes"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"WorkingDir"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>,
         <span class="token string">"Entrypoint"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"OnBuild"</span><span class="token builtin class-name">:</span> null,
         <span class="token string">"Labels"</span><span class="token builtin class-name">:</span> null
      <span class="token punctuation">}</span>,
      <span class="token string">"Architecture"</span><span class="token builtin class-name">:</span> <span class="token string">"amd64"</span>,
      <span class="token string">"Os"</span><span class="token builtin class-name">:</span> <span class="token string">"linux"</span>,
      <span class="token string">"Size"</span><span class="token builtin class-name">:</span> <span class="token number">9292948</span>,
      <span class="token string">"VirtualSize"</span><span class="token builtin class-name">:</span> <span class="token number">9292948</span>,
      <span class="token string">"GraphDriver"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Data"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">"LowerDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/e4c1f1bb76c66c5d1781a775c8a2ca9338065ea0b398aeaed4230a00a15d2952/diff"</span>,
            <span class="token string">"MergedDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/osfaf1c97lm7awgfbaqibrt6p/merged"</span>,
            <span class="token string">"UpperDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/osfaf1c97lm7awgfbaqibrt6p/diff"</span>,
            <span class="token string">"WorkDir"</span><span class="token builtin class-name">:</span> <span class="token string">"/var/lib/docker/overlay2/osfaf1c97lm7awgfbaqibrt6p/work"</span>
         <span class="token punctuation">}</span>,
         <span class="token string">"Name"</span><span class="token builtin class-name">:</span> <span class="token string">"overlay2"</span>
      <span class="token punctuation">}</span>,
      <span class="token string">"RootFS"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"Type"</span><span class="token builtin class-name">:</span> <span class="token string">"layers"</span>,
         <span class="token string">"Layers"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">"sha256:ded7a220bb058e28ee3254fbba04ca90b679070424424761a53a043b93b612bf"</span>,
            <span class="token string">"sha256:19bc0373c06b6727c115ef34961486b1a9f3b7c8ccbd3441c4b108aeef2b338d"</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>,
      <span class="token string">"Metadata"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
         <span class="token string">"LastTagTime"</span><span class="token builtin class-name">:</span> <span class="token string">"2023-01-08T07:49:58.412703277Z"</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬5æ­¥ â€“ è¾“å‡ºå°†æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼ŒåŒ…å«å…³äºå›¾åƒçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®ƒçš„å›¾å±‚å’Œå›¾å±‚åœ¨ç»ˆç«¯çš„å¤§å°ã€‚<br>
åœ¨ç»ˆç«¯çš„è¾“å‡ºä¸­ä¼šäº§ç”Ÿä¸€ä¸ªå›¾åƒçš„å±‚å’Œå®ƒä»¬çš„å°ºå¯¸çš„åˆ—è¡¨ã€‚</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker</span> image inspect <span class="token parameter variable">--format</span><span class="token operator">=</span><span class="token string">'{{json .RootFS.Layers}}'</span> 499a9ddb3acd
<span class="token punctuation">[</span><span class="token string">"sha256:ded7a220bb058e28ee3254fbba04ca90b679070424424761a53a043b93b612bf"</span>,<span class="token string">"sha256:19bc0373c06b6727c115ef34961486b1a9f3b7c8ccbd3441c4b108aeef2b338d"</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul>
<li>ç»“è®º</li>
</ul>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†å¯»æ‰¾æ¯ä¸ªDockeré•œåƒçš„å±‚å’Œå±‚å¤§å°çš„å„ç§æ–¹æ³•ã€‚é€šè¿‡ä½¿ç”¨Dockerfileæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥ç”¨äºæ„å»ºé•œåƒçš„æŒ‡ä»¤æ¥æŸ¥çœ‹å±‚å’Œå¤§å°ã€‚Dockerå†å²å‘½ä»¤å…è®¸æˆ‘ä»¬æŸ¥çœ‹é•œåƒçš„å†å²ï¼Œå¹¶çœ‹åˆ°å±‚å’Œå®ƒä»¬çš„å¤§å°ã€‚Dockerå›¾åƒæ£€æŸ¥å‘½ä»¤ä¹Ÿæä¾›äº†å…³äºå›¾åƒçš„å±‚å’Œå¤§å°çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
</div></template>


