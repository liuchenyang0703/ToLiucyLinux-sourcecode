<template><div><blockquote>
<p>ğŸ<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»<ExternalLinkIcon/></a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº<ExternalLinkIcon/></a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼</p>
</blockquote>
<p>@[toc]</p>
<h1 id="yamlç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#yamlç®€ä»‹" aria-hidden="true">#</a> yamlç®€ä»‹</h1>
<p>yaml æ˜¯ä¸“é—¨ç”¨æ¥å†™é…ç½®æ–‡ä»¶çš„è¯­è¨€</p>
<p>yamlæ–‡ä»¶ä¹Ÿæ˜¯ä¸€ç§é…ç½®æ–‡ä»¶ç±»å‹ï¼Œåç¼€åæ˜¯.yamlæˆ–.ymléƒ½å¯ä»¥</p>
<blockquote>
<p>è¿ç»´é€‚ç”¨äºk8sã€docker-composeï¼Œä¹Ÿæ˜¯æœ€è¿‘åœ¨å­¦k8sè¦ç”¨åˆ°yamlæ–‡ä»¶æ ¼å¼</p>
</blockquote>
<h1 id="yamlè¯­æ³•è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#yamlè¯­æ³•è§„åˆ™" aria-hidden="true">#</a> yamlè¯­æ³•è§„åˆ™</h1>
<ul>
<li>å¤§å°å†™æ•æ„Ÿ</li>
<li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼ˆä¸èƒ½ç”¨Tabï¼Œåªèƒ½ç”¨ç©ºæ ¼ï¼‰</li>
<li>ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½</li>
<li>#å·è¡¨ç¤ºå•è¡Œæ³¨é‡Š</li>
<li>å­—ç¬¦ä¸²å¯ä»¥ä¸ç”¨å¼•å·æ ‡æ³¨</li>
<li>æ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰æ˜¯ä½¿ç”¨ - å¼€å¤´çš„æ¸…å•å½¢å¼ï¼Œ- åé¢å¿…é¡»åŠ ç©ºæ ¼</li>
<li>è¡¨ç¤ºå¯¹è±¡çš„ : å’Œè¡¨ç¤ºæ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰çš„ - åé¢éƒ½å¿…é¡»è¦æœ‰ç©ºæ ¼ã€‚å¯ä»¥ä½¿ç”¨ - å›è½¦- å›è½¦-å›è½¦ åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œåˆ†éš”å¤šä¸ª YAML å¯¹è±¡</li>
</ul>
<h1 id="yamlè¯­æ³•å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#yamlè¯­æ³•å®ä¾‹" aria-hidden="true">#</a> Yamlè¯­æ³•å®ä¾‹</h1>
<h2 id="æ•°ç»„-åˆ—è¡¨-å®ä¾‹-çŸ­æ¨ªçº¿åŠ ç©ºæ ¼" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„-åˆ—è¡¨-å®ä¾‹-çŸ­æ¨ªçº¿åŠ ç©ºæ ¼" aria-hidden="true">#</a> æ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰å®ä¾‹ï¼› çŸ­æ¨ªçº¿åŠ ç©ºæ ¼ï¼ˆ- ï¼‰</h2>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>  - linux
  - name
  - windows
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="yaml-å¯¹è±¡-å­—å…¸-å®ä¾‹-ç”¨å†’å·åŠ ç©ºæ ¼è¿æ¥é”®å’Œå€¼" tabindex="-1"><a class="header-anchor" href="#yaml-å¯¹è±¡-å­—å…¸-å®ä¾‹-ç”¨å†’å·åŠ ç©ºæ ¼è¿æ¥é”®å’Œå€¼" aria-hidden="true">#</a> Yaml å¯¹è±¡ï¼ˆå­—å…¸ï¼‰å®ä¾‹ï¼›ç”¨å†’å·åŠ ç©ºæ ¼è¿æ¥é”®å’Œå€¼ï¼ˆ: ï¼‰</h2>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>  Kubernetes: 
    linux: <span class="token function">vim</span>
    name: å¼ ä¸‰
    windows: steam
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="yaml-æ•°ç»„-å¯¹è±¡ç»“åˆ-åˆ—è¡¨ä¸­çš„å­—å…¸-å®ä¾‹-çŸ­æ¨ªçº¿åŠ ç©ºæ ¼-ç”¨å†’å·åŠ ç©ºæ ¼è¿æ¥é”®å’Œå€¼" tabindex="-1"><a class="header-anchor" href="#yaml-æ•°ç»„-å¯¹è±¡ç»“åˆ-åˆ—è¡¨ä¸­çš„å­—å…¸-å®ä¾‹-çŸ­æ¨ªçº¿åŠ ç©ºæ ¼-ç”¨å†’å·åŠ ç©ºæ ¼è¿æ¥é”®å’Œå€¼" aria-hidden="true">#</a> Yaml æ•°ç»„ å¯¹è±¡ç»“åˆï¼ˆåˆ—è¡¨ä¸­çš„å­—å…¸ï¼‰å®ä¾‹ï¼›çŸ­æ¨ªçº¿åŠ ç©ºæ ¼ï¼ˆ- ï¼‰ï¼Œç”¨å†’å·åŠ ç©ºæ ¼è¿æ¥é”®å’Œå€¼ï¼ˆ: ï¼‰</h2>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>containers: 
- image: mysql5.7.38
  name: mysql
  restart: always
  ports: 
    - <span class="token number">6379</span>:6379
  volumes: 
    - /etc/localtime:/etc/localtime
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="yamlæ ¼å¼è¯´æ˜ä¸å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#yamlæ ¼å¼è¯´æ˜ä¸å®ä¾‹" aria-hidden="true">#</a> Yamlæ ¼å¼è¯´æ˜ä¸å®ä¾‹</h1>
<h2 id="æ ¼å¼è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#æ ¼å¼è¯´æ˜" aria-hidden="true">#</a> æ ¼å¼è¯´æ˜</h2>
<p>pod.yaml</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment"># yamlæ ¼å¼çš„podå®šä¹‰é—®ä»¶å®Œæ•´å†…å®¹ï¼š</span>
apiVersion: v1       <span class="token comment">#å¿…é€‰ï¼Œç‰ˆæœ¬å·ï¼Œä¾‹å¦‚v1</span>
kind: Pod            <span class="token comment">#å¿…é€‰ï¼ŒPod</span>
metadata:            <span class="token comment">#å¿…é€‰ï¼Œå…ƒæ•°æ®</span>
  name: string       <span class="token comment">#å¿…é€‰ï¼ŒPodåç§°</span>
  namespace: string  <span class="token comment">#å¿…é€‰ï¼ŒPodæ‰€å±çš„å‘½åç©ºé—´</span>
  labels:            <span class="token comment">#è‡ªå®šä¹‰æ ‡ç­¾</span>
    - name: string   <span class="token comment">#è‡ªå®šä¹‰æ ‡ç­¾åå­—</span>
  annotations:       <span class="token comment">#è‡ªå®šä¹‰æ³¨é‡Šåˆ—è¡¨</span>
    - name: string
spec:                <span class="token comment">#å¿…é€‰ï¼ŒPodä¸­å®¹å™¨çš„è¯¦ç»†å®šä¹‰</span>
  containers:        <span class="token comment">#å¿…é€‰ï¼ŒPodä¸­å®¹å™¨åˆ—è¡¨</span>
  - name: string     <span class="token comment">#å¿…é€‰ï¼Œå®¹å™¨åç§°</span>
    image: string    <span class="token comment">#å¿…é€‰ï¼Œå®¹å™¨çš„é•œåƒåç§°</span>
    imagePullPolicy: <span class="token punctuation">[</span>Always <span class="token operator">|</span> Never <span class="token operator">|</span> IfNotPresent<span class="token punctuation">]</span>    <span class="token comment">#è·å–é•œåƒçš„ç­–ç•¥ Alawysè¡¨ç¤ºä¸‹è½½é•œåƒ IfnotPresentè¡¨ç¤ºä¼˜å…ˆä½¿ç”¨æœ¬åœ°é•œåƒï¼Œå¦åˆ™ä¸‹è½½é•œåƒï¼ŒNerverè¡¨ç¤ºä»…ä½¿ç”¨æœ¬åœ°é•œåƒ</span>
    command: <span class="token punctuation">[</span>string<span class="token punctuation">]</span>    <span class="token comment">#å®¹å™¨çš„å¯åŠ¨å‘½ä»¤åˆ—è¡¨ï¼Œå¦‚ä¸æŒ‡å®šï¼Œä½¿ç”¨æ‰“åŒ…æ—¶ä½¿ç”¨çš„å¯åŠ¨å‘½ä»¤</span>
    args: <span class="token punctuation">[</span>string<span class="token punctuation">]</span>       <span class="token comment">#å®¹å™¨çš„å¯åŠ¨å‘½ä»¤å‚æ•°åˆ—è¡¨</span>
    workingDir: string   <span class="token comment">#å®¹å™¨çš„å·¥ä½œç›®å½•</span>
    volumeMounts:        <span class="token comment">#æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„å­˜å‚¨å·é…ç½®</span>
    - name: string       <span class="token comment">#å¼•ç”¨podå®šä¹‰çš„å…±äº«å­˜å‚¨å·çš„åç§°ï¼Œéœ€ç”¨volumes[]éƒ¨åˆ†å®šä¹‰çš„çš„å·å</span>
      mountPath: string  <span class="token comment">#å­˜å‚¨å·åœ¨å®¹å™¨å†…mountçš„ç»å¯¹è·¯å¾„ï¼Œåº”å°‘äº512å­—ç¬¦</span>
      readOnly: boolean  <span class="token comment">#æ˜¯å¦ä¸ºåªè¯»æ¨¡å¼</span>
    ports:               <span class="token comment">#éœ€è¦æš´éœ²çš„ç«¯å£åº“å·åˆ—è¡¨</span>
    - name: string       <span class="token comment">#ç«¯å£å·åç§°</span>
      containerPort: int <span class="token comment">#å®¹å™¨éœ€è¦ç›‘å¬çš„ç«¯å£å·</span>
      hostPort: int      <span class="token comment">#å®¹å™¨æ‰€åœ¨ä¸»æœºéœ€è¦ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸Containerç›¸åŒ</span>
      protocol: string   <span class="token comment">#ç«¯å£åè®®ï¼Œæ”¯æŒTCPå’ŒUDPï¼Œé»˜è®¤TCP</span>
    env:                 <span class="token comment">#å®¹å™¨è¿è¡Œå‰éœ€è®¾ç½®çš„ç¯å¢ƒå˜é‡åˆ—è¡¨</span>
    - name: string       <span class="token comment">#ç¯å¢ƒå˜é‡åç§°</span>
      value: string      <span class="token comment">#ç¯å¢ƒå˜é‡çš„å€¼</span>
    resources:           <span class="token comment">#èµ„æºé™åˆ¶å’Œè¯·æ±‚çš„è®¾ç½®</span>
      limits:            <span class="token comment">#èµ„æºé™åˆ¶çš„è®¾ç½®</span>
        cpu: string      <span class="token comment">#Cpuçš„é™åˆ¶ï¼Œå•ä½ä¸ºcoreæ•°ï¼Œå°†ç”¨äºdocker run --cpu-shareså‚æ•°</span>
        memory: string   <span class="token comment">#å†…å­˜é™åˆ¶ï¼Œå•ä½å¯ä»¥ä¸ºMib/Gibï¼Œå°†ç”¨äºdocker run --memoryå‚æ•°</span>
      requests:          <span class="token comment">#èµ„æºè¯·æ±‚çš„è®¾ç½®</span>
        cpu: string      <span class="token comment">#Cpuè¯·æ±‚ï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡</span>
        memory: string   <span class="token comment">#å†…å­˜æ¸…æ¥šï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡</span>
    livenessProbe:       <span class="token comment">#å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥çš„è®¾ç½®ï¼Œå½“æ¢æµ‹æ— å“åº”å‡ æ¬¡åå°†è‡ªåŠ¨é‡å¯è¯¥å®¹å™¨ï¼Œæ£€æŸ¥æ–¹æ³•æœ‰execã€httpGetå’ŒtcpSocketï¼Œå¯¹ä¸€ä¸ªå®¹å™¨åªéœ€è®¾ç½®å…¶ä¸­ä¸€ç§</span>
      exec:              <span class="token comment">#å¯¹Podå®¹å™¨å†…æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºexecæ–¹å¼</span>
        command: <span class="token punctuation">[</span>string<span class="token punctuation">]</span>  <span class="token comment">#execæ–¹å¼éœ€è¦åˆ¶å®šçš„å‘½ä»¤æˆ–è„šæœ¬</span>
      httpGet:           <span class="token comment">#å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹æ³•è®¾ç½®ä¸ºHttpGetï¼Œéœ€è¦åˆ¶å®šPathã€port</span>
        path: string
        port: number
        host: string
        scheme: string
        HttpHeaders:
        - name: string
          value: string
      tcpSocket:         <span class="token comment">#å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºtcpSocketæ–¹å¼</span>
         port: number
       initialDelaySeconds: <span class="token number">0</span>   <span class="token comment">#å®¹å™¨å¯åŠ¨å®Œæˆåé¦–æ¬¡æ¢æµ‹çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span>
       timeoutSeconds: <span class="token number">0</span>        <span class="token comment">#å¯¹å®¹å™¨å¥åº·æ£€æŸ¥æ¢æµ‹ç­‰å¾…å“åº”çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé»˜è®¤1ç§’</span>
       periodSeconds: <span class="token number">0</span>         <span class="token comment">#å¯¹å®¹å™¨ç›‘æ§æ£€æŸ¥çš„å®šæœŸæ¢æµ‹æ—¶é—´è®¾ç½®ï¼Œå•ä½ç§’ï¼Œé»˜è®¤10ç§’ä¸€æ¬¡</span>
       successThreshold: <span class="token number">0</span>
       failureThreshold: <span class="token number">0</span>
       securityContext:
         privileged:false
    restartPolicy: <span class="token punctuation">[</span>Always <span class="token operator">|</span> Never <span class="token operator">|</span> OnFailure<span class="token punctuation">]</span><span class="token comment">#Podçš„é‡å¯ç­–ç•¥ï¼ŒAlwaysè¡¨ç¤ºä¸€æ—¦ä¸ç®¡ä»¥ä½•ç§æ–¹å¼ç»ˆæ­¢è¿è¡Œï¼Œkubeletéƒ½å°†é‡å¯ï¼ŒOnFailureè¡¨ç¤ºåªæœ‰Podä»¥é0é€€å‡ºç é€€å‡º</span>
    nodeSelector: obeject  <span class="token comment">#è®¾ç½®NodeSelectorè¡¨ç¤ºå°†è¯¥Podè°ƒåº¦åˆ°åŒ…å«è¿™ä¸ªlabelçš„nodeä¸Šï¼Œä»¥keyï¼švalueçš„æ ¼å¼æŒ‡å®šå°†è¯¥Podè°ƒåº¦åˆ°åŒ…å«è¿™ä¸ªlabelçš„nodeä¸Šï¼Œä»¥keyï¼švalueçš„æ ¼å¼æŒ‡å®š</span>
    imagePullSecrets:      <span class="token comment">#Pullé•œåƒæ—¶ä½¿ç”¨çš„secretåç§°ï¼Œä»¥keyï¼šsecretkeyæ ¼å¼æŒ‡å®š</span>
    - name: string
    hostNetwork:false      <span class="token comment">#æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼Œé»˜è®¤ä¸ºfalseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ</span>
    volumes:               <span class="token comment">#åœ¨è¯¥podä¸Šå®šä¹‰å…±äº«å­˜å‚¨å·åˆ—è¡¨</span>
    - name: string         <span class="token comment">#å…±äº«å­˜å‚¨å·åç§°ï¼ˆvolumesç±»å‹æœ‰å¾ˆå¤šç§ï¼‰</span>
      emptyDir: <span class="token punctuation">{</span><span class="token punctuation">}</span>         <span class="token comment">#ç±»å‹ä¸ºemtyDirçš„å­˜å‚¨å·ï¼Œä¸PodåŒç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªä¸´æ—¶ç›®å½•ã€‚ä¸ºç©ºå€¼</span>
      hostPath: string     <span class="token comment">#ç±»å‹ä¸ºhostPathçš„å­˜å‚¨å·ï¼Œè¡¨ç¤ºæŒ‚è½½Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½•</span>
        path: string       <span class="token comment">#Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½•ï¼Œå°†è¢«ç”¨äºåŒæœŸä¸­mountçš„ç›®å½•</span>
      secret:              <span class="token comment">#ç±»å‹ä¸ºsecretçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é›†ç¾¤ä¸å®šä¹‰çš„secreå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨</span>
        scretname: string  
        items:     
        - key: string
          path: string
      configMap:           <span class="token comment">#ç±»å‹ä¸ºconfigMapçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é¢„å®šä¹‰çš„configMapå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨</span>
        name: string
        items:
        - key: string
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>deployment.yaml</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>apiVersion: extensions/v1beta1   <span class="token comment">#æ¥å£ç‰ˆæœ¬</span>
kind: Deployment                 <span class="token comment">#æ¥å£ç±»å‹</span>
metadata:
  name: cango-demo               <span class="token comment">#Deploymentåç§°</span>
  namespace: cango-prd           <span class="token comment">#å‘½åç©ºé—´</span>
  labels:
    app: cango-demo              <span class="token comment">#æ ‡ç­¾</span>
spec:
  replicas: <span class="token number">3</span>
  strategy:
    rollingUpdate:          <span class="token comment">#ç”±äºreplicasä¸º3,åˆ™æ•´ä¸ªå‡çº§,podä¸ªæ•°åœ¨2-4ä¸ªä¹‹é—´</span>
      maxSurge: <span class="token number">1</span>           <span class="token comment">#æ»šåŠ¨å‡çº§æ—¶ä¼šå…ˆå¯åŠ¨1ä¸ªpod</span>
      maxUnavailable: <span class="token number">1</span>     <span class="token comment">#æ»šåŠ¨å‡çº§æ—¶å…è®¸çš„æœ€å¤§Unavailableçš„podä¸ªæ•°</span>
  template:         
    metadata:
      labels:
        app: cango-demo     <span class="token comment">#æ¨¡æ¿åç§°å¿…å¡«</span>
    sepc:                   <span class="token comment">#å®šä¹‰å®¹å™¨æ¨¡æ¿ï¼Œè¯¥æ¨¡æ¿å¯ä»¥åŒ…å«å¤šä¸ªå®¹å™¨</span>
      containers:                                                                   
        - name: cango-demo                                                              <span class="token comment">#é•œåƒåç§°</span>
          image: swr.cn-east-2.myhuaweicloud.com/cango-prd/cango-demo:0.0.1-SNAPSHOT    <span class="token comment">#é•œåƒåœ°å€</span>
          command: <span class="token punctuation">[</span> <span class="token string">"/bin/sh"</span>,<span class="token string">"-c"</span>,<span class="token string">"cat /etc/config/path/to/special-key"</span> <span class="token punctuation">]</span>             <span class="token comment">#å¯åŠ¨å‘½ä»¤</span>
          args:                                                                         <span class="token comment">#å¯åŠ¨å‚æ•°</span>
            - <span class="token string">'-storage.local.retention=$(STORAGE_RETENTION)'</span>
            - <span class="token string">'-storage.local.memory-chunks=$(STORAGE_MEMORY_CHUNKS)'</span>
            - <span class="token string">'-config.file=/etc/prometheus/prometheus.yml'</span>
            - <span class="token string">'-alertmanager.url=http://alertmanager:9093/alertmanager'</span>
            - <span class="token string">'-web.external-url=$(EXTERNAL_URL)'</span>
<span class="token comment">#å¦‚æœcommandå’Œargså‡æ²¡æœ‰å†™ï¼Œé‚£ä¹ˆç”¨Dockeré»˜è®¤çš„é…ç½®ã€‚</span>
<span class="token comment">#å¦‚æœcommandå†™äº†ï¼Œä½†argsæ²¡æœ‰å†™ï¼Œé‚£ä¹ˆDockeré»˜è®¤çš„é…ç½®ä¼šè¢«å¿½ç•¥è€Œä¸”ä»…ä»…æ‰§è¡Œ.yamlæ–‡ä»¶çš„commandï¼ˆä¸å¸¦ä»»ä½•å‚æ•°çš„ï¼‰ã€‚</span>
<span class="token comment">#å¦‚æœcommandæ²¡å†™ï¼Œä½†argså†™äº†ï¼Œé‚£ä¹ˆDockeré»˜è®¤é…ç½®çš„ENTRYPOINTçš„å‘½ä»¤è¡Œä¼šè¢«æ‰§è¡Œï¼Œä½†æ˜¯è°ƒç”¨çš„å‚æ•°æ˜¯.yamlä¸­çš„argsã€‚</span>
<span class="token comment">#å¦‚æœå¦‚æœcommandå’Œargséƒ½å†™äº†ï¼Œé‚£ä¹ˆDockeré»˜è®¤çš„é…ç½®è¢«å¿½ç•¥ï¼Œä½¿ç”¨.yamlçš„é…ç½®ã€‚</span>
          imagePullPolicy: IfNotPresent  <span class="token comment">#å¦‚æœä¸å­˜åœ¨åˆ™æ‹‰å–</span>
          livenessProbe:       <span class="token comment">#è¡¨ç¤ºcontaineræ˜¯å¦å¤„äºliveçŠ¶æ€ã€‚å¦‚æœLivenessProbeå¤±è´¥ï¼ŒLivenessProbeå°†ä¼šé€šçŸ¥kubeletå¯¹åº”çš„containerä¸å¥åº·äº†ã€‚éšåkubeletå°†killæ‰</span>
            httpGet:
              path: /health    <span class="token comment">#å¦‚æœæ²¡æœ‰å¿ƒè·³æ£€æµ‹æ¥å£å°±ä¸º/</span>
              port: <span class="token number">8080</span>
              scheme: HTTP
            initialDelaySeconds: <span class="token number">60</span> <span class="token comment">#å¯åŠ¨åå»¶æ—¶å¤šä¹…å¼€å§‹è¿è¡Œæ£€æµ‹</span>
            timeoutSeconds: <span class="token number">5</span>
            successThreshold: <span class="token number">1</span>
            failureThreshold: <span class="token number">5</span>
          readinessProbe:
            httpGet:
              path: /health     <span class="token comment">#å¦‚æœæ²¡æœ‰å¿ƒè·³æ£€æµ‹æ¥å£å°±ä¸º/</span>
              port: <span class="token number">8080</span>
              scheme: HTTP
            initialDelaySeconds: <span class="token number">30</span> <span class="token comment">##å¯åŠ¨åå»¶æ—¶å¤šä¹…å¼€å§‹è¿è¡Œæ£€æµ‹</span>
            timeoutSeconds: <span class="token number">5</span>
            successThreshold: <span class="token number">1</span>
            failureThreshold: <span class="token number">5</span>
          resources:              <span class="token comment">##CPUå†…å­˜é™åˆ¶</span>
            requests:
              cpu: <span class="token number">2</span>
              memory: 2048Mi
            limits:
              cpu: <span class="token number">2</span>
              memory: 2048Mi
          env:                    <span class="token comment">##é€šè¿‡ç¯å¢ƒå˜é‡çš„æ–¹å¼ï¼Œç›´æ¥ä¼ é€’pod=è‡ªå®šä¹‰Linux OSç¯å¢ƒå˜é‡</span>
            - name: LOCAL_KEY     <span class="token comment">#æœ¬åœ°Key</span>
              value: value
            - name: CONFIG_MAP_KEY  <span class="token comment">#å±€ç­–ç•¥å¯ä½¿ç”¨configMapçš„é…ç½®Keyï¼Œ</span>
              valueFrom:
                configMapKeyRef:
                  name: special-config   <span class="token comment">#configmapä¸­æ‰¾åˆ°nameä¸ºspecial-config</span>
                  key: special.type      <span class="token comment">#æ‰¾åˆ°nameä¸ºspecial-configé‡Œdataä¸‹çš„key</span>
          ports:
            - name: http
              containerPort: <span class="token number">8080</span>   <span class="token comment">#å¯¹serviceæš´éœ²ç«¯å£</span>
          volumeMounts:             <span class="token comment">#æŒ‚è½½volumesä¸­å®šä¹‰çš„ç£ç›˜</span>
          - name: log-cache
            mount: /tmp/log
          - name: sdb               <span class="token comment">#æ™®é€šç”¨æ³•ï¼Œè¯¥å·è·Ÿéšå®¹å™¨é”€æ¯ï¼ŒæŒ‚è½½ä¸€ä¸ªç›®å½•</span>
            mountPath: /data/media    
          - name: nfs-client-root    <span class="token comment">#ç›´æ¥æŒ‚è½½ç¡¬æ–¹æ³•ï¼Œå¦‚æŒ‚è½½ä¸‹é¢çš„nfsç›®å½•åˆ°/mnt/nfs</span>
            mountPath: /mnt/nfs
          - name: example-volume-config  <span class="token comment">#é«˜çº§ç”¨æ³•ç¬¬1ç§ï¼Œå°†ConfigMapçš„log-script,backup-scriptåˆ†åˆ«æŒ‚è½½åˆ°/etc/configç›®å½•ä¸‹çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„path/to/...ä¸‹</span>
            mountPath: /etc/config       
          - name: rbd-pvc                <span class="token comment">#é«˜çº§ç”¨æ³•ç¬¬2ç§ï¼ŒæŒ‚è½½PVC(PresistentVolumeClaim)</span>
<span class="token comment">#ä½¿ç”¨volumeå°†ConfigMapä½œä¸ºæ–‡ä»¶æˆ–ç›®å½•ç›´æ¥æŒ‚è½½ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªkey-valueé”®å€¼å¯¹éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ï¼Œkeyä¸ºæ–‡ä»¶åï¼Œvalueä¸ºå†…å®¹</span>
  volumes:  <span class="token comment"># å®šä¹‰ç£ç›˜ç»™ä¸Šé¢volumeMountsæŒ‚è½½</span>
  - name: log-cache
    emptyDir: <span class="token punctuation">{</span><span class="token punctuation">}</span>
  - name: sdb  <span class="token comment">#æŒ‚è½½å®¿ä¸»æœºä¸Šé¢çš„ç›®å½•</span>
    hostPath:
      path: /any/path/it/will/be/replaced
  - name: example-volume-config  <span class="token comment"># ä¾›ConfigMapæ–‡ä»¶å†…å®¹åˆ°æŒ‡å®šè·¯å¾„ä½¿ç”¨</span>
    configMap:
      name: example-volume-config  <span class="token comment">#ConfigMapä¸­åç§°</span>
      items:
      - key: log-script           <span class="token comment">#ConfigMapä¸­çš„Key</span>
        path: path/to/log-script  <span class="token comment">#æŒ‡å®šç›®å½•ä¸‹çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„path/to/log-script</span>
      - key: backup-script        <span class="token comment">#ConfigMapä¸­çš„Key</span>
        path: path/to/backup-script  <span class="token comment">#æŒ‡å®šç›®å½•ä¸‹çš„ä¸€ä¸ªç›¸å¯¹è·¯å¾„path/to/backup-script</span>
  - name: nfs-client-root         <span class="token comment">#ä¾›æŒ‚è½½NFSå­˜å‚¨ç±»å‹</span>
    nfs:
      server: <span class="token number">10.42</span>.0.55          <span class="token comment">#NFSæœåŠ¡å™¨åœ°å€</span>
      path: /opt/public           <span class="token comment">#showmount -e çœ‹ä¸€ä¸‹è·¯å¾„</span>
  - name: rbd-pvc                 <span class="token comment">#æŒ‚è½½PVCç£ç›˜</span>
    persistentVolumeClaim:
      claimName: rbd-pvc1         <span class="token comment">#æŒ‚è½½å·²ç»ç”³è¯·çš„pvcç£ç›˜</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>services.yaml</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>apiVersion: v1
kind: Service
matadata:                                <span class="token comment">#å…ƒæ•°æ®</span>
  name: string                           <span class="token comment">#serviceçš„åç§°</span>
  namespace: string                      <span class="token comment">#å‘½åç©ºé—´</span>
  labels:                                <span class="token comment">#è‡ªå®šä¹‰æ ‡ç­¾å±æ€§åˆ—è¡¨</span>
    - name: string
  annotations:                           <span class="token comment">#è‡ªå®šä¹‰æ³¨è§£å±æ€§åˆ—è¡¨</span>
    - name: string
spec:                                    <span class="token comment">#è¯¦ç»†æè¿°</span>
  selector: <span class="token punctuation">[</span><span class="token punctuation">]</span>                           <span class="token comment">#label selectoré…ç½®ï¼Œå°†é€‰æ‹©å…·æœ‰labelæ ‡ç­¾çš„Podä½œä¸ºç®¡ç†</span>
                                         <span class="token comment">#èŒƒå›´</span>
  type: string                           <span class="token comment">#serviceçš„ç±»å‹ï¼ŒæŒ‡å®šserviceçš„è®¿é—®æ–¹å¼ï¼Œé»˜è®¤ä¸º</span>
                                         <span class="token comment">#clusterIp</span>
  clusterIP: string                      <span class="token comment">#è™šæ‹ŸæœåŠ¡åœ°å€</span>
  sessionAffinity: string                <span class="token comment">#æ˜¯å¦æ”¯æŒsession</span>
  ports:                                 <span class="token comment">#serviceéœ€è¦æš´éœ²çš„ç«¯?åˆ—è¡¨</span>
  - name: string                         <span class="token comment">#ç«¯å£åç§°</span>
    protocol: string                     <span class="token comment">#ç«¯å£åè®®ï¼Œæ”¯æŒTCPå’ŒUDPï¼Œé»˜è®¤TCP</span>
    port: int                            <span class="token comment">#æœåŠ¡ç›‘å¬çš„ç«¯å£å·</span>
    targetPort: int                      <span class="token comment">#éœ€è¦è½¬å‘åˆ°åç«¯Podçš„ç«¯å£å·</span>
    nodePort: int                        <span class="token comment">#å½“type = NodePortæ—¶ï¼ŒæŒ‡å®šæ˜ å°„åˆ°ç‰©ç†æœºçš„ç«¯å£å·</span>
  status:                                <span class="token comment">#å½“spce.type=LoadBalanceræ—¶ï¼Œè®¾ç½®å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„åœ°å€</span>
    loadBalancer:                        <span class="token comment">#å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨</span>
      ingress:                           <span class="token comment">#å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨</span>
        ip: string                       <span class="token comment">#å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„Ipåœ°å€å€¼</span>
        hostname: string                 <span class="token comment">#å¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„ä¸»æœºå</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>job.yaml</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>apiVersion: batch/v1
kind: Job
metadata:
  name: job-demo
spec:
  template:
    metadata:
      name: job-demo
    spec:
      restartPolicy: Never  <span class="token comment">#Jobçš„RestartPolicyä»…æ”¯æŒNeverå’ŒOnFailureä¸¤ç§ï¼Œä¸æ”¯æŒAlwaysï¼Œæˆ‘ä»¬çŸ¥é“Jobå°±ç›¸å½“äºæ¥æ‰§è¡Œä¸€ä¸ªæ‰¹å¤„ç†ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œå°±ç»“æŸäº†</span>
      containers:
      - name: counter
        image: busybox
        command:
        - <span class="token string">"bin/sh"</span>
        - <span class="token string">"-c"</span>
        - "for <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token number">9</span> <span class="token number">8</span> <span class="token number">7</span> <span class="token number">6</span> <span class="token number">5</span> <span class="token number">4</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Cronjob.yaml</p>
<blockquote>
<p>CronJobå…¶å®å°±æ˜¯åœ¨Jobçš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†æ—¶é—´è°ƒåº¦ï¼Œæˆ‘ä»¬å¯ä»¥ï¼šåœ¨ç»™å®šçš„æ—¶é—´ç‚¹è¿è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥å‘¨æœŸæ€§åœ°åœ¨ç»™å®šæ—¶é—´ç‚¹è¿è¡Œã€‚è¿™ä¸ªå®é™…ä¸Šå’Œæˆ‘ä»¬Linuxä¸­çš„crontabå°±éå¸¸ç±»ä¼¼äº†ã€‚ä¸€ä¸ªCronJobå¯¹è±¡å…¶å®å°±å¯¹åº”ä¸­crontabæ–‡ä»¶ä¸­çš„ä»»åŠ¡ï¼Œå®ƒæ ¹æ®é…ç½®çš„æ—¶é—´æ ¼å¼å‘¨æœŸæ€§åœ°è¿è¡Œä¸€ä¸ªJobï¼Œæ ¼å¼å’Œcrontabä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token comment">#crontabçš„æ ¼å¼å¦‚ä¸‹ï¼š</span>
<span class="token comment">#åˆ†æ—¶æ—¥æœˆå‘¨è¦è¿è¡Œçš„å‘½ä»¤ç¬¬1åˆ—åˆ†é’Ÿ0ï½59 ç¬¬2åˆ—æ—¶0ï½23ï¼‰ç¬¬3åˆ—æ—¥1ï½31 ç¬¬4åˆ—æœˆ1ï½12 ç¬¬5åˆ—å‘¨0ï½7ï¼ˆ0å’Œ7è¡¨ç¤ºæ˜ŸæœŸå¤©ï¼‰ç¬¬6åˆ—è¦è¿è¡Œçš„å‘½ä»¤</span>
apiVersion: batch/v2alpha1
kind: CronJob
metadata:
  name: cronjob-demo
spec:
  schedule: <span class="token string">"*/1 * * * *"</span>
  jobTemplate:
    spec:
      template:
        spec:
          restartPolicy: OnFailure
          containers:
          - name: hello
            image: busybox
            args:
            - <span class="token string">"bin/sh"</span>
            - <span class="token string">"-c"</span>
            - <span class="token string">"for i in 9 8 7 6 5 4 3 2 1; do echo <span class="token variable">$i</span>; done"</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote>
<p>æˆ‘ä»¬è¿™é‡Œçš„Kindæ˜¯CronJobäº†ï¼Œè¦æ³¨æ„çš„æ˜¯.spec.scheduleå­—æ®µæ˜¯å¿…é¡»å¡«å†™çš„ï¼Œç”¨æ¥æŒ‡å®šä»»åŠ¡è¿è¡Œçš„å‘¨æœŸï¼Œæ ¼å¼å°±å’Œcrontabä¸€æ ·ï¼Œå¦å¤–ä¸€ä¸ªå­—æ®µæ˜¯.spec.jobTemplate, ç”¨æ¥æŒ‡å®šéœ€è¦è¿è¡Œçš„ä»»åŠ¡ï¼Œæ ¼å¼å½“ç„¶å’ŒJobæ˜¯ä¸€è‡´çš„ã€‚è¿˜æœ‰ä¸€äº›å€¼å¾—æˆ‘ä»¬å…³æ³¨çš„å­—æ®µ.spec.successfulJobsHistoryLimitå’Œ.spec.failedJobsHistoryLimitï¼Œè¡¨ç¤ºå†å²é™åˆ¶ï¼Œæ˜¯å¯é€‰çš„å­—æ®µã€‚å®ƒä»¬æŒ‡å®šäº†å¯ä»¥ä¿ç•™å¤šå°‘å®Œæˆå’Œå¤±è´¥çš„Jobï¼Œé»˜è®¤æ²¡æœ‰é™åˆ¶ï¼Œæ‰€æœ‰æˆåŠŸå’Œå¤±è´¥çš„Jobéƒ½ä¼šè¢«ä¿ç•™ã€‚ç„¶åï¼Œå½“è¿è¡Œä¸€ä¸ªCron Jobæ—¶ï¼ŒJobå¯ä»¥å¾ˆå¿«å°±å †ç§¯å¾ˆå¤šï¼Œæ‰€ä»¥ä¸€èˆ¬æ¨èè®¾ç½®è¿™ä¸¤ä¸ªå­—æ®µçš„å€¼ã€‚å¦‚æœè®¾ç½®é™åˆ¶çš„å€¼ä¸º 0ï¼Œé‚£ä¹ˆç›¸å…³ç±»å‹çš„Jobå®Œæˆåå°†ä¸ä¼šè¢«ä¿ç•™ã€‚</p>
</blockquote>
<h2 id="å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#å®ä¾‹" aria-hidden="true">#</a> å®ä¾‹</h2>
<p>cs.yaml</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>apiVersion: v1  <span class="token comment">#APIç‰ˆæœ¬å·ï¼Œç”¨äºè¿­ä»£æˆ‘ä»¬çš„æ›´æ–°ç‰ˆæœ¬</span>
kind: Pod       <span class="token comment">#èµ„æºå¯¹è±¡çš„ç±»å‹ï¼Œæœ‰podï¼ŒNodeï¼ŒJobï¼ŒService</span>
metadata:       <span class="token comment">#èµ„æºå…ƒæ•°æ®ï¼Œæ ‡è®°å¯¹è±¡ï¼Œæ–¹ä¾¿ç®¡ç†</span>
  name: hll-pod <span class="token comment">#ç»™podèµ·åç§°</span>
  labels:       <span class="token comment">#ç»™podæ‰“æ ‡ç­¾ï¼Œæ–¹ä¾¿æ‰¾</span>
    env: demo   <span class="token comment">#æ³¨å…¥å®¹å™¨å†…çš„ç¯å¢ƒå˜é‡</span>
    owner: feifei
spec:           <span class="token comment">#èµ„æºè§„æ ¼ï¼Œpodå†…å®¹å™¨ç›¸å…³ä¿¡æ¯</span>
  replicas: <span class="token number">1</span>   <span class="token comment">#å‰¯æœ¬æ•°é‡</span>
  selector:     <span class="token comment">#æ ‡ç­¾é€‰æ‹©å™¨</span>
    matchLabels:
      app: web

  template:     <span class="token comment">#podæ¨¡æ¿</span>
    metadata:   <span class="token comment">#podå…ƒæ•°æ®</span>
      labels:   <span class="token comment">#ç»™podæ‰“æ ‡ç­¾ï¼Œæ–¹ä¾¿æ‰¾</span>
        app: web
  spec:         <span class="token comment">#podè§„æ ¼</span>
    containers:   <span class="token comment">#å®¹å™¨é…ç½®</span>
    - image: nll:v1    <span class="token comment">#è¿è¡Œå®¹å™¨é•œåƒ</span>
      name: nll              <span class="token comment">#å®¹å™¨åç§°</span>
      ports:                 <span class="token comment">#ç«¯å£å·</span>
        - containerPort: <span class="token number">80</span>    <span class="token comment">#å®¹å™¨ç«¯å£å·</span>
        - <span class="token number">8090</span>:8221            <span class="token comment">#å®¹å™¨å†…æœåŠ¡æ˜ å°„ç«¯å£</span>
      volumes:                 <span class="token comment">#å®¹å™¨æŒä¹…åŒ–</span>
        - /etc/localtime:/etc/localtime         <span class="token comment">#å®¹å™¨å†…æœåŠ¡æ˜ å°„è·¯å¾„</span>
      restart: always          <span class="token comment">#é‡å¯å®¹å™¨ç›´æ¥é‡å¯æœåŠ¡</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>k8s yamlæ–‡ä»¶åˆ›å»ºå’Œåˆ é™¤</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code>kubectl apply <span class="token parameter variable">-f</span> cs.yml
kubectl delete <span class="token parameter variable">-f</span> cs.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>docker-composeæ–‡ä»¶åˆ›å»º</p>
<div class="language-bash line-numbers-mode" data-ext="sh"><pre v-pre class="language-bash"><code><span class="token function">docker-compose</span> <span class="token parameter variable">-f</span> cs.yaml up <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote>
<p>æ³¨æ„ï¼šdocker-composeå’Œk8sç”¨çš„yamlæ–‡ä»¶å†™æ³•è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«çš„ã€‚</p>
</blockquote>
</div></template>


