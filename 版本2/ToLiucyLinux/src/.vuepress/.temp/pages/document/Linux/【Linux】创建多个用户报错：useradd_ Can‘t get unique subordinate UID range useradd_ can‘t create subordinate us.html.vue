<template><div><blockquote>
<p>ğŸ‘¨â€ğŸ“<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…</a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»</a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»</a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº</a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼<br>
ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„<br>
ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—</p>
</blockquote>
<hr>
<h2 id="æŠ¥é”™æ•°æ®" tabindex="-1"><a class="header-anchor" href="#æŠ¥é”™æ•°æ®"><span>æŠ¥é”™æ•°æ®</span></a></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">useradd:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> Can't get unique subordinate UID range</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">useradd: can't</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> subordinate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> IDs</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æŠ¥é”™åŸå› " tabindex="-1"><a class="header-anchor" href="#æŠ¥é”™åŸå› "><span>æŠ¥é”™åŸå› </span></a></h2>
<blockquote>
<p>è¿™ä¸ªæŠ¥é”™æ˜¯å› ä¸ºï¼šè¿™æ˜¯ç”±äºåœ¨åˆ›å»ºæ–°ç”¨æˆ·æ—¶ï¼Œç³»ç»Ÿæ— æ³•ä¸ºå…¶åˆ†é…å”¯ä¸€çš„ç”¨æˆ·IDèŒƒå›´ï¼ˆUID rangeï¼‰æ‰€å¯¼è‡´çš„é”™è¯¯ã€‚å¯èƒ½æ˜¯ç”±äºç³»ç»Ÿä¸­å·²ç»å­˜åœ¨äº†å¤ªå¤šçš„ç”¨æˆ·ï¼Œå¯¼è‡´UIDå·²ç»å…¨éƒ¨è¢«ä½¿ç”¨å®Œæ¯•ï¼Œæ²¡æœ‰å¯ç”¨çš„èŒƒå›´æ¥åˆ†é…ç»™æ–°ç”¨æˆ·ã€‚è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•æ˜¯éœ€è¦æ‰‹åŠ¨ä¸ºæ–°ç”¨æˆ·åˆ†é…ä¸€ä¸ªå¯ç”¨çš„UIDèŒƒå›´ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹â€œ/etc/login.defsâ€æ–‡ä»¶ä¸­çš„â€œUID_MINâ€å’Œâ€œUID_MAXâ€å€¼æ¥å¢åŠ å¯ç”¨çš„UIDèŒƒå›´ã€‚å¦å¤–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åˆ é™¤ä¸€äº›ä¸å¿…è¦çš„ç”¨æˆ·æ¥é‡Šæ”¾ä¸€äº›UIDèŒƒå›´ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™ä¸ªæ˜¯å› ä¸ºéœ€è¦åœ¨æœåŠ¡å™¨ä¸­åˆ›å»º20000ä¸ªç”¨æˆ·ï¼Œä½†æ˜¯è·‘åˆ°äº†8000å¤šä¸ªå°±å¼€å§‹æŠ¥é”™ã€‚</p>
</blockquote>
<h2 id="è§£å†³æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#è§£å†³æ–¹æ³•"><span>è§£å†³æ–¹æ³•</span></a></h2>
<p>ç¼–è¾‘/etc/login.defsï¼Œå°†ä»¥ä¸‹ä»£ç è¿½åŠ åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@locahost ~]# vim /etc/login.defs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUB_UID_MIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   100000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUB_UID_MAX</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   2000000000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUB_UID_COUNT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65536</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUB_GID_MIN</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   100000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUB_GID_MAX</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66">   20000000000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUB_GID_COUNT</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 65536</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•"><span>æµ‹è¯•</span></a></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">useradd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mailgroup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /sbin/nologin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cs</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>æµ‹è¯•å®Œæˆã€‚</p>
<h2 id="é™„åŠ -linuxåˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç åŠé‚®ä»¶ç³»ç»Ÿ" tabindex="-1"><a class="header-anchor" href="#é™„åŠ -linuxåˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç åŠé‚®ä»¶ç³»ç»Ÿ"><span>é™„åŠ ï¼šLinuxåˆ›å»ºå¤šä¸ªç”¨æˆ·å¹¶è®¾ç½®å¯†ç åŠé‚®ä»¶ç³»ç»Ÿ</span></a></h2>
<p>åˆ›å»º20000ä¸ªç”¨æˆ·ï¼Œå¹¶è®¾ç½®å¯†ç ï¼Œå’Œåˆ›å»ºmailé‚®ä»¶ç³»ç»Ÿã€‚</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">while</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> read</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">do</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        useradd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /sbin/nologin</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $username</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">        echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 123456</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">passwd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --stdin</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $username</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /home/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/mail/.imap/INBOX</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        chown</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -R</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:mailgroup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  /home/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$username</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">done</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> &#x3C; /root/username.txt</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /root/username.txt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">while</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> read</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> username</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">do</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        useradd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /sbin/nologin</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $username</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">        echo</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 123456</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">passwd</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --stdin</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $username</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /home/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">/mail/.imap/INBOX</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        chown</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -R</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75"> $username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">:mailgroup</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  /home/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">$username</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">done</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>


