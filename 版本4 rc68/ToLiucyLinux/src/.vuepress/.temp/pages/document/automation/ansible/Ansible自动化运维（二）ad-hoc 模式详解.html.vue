<template><div><blockquote>
<p>ğŸ‘¨â€ğŸ“<strong>åšä¸»ç®€ä»‹</strong></p>
<p>â€ƒâ€ƒğŸ…<a href="https://blog.csdn.net/liu_chen_yang?type=blog" target="_blank" rel="noopener noreferrer">äº‘è®¡ç®—é¢†åŸŸä¼˜è´¨åˆ›ä½œè€…</a><br>
â€ƒâ€ƒğŸ…<a href="https://bbs.huaweicloud.com/community/myblog" target="_blank" rel="noopener noreferrer">åä¸ºäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»</a><br>
â€ƒâ€ƒğŸ…<a href="https://developer.aliyun.com/my?spm=a2c6h.13148508.setting.3.21fc4f0eCmz1v3#/article?_k=zooqoz" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸“å®¶åšä¸»</a><br>
ğŸ’Š<strong>äº¤æµç¤¾åŒºï¼š</strong><a href="https://bbs.csdn.net/forums/lcy" target="_blank" rel="noopener noreferrer">è¿ç»´äº¤æµç¤¾åŒº</a> æ¬¢è¿å¤§å®¶çš„åŠ å…¥ï¼<br>
ğŸ‹ å¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼ğŸ˜„<br>
ğŸ‰å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ ç‚¹èµ ğŸ‘ğŸ» è¯„è®º ğŸ’¬ æ”¶è— â­ï¸ åŠ å…³æ³¨+ğŸ’—</p>
</blockquote>
<h1 id="ansible-ä¸­çš„-ad-hoc-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ansible-ä¸­çš„-ad-hoc-æ¨¡å¼"><span>Ansible ä¸­çš„ ad-hoc æ¨¡å¼</span></a></h1>
<p>Ad-hocæ¨¡å¼çš„ä½¿ç”¨åœºæ™¯:</p>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„ä¿¡æ¯</label></li>
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> æ‹·è´æ—¥å¿—åˆ°æœ¬åœ°</label></li>
</ul>
<p>Ad-hocæ¨¡å¼çš„å‘½ä»¤æ ¼å¼ ï¼š</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> æ¨¡å—</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> â€œå…·ä½“å‘½ä»¤â€</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">å¸¸ç”¨é€‰é¡¹:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡å—ï¼Œä¸æŒ‡å®šé»˜è®¤ä½¿ç”¨commandæ¨¡å—</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> æŒ‡å®šè¦æ‰§è¡Œçš„å…·ä½“å‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  æŒ‡å®šè‡ªå®šä¹‰çš„ä¸»æœºæ¸…å•é…ç½®æ–‡ä»¶</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">-f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  ä¸€æ¬¡è¿”å›å‡ ä¸ªç»“æœ</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1ã€ansibleå¸®åŠ©å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1ã€ansibleå¸®åŠ©å‘½ä»¤"><span>1ã€Ansibleå¸®åŠ©å‘½ä»¤</span></a></h2>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible-doc</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> 		#å¸®åŠ©å‘½ä»¤ </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible-doc</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -l</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   	#åˆ—å‡ºæ‰€ä»¥çš„æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible-doc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> æ¨¡å—å</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   #æŸ¥çœ‹æ¨¡å—çš„è¯¦ç»†ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible-doc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> æ¨¡å—å</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -s</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  #æŸ¥çœ‹æ¨¡å—çš„é€‰é¡¹ä½¿ç”¨è¯´æ˜</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2ã€ad-hoc-æ¨¡å¼æ‰§è¡Œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#_2ã€ad-hoc-æ¨¡å¼æ‰§è¡Œæµç¨‹"><span>2ã€ad-hoc æ¨¡å¼æ‰§è¡Œæµç¨‹</span></a></h2>
<p>æ¨¡å—æ‰§è¡Œçš„å·¥ä½œæµç¨‹:</p>
<ul>
<li>
<p>1.ä¸»æ§ç«¯å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤ï¼›</p>
</li>
<li>
<p>2.å°†æ¨¡å—æ‹·è´åˆ°å—æ§ç«¯ï¼›</p>
</li>
<li>
<p>3.æŒ‰ç…§æ¨¡å—å®šä¹‰çš„æ“ä½œåœ¨å—æ§ç«¯æ‰§è¡Œï¼›</p>
</li>
<li>
<p>4.è¿”å›ä¿¡æ¯ï¼Œåˆ é™¤å—æ§ç«¯æ¨¡å—ï¼›</p>
</li>
</ul>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<p>ansibleæ¨¡å—å¯ä»¥ä½¿ç”¨çš„å‰ææ˜¯ï¼šä¸»æ§ç«¯ä¸å—æ§ç«¯pythonç‰ˆæœ¬ä¸€è‡´ï¼Œå¹¶ä¸”Ansibleçš„æ¨¡å—æ˜¯å¹‚ç­‰æ‰§è¡Œçš„</p>
</blockquote>
<p>Ansibleæ‰§è¡Œå‘½ä»¤çš„è¿”å›å€¼é¢œè‰²:</p>
<blockquote>
<font color=feces yellow>å±é»„è‰²:æ‰§è¡Œå‘½ä»¤æˆåŠŸï¼Œå¹¶ä¸”åšäº†ä¿®æ”¹ï¼›</font><font color=mediumseagreen>è‰å¸½ç»¿:æ‰§è¡Œå‘½ä»¤æˆåŠŸï¼ŒåªæŸ¥çœ‹ä¿¡æ¯ï¼Œæ²¡æœ‰ä¿®æ”¹</font><font color=deeppink>ç«ç‘°çº¢:æ‰§è¡Œå¤±è´¥ï¼ŒæŠ¥é”™ </font><font color=rebeccapurple>è‘¡è„ç´«:è¡¨ç¤ºå¯¹å‘½ä»¤å‘é”™çš„æ“ä½œæœ‰è­¦å‘Šä¿¡æ¯</font></blockquote>
<p>æ¯”å¦‚ä¸Šé¢ï¼Œæœ€å¼€å§‹çš„ä¸»æœºæ¸…å•é…ç½®è§„åˆ™ä¸­ï¼Œè¿”å›çš„ç»“æœå°±æ˜¯ç»¿è‰²çš„ï¼Œè¡¨ç¤ºåªæŸ¥çœ‹ï¼Œå¹¶ä¸ä¼šåšä¿®æ”¹ã€‚</p>
<h2 id="_3ã€ansibleä¸­å¸¸è§çš„è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#_3ã€ansibleä¸­å¸¸è§çš„è¿”å›å€¼"><span>3ã€Ansibleä¸­å¸¸è§çš„è¿”å›å€¼</span></a></h2>
<table>
<thead>
<tr>
<th>è¿”å›å€¼</th>
<th>è¿”å›å€¼å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>changed</td>
<td>å‡ ä¹æ‰€æœ‰çš„Ansibleæ¨¡å—éƒ½ä¼šè¿”å›è¯¥å˜é‡ï¼Œè¡¨ç¤ºæ¨¡å—æ˜¯å¦å¯¹è¿œç¨‹ä¸»æœºæ‰§è¡Œäº†ä¿®æ”¹æ“ä½œ</td>
</tr>
<tr>
<td>failed</td>
<td>å¦‚æœæ¨¡å—æœªèƒ½æ‰§è¡Œå®Œæˆï¼Œå°†è¿”å›failedä¸ºtrue</td>
</tr>
<tr>
<td>msg</td>
<td>æ¨¡å—æ‰§è¡Œå¤±è´¥çš„åŸå› ï¼Œå¸¸è§çš„é”™è¯¯å¦‚sshè¿æ¥å¤±è´¥</td>
</tr>
<tr>
<td>rc</td>
<td>ä¸å‘½ä»¤è¡Œå·¥å…·ç›¸å…³çš„æ¨¡å—ä¼šè¿”å›rc,è¡¨ç¤ºæ‰§è¡ŒLinuxå‘½ä»¤çš„çŠ¶æ€ç </td>
</tr>
<tr>
<td>stdout</td>
<td>ä¸rcç±»ä¼¼ï¼Œè¿”å›çš„æ˜¯æ ‡å‡†è¾“å‡ºçš„ç»“æœ</td>
</tr>
<tr>
<td>stderr</td>
<td>ä¸rcç±»ä¼¼ï¼Œè¿”å›çš„æ˜¯æ ‡å‡†é”™è¯¯çš„ç»“æœ</td>
</tr>
<tr>
<td>backup_file</td>
<td>æ‰€æœ‰å­˜åœ¨backupé€‰é¡¹çš„æ¨¡å—ï¼Œç”¨æ¥è¿”å›å¤‡ä»½æ–‡ä»¶çš„è·¯å¾„</td>
</tr>
<tr>
<td>results</td>
<td>åº”ç”¨åœ¨playbookä¸­å­˜åœ¨å¾ªç¯çš„æƒ…å†µï¼Œè¿”å›å¤šä¸ªç»“æœ</td>
</tr>
</tbody>
</table>
<h2 id="_4ã€å¸¸ç”¨æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_4ã€å¸¸ç”¨æ¨¡å—"><span>4ã€å¸¸ç”¨æ¨¡å—</span></a></h2>
<ul>
<li>è¿œç¨‹å‘½ä»¤ç›¸å…³</li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">1.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> command</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">  	# é»˜è®¤ä½¿ç”¨æ¨¡å—ï¼Œç”¨äºè¿œç¨‹æ‰§å‘½ä»¤ï¼Œä¸æ”¯æŒç®¡é“</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">2.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shell</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   		# è¿œç¨‹æ‰§è¡Œå‘½ä»¤ï¼Œæ”¯æŒç®¡é“ </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">3.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> raw</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">    		# sshç™»å½•ï¼Œå†æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">4.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> script</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   	# è¿œç¨‹æ‰§è¡Œæœ¬åœ°è„šæœ¬</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">5.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> yum</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">			# è¿œç¨‹å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">6.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> copy</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">			# æ¨é€æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">7.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">			# å¯¹æ–‡ä»¶æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">8.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">		# æ§åˆ¶å¯åŠ¨å…³é—­æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">9.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> systemd</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">   	# æ§åˆ¶å¯åŠ¨å…³é—­æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">10.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cron</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">		# å®šæ—¶ä»»åŠ¡æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">11.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mount</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">		# æŒ‚è½½ä¸å¸è½½æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">12.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user/group</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	# ç”¨äºç®¡ç†çš„ç”¨æˆ·åˆ›å»ºä¸åˆ é™¤</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">13.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> unarchive</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	# è§£å‹ç¼©æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">14.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> get_url</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">		# ä¸‹è½½æ–‡ä»¶ï¼Œç±»ä¼¼äºcurl</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">15.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> firewalld</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">	# é˜²ç«å¢™</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">16.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> selinux</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">		# selinux</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">17.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> setup</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">		# è·å–ä¸»æœºä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">18.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> git</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">			# gitå‘½ä»¤æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">19.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> sysctl</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">      # æ§åˆ¶å†…æ ¸</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5ã€å¸¸ç”¨æ¨¡å—çš„ç”¨æ³•" tabindex="-1"><a class="header-anchor" href="#_5ã€å¸¸ç”¨æ¨¡å—çš„ç”¨æ³•"><span>5ã€å¸¸ç”¨æ¨¡å—çš„ç”¨æ³•</span></a></h2>
<h3 id="_5-1-command-æ¨¡å—-ç”¨äºè¿œç¨‹æ‰§å‘½ä»¤-ä¸æ”¯æŒç®¡é“" tabindex="-1"><a class="header-anchor" href="#_5-1-command-æ¨¡å—-ç”¨äºè¿œç¨‹æ‰§å‘½ä»¤-ä¸æ”¯æŒç®¡é“"><span>5.1 command  æ¨¡å—ï¼šç”¨äºè¿œç¨‹æ‰§å‘½ä»¤ï¼Œä¸æ”¯æŒç®¡é“</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-2"> command  æ¨¡å—ï¼šç”¨äºè¿œç¨‹æ‰§å‘½ä»¤ï¼Œä¸æ”¯æŒç®¡é“</label></li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> command</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> â€œå…·ä½“å‘½ä»¤â€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> â€œå…·ä½“å‘½ä»¤â€</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># é»˜è®¤ä¸ºcommandæ¨¡å—</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦è¿œç¨‹çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# ansible web_group -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"mkdir /root/cs123"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[WARNING]: Consider using the file module with </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">state</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">directory</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF"> rather</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> than</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> running</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'mkdir'.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">  If</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> need</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> because</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> insufficient</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> can</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'warn: false'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> command</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> task</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 'command_warnings=False'</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ansible.cfg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> rid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> message.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> >></span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> >></span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-2-shell-æ¨¡å—-è¿œç¨‹æ‰§è¡Œå‘½ä»¤-æ”¯æŒç®¡é“" tabindex="-1"><a class="header-anchor" href="#_5-2-shell-æ¨¡å—-è¿œç¨‹æ‰§è¡Œå‘½ä»¤-æ”¯æŒç®¡é“"><span>5.2 shell æ¨¡å—ï¼šè¿œç¨‹æ‰§è¡Œå‘½ä»¤ï¼Œæ”¯æŒç®¡é“</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-3"> shell æ¨¡å—ï¼šè¿œç¨‹æ‰§è¡Œå‘½ä»¤ï¼Œæ”¯æŒç®¡é“</label></li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> shell</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> â€œå…·ä½“å‘½ä»¤â€</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦è¿œç¨‹çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# ansible web_group -m shell -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"ls /home/test/"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> >></span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xunjian-yong.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åœ¨æ‰§è¡Œçš„æ—¶å€™å¤šä¸ªåœ°å€æ˜¯ä¸åˆ†å¼€çš„ï¼Œéœ€è¦ä»”ç»†è§‚çœ‹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> >></span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xunjian-yong.sh</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-3-raw-æ¨¡å—-sshç™»å½•-å†æ‰§è¡Œ" tabindex="-1"><a class="header-anchor" href="#_5-3-raw-æ¨¡å—-sshç™»å½•-å†æ‰§è¡Œ"><span>5.3 raw æ¨¡å—ï¼šsshç™»å½•ï¼Œå†æ‰§è¡Œ</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-4"> raw æ¨¡å—ï¼šsshç™»å½•ï¼Œå†æ‰§è¡Œ</label></li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> raw</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> â€œå…·ä½“å‘½ä»¤â€</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦è¿œç¨‹çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# ansible web_group -m raw -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"ls /home/test/"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> >></span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xunjian-yong.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Shared</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connection</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.16.10.232</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> closed.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">rc</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> >></span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">xunjian-yong.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">Shared</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> connection</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 172.16.11.209</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> closed.</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-4-script-æ¨¡å—-è¿œç¨‹æ‰§è¡Œæœ¬åœ°è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_5-4-script-æ¨¡å—-è¿œç¨‹æ‰§è¡Œæœ¬åœ°è„šæœ¬"><span>5.4 script æ¨¡å—ï¼šè¿œç¨‹æ‰§è¡Œæœ¬åœ°è„šæœ¬</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-5"> script æ¨¡å—ï¼šè¿œç¨‹æ‰§è¡Œæœ¬åœ°è„šæœ¬</label></li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> script</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "your_script_file"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªå‘½ä»¤ä¸­ï¼Œå°†<code v-pre>ä¸»æœºç»„åç§°</code>æ›¿æ¢ä¸ºæ‚¨çš„ç›®æ ‡ä¸»æœºåæˆ–ç»„åï¼Œå¹¶å°†<code v-pre>your_script_file</code>æ›¿æ¢ä¸ºæ‚¨è¦åœ¨ç›®æ ‡ä¸»æœºä¸Šæ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„ã€‚</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦è¿œç¨‹çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# ansible web_group -m script -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"/home/test/a.sh"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "rc"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stderr"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "Shared connection to 172.16.11.209 closed.\r\n",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stderr_lines"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "Shared connection to 172.16.11.209 closed."</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ], </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stdout"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "bin  games    lib    libexec\t    openssh-9.4p1.tar.gz  openssl-1.1.1t  share\r\netc  include  lib64  openssh-9.4p1  openssl\t\t  sbin\t\t  src\r\n",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stdout_lines"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "bin  games    lib    libexec\t    openssh-9.4p1.tar.gz  openssl-1.1.1t  share"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "etc  include  lib64  openssh-9.4p1  openssl\t\t  sbin\t\t  src"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "rc"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stderr"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "Shared connection to 172.16.10.232 closed.\r\n",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stderr_lines"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "Shared connection to 172.16.10.232 closed."</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ], </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stdout"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "bin  games    lib    libexec\t    openssl\t    phpstudy  share\r\netc  include  lib64  openssh-9.3p2  openssl-1.1.1t  sbin      src\r\n",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "stdout_lines"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "bin  games    lib    libexec\t    openssl\t    phpstudy  share"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "etc  include  lib64  openssh-9.3p2  openssl-1.1.1t  sbin      src"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>a.shä¸­å†…å®¹ä¸ºï¼š<code v-pre>ls /usr/local/</code></p>
<p>è¿™å°†åœ¨ç›®æ ‡ä¸»æœºä¸Šæ‰§è¡Œ<code v-pre>a.sh</code>è„šæœ¬æ–‡ä»¶ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œ<code v-pre>script</code>æ¨¡å—ä¼šå°†è„šæœ¬æ–‡ä»¶ä¼ è¾“åˆ°ç›®æ ‡ä¸»æœºï¼Œç„¶ååœ¨ç›®æ ‡ä¸»æœºä¸Šæ‰§è¡Œå®ƒã€‚å› æ­¤ï¼Œç¡®ä¿è„šæœ¬æ–‡ä»¶åœ¨æ§åˆ¶èŠ‚ç‚¹ä¸Šå¯ç”¨ï¼Œå¹¶ä¸”å…·æœ‰å¯æ‰§è¡Œæƒé™ï¼ˆä½¿ç”¨<code v-pre>chmod +x</code>å‘½ä»¤æ·»åŠ æ‰§è¡Œæƒé™ï¼‰ã€‚</p>
<p>ä¸<code v-pre>raw</code>æ¨¡å—ä¸åŒï¼Œ<code v-pre>script</code>æ¨¡å—å…è®¸æ‚¨åœ¨ç›®æ ‡ä¸»æœºä¸Šæ‰§è¡Œæœ¬åœ°è„šæœ¬æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨ä¼ è¾“è„šæœ¬å†…å®¹ã€‚è¿™å¯¹äºæ‰§è¡Œå¤æ‚çš„æœ¬åœ°æ“ä½œéå¸¸æœ‰ç”¨ã€‚</p>
<hr>
<h3 id="_5-5-yum-æ¨¡å—-è¿œç¨‹å®‰è£…è½¯ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-5-yum-æ¨¡å—-è¿œç¨‹å®‰è£…è½¯ä»¶"><span>5.5 yum æ¨¡å—ï¼šè¿œç¨‹å®‰è£…è½¯ä»¶</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-6"> yum æ¨¡å—ï¼šè¿œç¨‹å®‰è£…è½¯ä»¶</label></li>
</ul>
<p><code v-pre>name</code>=è½¯ä»¶åŒ…çš„åï¼Œå¤šä¸ªè½¯ä»¶åŒ…é€—å·éš”å¼€</p>
<p><code v-pre>state</code>=<code v-pre>installed/present</code>å®‰è£…ã€<code v-pre>removed/absent</code>å¸è½½ ã€<code v-pre>lastest</code> æ›´æ–°ã€<code v-pre>installed</code>åˆ—å‡ºå·²å®‰è£…çš„åŒ…</p>
<blockquote>
<p>yumæ¨¡å—çš„æ›´å¤šä½¿ç”¨å¯ä½¿ç”¨<code v-pre>ansible-doc yum</code>æŸ¥çœ‹ã€‚</p>
</blockquote>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> yum</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=è¦å®‰è£…\å¸è½½\æ›´æ–°çš„åŒ…å state=æ˜¯å®‰è£…è¿˜æ˜¯å¸è½½è¿˜æ˜¯æ›´æ–°"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦å®‰è£…çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ›´æ–°lrzszå‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# ansible web_group -m yum -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"name=lrzsz state=latest"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#å®‰è£…tldrå’Œnetstatå‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# ansible web_group -m yum -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"name=tldr,net-tools state=present"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUCCESS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "ansible_facts"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "discovered_interpreter_python"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/usr/bin/python"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }, </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> false</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "msg"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "rc"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "results"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "tldr-1.2.0-4.el7.noarch providing tldr is already installed"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "net-tools-2.0-0.25.20131004git.el7.x86_64 providing net-tools is already installed"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUCCESS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "ansible_facts"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "discovered_interpreter_python"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/usr/bin/python"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }, </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> false</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "msg"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "rc"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "results"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "tldr-1.2.0-4.el7.noarch providing tldr is already installed"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "net-tools-2.0-0.25.20131004git.el7.x86_64 providing net-tools is already installed"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-6-copy-æ¨¡å—-æ¨é€æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-6-copy-æ¨¡å—-æ¨é€æ–‡ä»¶"><span>5.6 copy æ¨¡å—ï¼šæ¨é€æ–‡ä»¶</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-7" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-7"> copy æ¨¡å—ï¼šæ¨é€æ–‡ä»¶</label></li>
</ul>
<p>æ¨é€æ–‡ä»¶æ¨¡å—</p>
<p><code v-pre>src</code>= æºæ–‡ä»¶è·¯å¾„</p>
<p><code v-pre>dest</code>= ç›®æ ‡æ–‡ä»¶è·¯å¾„</p>
<p><code v-pre>content</code>= æŒ‡å®šæ–‡ä»¶å†…å®¹ï¼Œåªæœ‰ç›®æ ‡æ–‡ä»¶ï¼›å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ä¼šåˆ›å»º</p>
<p><code v-pre>owner</code>=  æŒ‡å®šå±ä¸»</p>
<p><code v-pre>group</code>=  æŒ‡å®šå±ç»„</p>
<p><code v-pre>mode</code>=   æŒ‡å®šæƒé™</p>
<p>copy æ¨¡å—çš„æ›´å¤šä½¿ç”¨å¯ä½¿ç”¨<code v-pre>ansible-doc copy</code>æŸ¥çœ‹ã€‚</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> copy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "src=æ–‡ä»¶è·¯å¾„åŠæ–‡ä»¶ dest=ç›®å½•æ–‡ä»¶è·¯å¾„"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦å¤åˆ¶çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# ansible web_group -m copy -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"src=/root/tongji.sh dest=/home/test/"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUCCESS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "ansible_facts"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "discovered_interpreter_python"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/usr/bin/python"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }, </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> false</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "checksum"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "4eff49d9f511f76b733cf739e820f8b7d17ff3f3",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "dest"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/home/test/tongji.sh",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "gid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "group"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "mode"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "0644",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "owner"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "path"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/home/test/tongji.sh",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "size"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10156,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "state"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "file",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "uid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">SUCCESS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "ansible_facts"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "discovered_interpreter_python"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/usr/bin/python"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }, </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> false</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "checksum"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "4eff49d9f511f76b733cf739e820f8b7d17ff3f3",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "dest"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/home/test/tongji.sh",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "gid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "group"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "mode"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "0644",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "owner"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "path"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/home/test/tongji.sh",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "size"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 10156,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "state"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "file",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "uid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://lcy-blog.oss-cn-beijing.aliyuncs.com/blog/416afb174f78414d8773763fd6917af3.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>
<p>è¿™æ—¶å€™å°±å¯ä»¥çœ‹åˆ°ä¸¤å°æœåŠ¡å™¨ä¸Šéƒ½æœ‰è¿™ä¸ªæ–‡ä»¶äº†ï¼Œå¦‚æœæƒ³è¦å…ˆå¤‡ä»½åœ¨å¤åˆ¶ï¼Œåé¢ä¼šè®²åˆ°å®æˆ˜ï¼›</p>
<hr>
<h3 id="_5-7-file-æ¨¡å—-å¯¹æ–‡ä»¶æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-7-file-æ¨¡å—-å¯¹æ–‡ä»¶æ“ä½œ"><span>5.7 file æ¨¡å—ï¼šå¯¹æ–‡ä»¶æ“ä½œ</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-8" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-8"> file æ¨¡å—ï¼šå¯¹æ–‡ä»¶æ“ä½œ</label></li>
</ul>
<p>å¯¹æ–‡ä»¶æ“ä½œï¼Œåˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•ã€åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€ä¿®æ”¹æ–‡ä»¶æƒé™</p>
<p><code v-pre>path</code>  æŒ‡å®šè·¯å¾„</p>
<p><code v-pre>src</code>  æºæ–‡ä»¶è·¯å¾„</p>
<p><code v-pre>recurse</code>  é€’å½’æˆæƒ</p>
<p><code v-pre>owner</code>  æŒ‡å®šå±ä¸»</p>
<p><code v-pre>group</code>  æŒ‡å®šå±ç»„</p>
<p><code v-pre>mode</code>   æŒ‡å®šæƒé™</p>
<p><code v-pre>state</code> 	æŒ‡å®šæ–‡ä»¶çš„çŠ¶æ€</p>
<p>â€ƒâ€ƒ<code v-pre>directory</code> â€ƒâ€ƒåœ¨è¿œç«¯åˆ›å»ºç›®å½•</p>
<p>â€ƒâ€ƒ<code v-pre>touch</code>â€ƒâ€ƒåœ¨è¿œç«¯åˆ›å»ºæ–‡ä»¶</p>
<p>â€ƒâ€ƒ<code v-pre>link</code>â€ƒâ€ƒåˆ›å»ºè½¯è¿æ¥</p>
<p>â€ƒâ€ƒ<code v-pre>hard</code>â€ƒâ€ƒåˆ›å»ºç¡¬è¿æ¥</p>
<p>â€ƒâ€ƒ<code v-pre>absent</code>â€ƒâ€ƒè¡¨ç¤ºåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "æ“ä½œå†…å®¹"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦æ‰§è¡Œçš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºä¸€ä¸ªç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "path=/home/cs state=directory"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "path=/home/cs/cs.sh state=touch"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å°†/home/test/tongji.shè½¯è¿æ¥åˆ°/home/cs/ä¸‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "src=/home/test/tongji.sh path=/home/cs/tongji_link.sh state=link"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¹¶ç»™äºˆrootç”¨æˆ·å’Œæ‰§è¡Œæƒé™</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> file</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "path=/home/cs/lv.sh state=touch mode=777 owner=root group=root"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-8-service-æ¨¡å—-æ§åˆ¶å¯åŠ¨å…³é—­æœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_5-8-service-æ¨¡å—-æ§åˆ¶å¯åŠ¨å…³é—­æœåŠ¡"><span>5.8 service æ¨¡å—ï¼šæ§åˆ¶å¯åŠ¨å…³é—­æœåŠ¡</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-9" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-9"> service æ¨¡å—ï¼šæ§åˆ¶å¯åŠ¨å…³é—­æœåŠ¡</label></li>
</ul>
<p><code v-pre>name </code>   å®šä¹‰è¦å¯åŠ¨æœåŠ¡çš„åç§°</p>
<p><code v-pre>state</code>     æŒ‡å®šæœåŠ¡çŠ¶æ€</p>
<p>â€ƒâ€ƒ<code v-pre>started</code>â€ƒå¯åŠ¨æœåŠ¡ï¼ˆå¹‚ç­‰ï¼‰</p>
<p>â€ƒâ€ƒ<code v-pre>stopped</code>â€ƒåœæ­¢æœåŠ¡ï¼ˆå¹‚ç­‰ï¼‰</p>
<p>â€ƒâ€ƒ<code v-pre>restarted</code>â€ƒé‡å¯æœåŠ¡</p>
<p>â€ƒâ€ƒ<code v-pre>reloaded</code>â€ƒé‡è½½æœåŠ¡</p>
<p><code v-pre>enabled</code>    å¼€æœºè‡ªå¯</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=æœåŠ¡åç§° state=æœåŠ¡æ“ä½œ enabled=æ˜¯å¦è®¾ç½®å¼€æœºè‡ªå¯"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦æ‰§è¡Œçš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¯ä»¥å…ˆå®‰è£…ä¸€ä¸ªhttpdæœåŠ¡æ¥æµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> yum</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=httpd state=present"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å¯åŠ¨httpdæœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=httpd state=started"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å…³é—­httpdæœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=httpd state=stopped"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># é‡å¯httpdæœåŠ¡çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=httpd state=restarted"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è®¾ç½®httpdæœåŠ¡å¼€æœºè‡ªå¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=httpd state=enabled"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># é‡å¯httpdæœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=httpd state=restarted enabled=yes"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è®¾ç½®å®Œå¯ä»¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹æ˜¯å¦è®¾ç½®äº†å¼€æœºè‡ªå¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> is-enabled</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> httpd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> list-unit-files</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --type=service</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --state=enabled</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> --no-pager</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "enabled"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> httpd</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-9-cron-æ¨¡å—-å®šæ—¶ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#_5-9-cron-æ¨¡å—-å®šæ—¶ä»»åŠ¡"><span>5.9 cron æ¨¡å—ï¼šå®šæ—¶ä»»åŠ¡</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-10" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-10"> cron æ¨¡å—ï¼šå®šæ—¶ä»»åŠ¡</label></li>
</ul>
<p><code v-pre>name</code> æ³¨é‡Šè¯´æ˜</p>
<p><code v-pre>minuteã€hourã€dayã€monthã€weekday</code>ï¼ˆåˆ†ã€æ—¶ã€æ—¥ã€æœˆã€å‘¨ï¼‰</p>
<p><code v-pre>user</code>  æŒ‡å®šç”¨æˆ·</p>
<p><code v-pre>job</code>   æ“ä½œçš„æŒ‡ä»¤</p>
<p><code v-pre>state  </code></p>
<p>â€ƒâ€ƒ<code v-pre>present</code>  åˆ›å»º</p>
<p>â€ƒâ€ƒ<code v-pre>absent</code>  åˆ é™¤</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cron</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "æ“ä½œå†…å®¹"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦è®¾ç½®çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.10.232</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web_group:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ç›´æ¥å†™ä¸€ä¸ªå®šæ—¶ä»»åŠ¡(ä¸å†™æ‰§è¡Œæ—¶é—´ï¼Œé»˜è®¤å°±æ˜¯æ¯åˆ†é’Ÿä¸€æ¬¡ï¼›ä¸å†™nameé»˜è®¤ä¸ºNone);ä¸å»ºè®®ä½¿ç”¨ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cron</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "job='/bin/sh /home/cs/tongji_link.sh'"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹è®¾ç½®çš„å®šæ—¶ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">crontab</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -l</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è®¾ç½®å®šæ—¶æ‰§è¡Œç»Ÿè®¡è„šæœ¬ï¼ˆæ¯ä¸€ä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œä½¿ç”¨rootç”¨æˆ·ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cron</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name="æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ç»Ÿè®¡è„šæœ¬" minute=0 hour=*/1 day=* month=* weekday=* user=root job='/bin/sh /home/cs/tongji_link.sh' state=present"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ é™¤æŒ‡å®šçš„å®šæ—¶ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web_group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> cron</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name="æ¯å°æ—¶æ‰§è¡Œä¸€æ¬¡ç»Ÿè®¡è„šæœ¬" minute=0 hour=*/1 day=* month=* weekday=* user=root job='/bin/sh /home/cs/tongji_link.sh' state=absent"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-10-mount-æ¨¡å—-ç”¨äºç®¡ç†è®¾å¤‡æŒ‚è½½ä¸å¸è½½" tabindex="-1"><a class="header-anchor" href="#_5-10-mount-æ¨¡å—-ç”¨äºç®¡ç†è®¾å¤‡æŒ‚è½½ä¸å¸è½½"><span>5.10 mount æ¨¡å—ï¼šç”¨äºç®¡ç†è®¾å¤‡æŒ‚è½½ä¸å¸è½½</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-11" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-11"> mount æ¨¡å—ï¼šç”¨äºç®¡ç†è®¾å¤‡æŒ‚è½½ä¸å¸è½½</label></li>
</ul>
<blockquote>
<p>mountæ“ä½œéœ€è¦è°¨æ…ï¼Œä¸€ä¸å°å¿ƒä¼šå¯¼è‡´æœåŠ¡å™¨ä¸å¯ä½¿ç”¨ã€‚</p>
</blockquote>
<p><code v-pre>src </code>ï¼šæŒ‡å®šæŒ‚è½½æº</p>
<p><code v-pre>path</code>ï¼šæŒ‡å®šæŒ‚è½½ç‚¹ (æŒ‚è½½ç‚¹ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º)</p>
<p><code v-pre>fstype</code>ï¼šæŒ‡å®šæ–‡ä»¶ç³»ç»Ÿç±»å‹</p>
<p><code v-pre>opts</code>ï¼šæŒ‚è½½å‚æ•°ï¼Œé»˜è®¤ä¸å†™ä¸ºï¼šdefaults</p>
<p><code v-pre>dump</code>ï¼šæ˜¯å¦å¤‡ä»½ï¼š0è¡¨ç¤ºä¸è¿›è¡Œå¤‡ä»½</p>
<p><code v-pre>passno</code>ï¼šæ–‡ä»¶ç³»ç»Ÿæ£€æµ‹ï¼š0è¡¨ç¤ºä¸è¿›è¡Œæ–‡ä»¶ç³»ç»Ÿæ£€æµ‹</p>
<p><code v-pre>state</code></p>
<p>â€ƒâ€ƒ<code v-pre>present</code>â€ƒâ€ƒå†™å…¥fstabï¼Œä½†å®é™…æ²¡æœ‰æŒ‚è½½ï¼Œéœ€è¦é‡å¯æœåŠ¡å™¨</p>
<p>â€ƒâ€ƒ<code v-pre>absent</code>â€ƒâ€ƒå–æ¶ˆä¸´æ—¶æŒ‚è½½ï¼Œå¹¶ä¸”åˆ é™¤fstab</p>
<p>â€ƒâ€ƒ<code v-pre>mounted</code>â€ƒâ€ƒå†™å…¥fstabï¼Œå¹¶ä¸”ç›´æ¥æŒ‚è½½äº†ï¼ˆå¸¸ç”¨ï¼‰</p>
<p>â€ƒâ€ƒ<code v-pre>unmounted</code>â€ƒâ€ƒä¸´æ—¶å–æ¶ˆæŒ‚è½½ï¼Œä½†æ˜¯æ²¡æœ‰åˆ é™¤fstabï¼Œé‡å¯æœåŠ¡å™¨ä¹‹åå°±ä¼šæ¢å¤ï¼ˆå¸¸ç”¨ï¼‰</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "æ“ä½œå†…å®¹"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦æŒ‚è½½çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ä¸´æ—¶å–æ¶ˆæŒ‚è½½åœ¨dataçš„/dev/sdbï¼ˆå¸¸ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "src=/dev/sdb path=/data/ state=unmounted"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å–æ¶ˆæŒ‚è½½åœ¨dataçš„/dev/sdbï¼Œå¹¶ä¸”ç›´æ¥åˆ é™¤fstabä¸­çš„å•ç‹¬é…ç½®ï¼ˆæš‚æ—¶æ²¡æœ‰æˆåŠŸï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "src=/dev/sdb path=/data/ state=absent"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æ·»åŠ ä¸€ä¸ªæŒ‚è½½å†™å…¥fstabï¼Œä½†å®é™…æ²¡æœ‰æŒ‚è½½ï¼Œéœ€è¦é‡å¯æœåŠ¡å™¨ï¼Œé‡å¯å®Œå°±ä¼šè‡ªåŠ¨æŒ‚è½½ä¸Š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "src=/dev/sdb path=/data fstype=xfs opts=defaults dump=0 passno=0 state=present"</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æ·»åŠ ä¸€ä¸ªæŒ‚è½½å†™å…¥fstabï¼Œå¹¶ä¸”ç›´æ¥æŒ‚è½½ä¸Šï¼ˆå¸¸ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> mount</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "src=/dev/sdb path=/data fstype=xfs opts=defaults dump=0 passno=0 state=mounted"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-11-user-group-æ¨¡å—-ç”¨äºç®¡ç†çš„ç”¨æˆ·åˆ›å»ºä¸åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#_5-11-user-group-æ¨¡å—-ç”¨äºç®¡ç†çš„ç”¨æˆ·åˆ›å»ºä¸åˆ é™¤"><span>5.11 user/group æ¨¡å—ï¼šç”¨äºç®¡ç†çš„ç”¨æˆ·åˆ›å»ºä¸åˆ é™¤</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-12" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-12"> user/group æ¨¡å—ï¼šç”¨äºç®¡ç†çš„ç”¨æˆ·åˆ›å»ºä¸åˆ é™¤</label></li>
</ul>
<blockquote>
<p>userç”¨äºç®¡ç†ç”¨æˆ·çš„åˆ›å»ºä¸åˆ é™¤ï¼Œç›¸å½“äºuseradd,userdel,usermod;</p>
<p>groupæ¨¡å—ç”¨äºç®¡ç†ç”¨æˆ·ç»„çš„ï¼Œç›¸å½“äºgroupadd,groupdelç­‰ã€‚</p>
</blockquote>
<p><code v-pre>name</code>ï¼ˆå¿…éœ€ï¼‰ï¼šæŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·åã€‚</p>
<p><code v-pre>state</code>ï¼šæŒ‡å®šç”¨æˆ·è´¦æˆ·çš„çŠ¶æ€ã€‚å¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š</p>
<p>â€ƒâ€ƒ<code v-pre>present</code>ï¼šåˆ›å»ºç”¨æˆ·ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</p>
<p>â€ƒâ€ƒ<code v-pre>absent</code>ï¼šåˆ é™¤ç”¨æˆ·ã€‚</p>
<p>â€ƒâ€ƒ<code v-pre>locked</code>ï¼šé”å®šç”¨æˆ·è´¦æˆ·ã€‚</p>
<p>â€ƒâ€ƒ<code v-pre>unlocked</code>ï¼šè§£é”ç”¨æˆ·è´¦æˆ·ã€‚</p>
<p>â€ƒâ€ƒ<code v-pre>password</code>ï¼šä»…æ›´æ”¹ç”¨æˆ·çš„å¯†ç ã€‚</p>
<p><code v-pre>uid</code>ï¼šæŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·IDï¼ˆUIDï¼‰</p>
<p><code v-pre>gid</code>ï¼š æŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·IDï¼ˆGIDï¼‰</p>
<p><code v-pre>group</code>ï¼šæŒ‡å®šç”¨æˆ·çš„åˆå§‹ä¸»ç»„ã€‚</p>
<p><code v-pre>groups</code>ï¼šæŒ‡å®šç”¨æˆ·æ‰€å±çš„å…¶ä»–ç»„ã€‚</p>
<p><code v-pre>home</code>ï¼šæŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•è·¯å¾„ã€‚</p>
<p><code v-pre>shell</code>ï¼šæŒ‡å®šç”¨æˆ·çš„ç™»å½• shellã€‚</p>
<p><code v-pre>password</code>ï¼šæŒ‡å®šç”¨æˆ·çš„å¯†ç ï¼ˆå·²åŠ å¯†çš„å¯†ç ï¼‰ã€‚</p>
<p><code v-pre>append</code>ï¼šå¦‚æœä¸º <code v-pre>yes</code>ï¼Œåˆ™æ·»åŠ ç”¨æˆ·åˆ°ç»„è€Œä¸æ˜¯æ›¿æ¢ï¼ˆé»˜è®¤ä¸º <code v-pre>no</code>ï¼‰ã€‚</p>
<p><code v-pre>remove</code>ï¼šå¦‚æœä¸º <code v-pre>yes</code>ï¼Œåˆ™åˆ é™¤ç”¨æˆ·çš„å®¶ç›®å½•å’Œé‚®ç®±æ–‡ä»¶ï¼ˆé»˜è®¤ä¸º <code v-pre>no</code>ï¼‰ã€‚</p>
<p><code v-pre>move_home</code>ï¼šå¦‚æœä¸º <code v-pre>yes</code>ï¼Œåˆ™åœ¨æ›´æ”¹ç”¨æˆ·çš„ä¸»ç›®å½•æ—¶ç§»åŠ¨ç”¨æˆ·çš„æ–‡ä»¶ï¼ˆé»˜è®¤ä¸º <code v-pre>no</code>ï¼‰ã€‚</p>
<p><code v-pre>create_home</code>ï¼šå¦‚æœä¸º <code v-pre>yes</code>ï¼Œåˆ™åˆ›å»ºç”¨æˆ·çš„ä¸»ç›®å½•ï¼ˆé»˜è®¤ä¸º <code v-pre>yes</code>ï¼‰ã€‚</p>
<p><code v-pre>update_password</code>ï¼šå¦‚æœä¸º <code v-pre>always</code>ï¼Œåˆ™å§‹ç»ˆæ›´æ–°å¯†ç ï¼ˆé»˜è®¤ä¸º <code v-pre>on_create</code>ï¼‰ã€‚</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "æ“ä½œå†…å®¹"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "æ“ä½œå†…å®¹"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦ç®¡ç†çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºç”¨æˆ·ï¼Œä½¿ç”¨ user æ¨¡å—åˆ›å»ºä¸€ä¸ªåä¸º johndoe çš„æ–°ç”¨æˆ·ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=johndoe state=present"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/passwd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ é™¤ç”¨æˆ·ï¼Œä½¿ç”¨ user æ¨¡å—åˆ é™¤ä¸€ä¸ªåä¸º johndoe çš„ç”¨æˆ·ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=johndoe state=absent"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ é™¤ç”¨æˆ·å’Œhomeå®¶ç›®å½•ï¼Œä½¿ç”¨ user æ¨¡å—åˆ é™¤ä¸€ä¸ªåä¸º johndoe çš„ç”¨æˆ·ï¼šï¼ˆå¸¸ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=johndoe remove=yes state=absent"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/passwd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ›å»ºç»„ï¼Œä½¿ç”¨ group æ¨¡å—åˆ›å»ºä¸€ä¸ªåä¸º mygroup çš„æ–°ç»„ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=mygroup state=present"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/group</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åˆ é™¤ç»„ï¼Œä½¿ç”¨ group æ¨¡å—åˆ é™¤ä¸€ä¸ªåä¸º mygroup çš„ç»„ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=mygroup state=absent"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/group</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åœ¨å°†ä¸Šé¢çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„åœ¨åˆ›å»ºä¸€éï¼›</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=johndoe state=present"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> group</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=mygroup state=present"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æ·»åŠ ç”¨æˆ·åˆ°ç»„ï¼Œä½¿ç”¨ user æ¨¡å—å°†ç”¨æˆ· johndoe æ·»åŠ åˆ°ç»„ mygroupï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=johndoe group=mygroup append=yes"</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># æŸ¥çœ‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">tail</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> /etc/passwd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># ä»ç»„ä¸­ç§»é™¤ç”¨æˆ·ï¼Œä½¿ç”¨ user æ¨¡å—ä»ç»„ mygroup ä¸­ç§»é™¤ç”¨æˆ· johndoeï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> user</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "name=johndoe groups=mygroup append=no"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå°±ä¸å†™åŠ åˆ›å»ºå¯†ç çš„äº†ï¼Œå› ä¸ºåˆ›å»ºå¯†ç å¿…é¡»è¦<code v-pre>å“ˆå¸Œå¯†ç </code>ï¼›æˆ‘è¿™è¾¹ç”¨äº†è½¬æ¢æˆå“ˆå¸Œçš„å¯†ç è¿˜æ˜¯ä¸è¡Œï¼Œä¸çŸ¥é“ä¸ºå•¥ï¼›</p>
<p>è¿™é‡Œå†™äº†ä¸€ä¸ªè½¬ä¸º<code v-pre>å“ˆå¸Œå¯†ç </code>çš„pyè„šæœ¬ï¼Œéœ€è¦åœ¨<code v-pre>PyCharm</code>ä¸­è¿è¡Œï¼Œäº¤äº’å¼çš„ï¼›</p>
<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> bcrypt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># åŠ å¯†å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">passwd </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2"> input</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"è¯·è¾“å…¥è¦åŠ å¯†çš„å¯†ç ï¼š"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">password </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> passwd.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">encode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'utf-8'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">salt </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> bcrypt.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">gensalt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">hashed_password </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> bcrypt.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">hashpw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(password, salt)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># è¾“å‡ºå“ˆå¸Œå¯†ç </span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"è½¬æ¢åçš„å“ˆå¸Œå¯†ç ï¼š"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">, hashed_password.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">decode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'utf-8'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># éªŒè¯å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">password_to_check </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> passwd.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">encode</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'utf-8'</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> bcrypt.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF">checkpw</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(password_to_check, hashed_password):</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"å¯†ç éªŒè¯æˆåŠŸï¼"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD">else</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"å¯†ç éªŒè¯å¤±è´¥ï¼"</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">)</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œè¿˜æ˜¯å»ºè®®å¦‚æœéœ€è¦åŠ å¯†ç æˆ–è€…ä¿®æ”¹å¯†ç ä½¿ç”¨commandã€shellã€rawæ–¹å¼å»æ‰§è¡Œ <code v-pre>passwd ç”¨æˆ·å </code>ä¿®æ”¹ï¼›</p>
<hr>
<h3 id="_5-12-unarchive-æ¨¡å—-è§£å‹ç¼©æ¨¡å—" tabindex="-1"><a class="header-anchor" href="#_5-12-unarchive-æ¨¡å—-è§£å‹ç¼©æ¨¡å—"><span>5.12 unarchive æ¨¡å—ï¼šè§£å‹ç¼©æ¨¡å—</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-13" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-13"> unarchive è§£å‹ç¼©æ¨¡å—</label></li>
</ul>
<p>è§£å‹ç¼©æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æœ‰ä¸¤ç§ç”¨æ³•ï¼š</p>
<blockquote>
<ul>
<li>
<p>1ã€å°†ansibleä¸»æœºä¸Šçš„å‹ç¼©åŒ…åœ¨æœ¬åœ°è§£å‹ç¼©åä¼ åˆ°è¿œç¨‹ä¸»æœºä¸Šï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œcopy=yes.æœ¬åœ°è§£å‹ç¼©,è§£å‹ç¼©ä½ç½®ä¸æ˜¯é»˜è®¤çš„ç›®å½•,æ²¡æ‰¾åˆ°æˆ–ä¼ å®Œåˆ äº†åä¼ åˆ°è¿œç¨‹ä¸»æœº</p>
</li>
<li>
<p>2ã€å°†è¿œç¨‹ä¸»æœºä¸Šçš„æŸä¸ªå‹ç¼©åŒ…è§£å‹ç¼©åˆ°æŒ‡å®šè·¯å¾„ä¸‹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦è®¾ç½®copy=noè¿œç¨‹ä¸»æœºä¸Šé¢çš„æ“ä½œ,ä¸æ¶‰åŠansibleæœåŠ¡ç«¯</p>
</li>
</ul>
</blockquote>
<font color=red>tarã€.tar.gzã€.tar.bz2ã€.zipç­‰éƒ½æ”¯æŒ</font><p><code v-pre>copy</code>  é»˜è®¤ä¸º<code v-pre>no</code>ï¼Œå½“copy=yesï¼Œé‚£ä¹ˆæ‹·è´çš„æ–‡ä»¶æ˜¯ä»ansibleä¸»æœºå¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºä¸Šè€Œä¸æ˜¯åœ¨åŸåœ°è§£å‹ç¼©ï¼Œå¦‚æœè®¾ç½®ä¸ºcopy=noï¼Œé‚£ä¹ˆä¼šåœ¨è¿œç¨‹ä¸»æœºä¸Šå¯»æ‰¾srcæºæ–‡ä»¶;</p>
<p><code v-pre>src</code>   æºè·¯å¾„ï¼Œå¯ä»¥æ˜¯ansibleä¸»æœºä¸Šçš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œå¦‚æœæ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œåˆ™éœ€è¦è®¾ç½®copy=no</p>
<p><code v-pre>dest</code>  æŒ‡å®šäº†è§£å‹ç¼©åæ–‡ä»¶çš„ç›®æ ‡ç›®å½•</p>
<p><code v-pre>mode</code>  è®¾ç½®è§£å‹ç¼©åçš„æ–‡ä»¶æƒé™ï¼Œå¯ä»¥ä½¿ç”¨æ•°å­—æˆ–ç¬¦å·æ¨¡å¼ï¼Œä¾‹å¦‚ <code v-pre>&quot;0644&quot;</code> æˆ– <code v-pre>&quot;u=rw,go=r&quot;</code>ã€‚</p>
<p><code v-pre>list_files</code>	 é»˜è®¤å€¼ä¸ºno,å¦‚æœè®¾ç½®ä¸ºyesï¼Œè§£å‹åŒæ—¶ï¼Œè¿”å›å‹ç¼©åŒ…çš„æ–‡ä»¶åˆ—è¡¨</p>
<p><code v-pre>remote_src</code>ï¼šå¦‚æœè®¾ç½®ä¸º <code v-pre>yes</code>ï¼Œåˆ™è¡¨ç¤º <code v-pre>src</code> å‚æ•°æ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ã€‚</p>
<p><code v-pre>extra_opts</code>: å…è®¸æ‚¨æŒ‡å®šè§£å‹ç¼©å‘½ä»¤çš„é¢å¤–é€‰é¡¹ã€‚è¿™å¯¹äºä¸€äº›ç‰¹å®šæ ¼å¼çš„å­˜æ¡£æ–‡ä»¶éå¸¸æœ‰ç”¨ã€‚</p>
<p><code v-pre>creates</code>: å¦‚æœæŒ‡å®šäº†æ­¤é€‰é¡¹ï¼Œåªæœ‰åœ¨ <code v-pre>creates</code> ä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•ä¸å­˜åœ¨æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œè§£å‹ç¼©æ“ä½œã€‚</p>
<p><code v-pre>owner</code>: è®¾ç½®è§£å‹ç¼©åæ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚</p>
<p><code v-pre>group</code>: è®¾ç½®è§£å‹ç¼©åæ–‡ä»¶çš„æ‰€å±ç»„ã€‚</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> unarchive</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "src=æºè·¯å¾„ dest=ç›®æ ‡è·¯å¾„ å…¶ä»–å‚æ•°"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦è§£å‹çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"># å°†jdk-8u221-linux-x64.tar.gzå¤åˆ¶åˆ°/home/cs/ä¸‹å¹¶è§£å‹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ~]# ansible web -m unarchive -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"src=/home/test/jdk-8u221-linux-x64.tar.gz dest=/home/cs/"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "ansible_facts"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "discovered_interpreter_python"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/usr/bin/python"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }, </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "dest"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/home/cs/",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "extract_results"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "cmd"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> [</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            "/usr/bin/gtar"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            "--extract"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            "-C"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            "/home/cs/"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            "-z"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            "-f"</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">            "/root/.ansible/tmp/ansible-tmp-1697035885.77-18118-31918487585626/source"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">        ], </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "err"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "out"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "rc"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }, </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "gid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "group"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "handler"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "TgzArchive",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "mode"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "0755",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "owner"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "size"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 26,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "src"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/root/.ansible/tmp/ansible-tmp-1697035885.77-18118-31918487585626/source",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "state"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "directory",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "uid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> 0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-13-get-url-æ¨¡å—-ä¸‹è½½æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_5-13-get-url-æ¨¡å—-ä¸‹è½½æ–‡ä»¶"><span>5.13 get_url æ¨¡å—ï¼šä¸‹è½½æ–‡ä»¶</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-14" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-14"> get_url æ¨¡å—ï¼šä¸‹è½½æ–‡ä»¶</label></li>
</ul>
<ul>
<li><code v-pre>url</code> (å¿…éœ€): æŒ‡å®šè¦ä¸‹è½½æ–‡ä»¶çš„URLã€‚è¿™æ˜¯ä¸€ä¸ªå¿…éœ€å‚æ•°ã€‚</li>
<li><code v-pre>dest</code> (å¿…éœ€): æŒ‡å®šæ–‡ä»¶å°†ä¿å­˜åˆ°æœ¬åœ°ç›®æ ‡ä¸»æœºä¸Šçš„ç›®æ ‡è·¯å¾„ã€‚è¿™æ˜¯ä¸€ä¸ªå¿…éœ€å‚æ•°ã€‚</li>
<li><code v-pre>force</code> (å¯é€‰): å¦‚æœè®¾ç½®ä¸º <code v-pre>yes</code>ï¼Œå°†å¼ºåˆ¶ä¸‹è½½æ–‡ä»¶ï¼Œå³ä½¿æ–‡ä»¶å·²ç»å­˜åœ¨ã€‚é»˜è®¤ä¸º <code v-pre>no</code>ã€‚</li>
<li><code v-pre>checksum</code> (å¯é€‰): æä¾›è¦ä¸‹è½½æ–‡ä»¶çš„æ ¡éªŒå’Œï¼Œä»¥ç¡®ä¿æ–‡ä»¶å®Œæ•´æ€§ã€‚</li>
<li><code v-pre>backup</code> (å¯é€‰): å¦‚æœè®¾ç½®ä¸º <code v-pre>yes</code>ï¼Œå°†åœ¨ä¸‹è½½ä¹‹å‰å¤‡ä»½ç°æœ‰æ–‡ä»¶ã€‚é»˜è®¤ä¸º <code v-pre>no</code>ã€‚</li>
<li><code v-pre>timeout</code> (å¯é€‰): è®¾ç½®ä¸‹è½½æ–‡ä»¶çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ã€‚</li>
<li><code v-pre>url_username</code> (å¯é€‰): å¦‚æœç›®æ ‡URLéœ€è¦èº«ä»½éªŒè¯ï¼Œå¯ä»¥æä¾›ç”¨æˆ·åã€‚</li>
<li><code v-pre>url_password</code> (å¯é€‰): å¦‚æœç›®æ ‡URLéœ€è¦èº«ä»½éªŒè¯ï¼Œå¯ä»¥æä¾›å¯†ç ã€‚</li>
<li><code v-pre>owner</code> (å¯é€‰): è®¾ç½®ä¸‹è½½åæ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚</li>
<li><code v-pre>group</code> (å¯é€‰): è®¾ç½®ä¸‹è½½åæ–‡ä»¶çš„æ‰€å±ç»„ã€‚</li>
<li><code v-pre>mode</code> (å¯é€‰): è®¾ç½®ä¸‹è½½åæ–‡ä»¶çš„æƒé™æ¨¡å¼ã€‚</li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> ä¸»æœºç»„åç§°</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> get_url</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "url=è¿œç¨‹ä¸‹è½½çš„url dest=ç›®æ ‡è·¯å¾„ å…¶ä»–å‚æ•°"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> get_url</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "url=https://example.com/file.txt dest=/path/to/local/file.txt"</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ansible]# vim /etc/ansible/hosts </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#é…ç½®è¦ä¸‹è½½åˆ°çš„åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web]</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[web:vars]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75">ansible_ssh_pass</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">'123123'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic">#æ‰§è¡Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">[root@localhost ~]# ansible web -m get_url -a </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">"url=https://liucy.blog.csdn.net/article/details/133460612?spm=1001.2014.3001.5502 dest=/home/cs/csdn.txt"</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">172.16.11.209</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">CHANGED</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> => </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">{</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "ansible_facts"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> {</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">        "discovered_interpreter_python"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/usr/bin/python"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">    }, </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "changed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> true</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379">,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "checksum_dest"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> null,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "checksum_src"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "263c306aaaa75ea1890f33fb846e17c47bac1a7c",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "dest"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/home/cs/csdn.txt",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "elapsed"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "gid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "group"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "md5sum"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "6337bd5bd661d45598c6402652c59e03",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "mode"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "0644",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "msg"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "OK (unknown bytes)",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "owner"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "root",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "size"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 244776,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "src"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "/root/.ansible/tmp/ansible-tmp-1697037340.77-18641-38036675583497/tmp0nw1sp",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "state"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "file",</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "status_code"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 200,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "uid"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> 0,</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">    "url"</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2">:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> "https://liucy.blog.csdn.net/article/details/133460612?spm=1001.2014.3001.5502"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF">}</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr>
<h3 id="_5-14-setup-æ¨¡å—-è·å–ä¸»æœºä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#_5-14-setup-æ¨¡å—-è·å–ä¸»æœºä¿¡æ¯"><span>5.14 setup æ¨¡å—ï¼šè·å–ä¸»æœºä¿¡æ¯</span></a></h3>
<ul class="task-list-container">
<li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-15" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-15"> setup æ¨¡å—ï¼šè·å–ä¸»æœºä¿¡æ¯</label></li>
</ul>
<p><code v-pre>setup</code> æ¨¡å—ä¸ä»…æ˜¯ä¸€ä¸ªå¸¸è§çš„æ¨¡å—ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ¨¡å—ã€‚å®ƒç”¨äºè·å–ç›®æ ‡ä¸»æœºçš„ç³»ç»Ÿä¿¡æ¯å’Œäº‹å®ï¼ˆfactsï¼‰ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯è¿”å›åˆ° Ansible Playbook ä¸­ï¼Œä»¥ä¾›åç»­ä»»åŠ¡ä½¿ç”¨ã€‚<code v-pre>setup</code> æ¨¡å—é€šå¸¸ä¸éœ€è¦é¢å¤–çš„å‚æ•°ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨è·å–ç³»ç»Ÿä¿¡æ¯ã€‚</p>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> web</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379"> setup</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div></div></div><p>è·å–çš„ä¿¡æ¯è¾ƒé•¿ï¼Œå¯ä»¥ä½¿ç”¨é‡å®šå‘åˆ°ä¸€ä¸ªç©ºæ–‡ä»¶ä¸­ã€‚</p>
<ul>
<li>å¸¸ç”¨çš„å‡ ä¸ªå‚æ•°ï¼š</li>
</ul>
<div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34"><pre v-pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_all_ipv4_addresses</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ipv4çš„æ‰€æœ‰åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_all_ipv6_addresses</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ipv6çš„æ‰€æœ‰åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_date_time</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # è·å–åˆ°æ§åˆ¶èŠ‚ç‚¹æ—¶é—´</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_default_ipv4</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # é»˜è®¤çš„ipv4åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_distribution</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ç³»ç»Ÿ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_distribution_major_version</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ç³»ç»Ÿçš„å¤§ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_distribution_version</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ç³»ç»Ÿçš„ç‰ˆæœ¬å·</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_domain</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿæ‰€åœ¨çš„åŸŸ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_env</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_hostname</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿçš„ä¸»æœºå</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_fqdn</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿçš„å…¨å</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_machine</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿçš„æ¶æ„</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_memory_mb</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿçš„å†…å­˜ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_os_family</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ç³»ç»Ÿçš„å®¶æ—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_pkg_mgr</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ç³»ç»Ÿçš„åŒ…ç®¡ç†å·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_processor_cores</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿçš„cpuçš„æ ¸æ•°(æ¯é¢—)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_processor_count</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿcpuçš„é¢—æ•°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_processor_vcpus</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> #ç³»ç»Ÿcpuçš„æ€»ä¸ªæ•°=cpuçš„é¢—æ•°*CPUçš„æ ¸æ•°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF">ansible_python</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic"> # ç³»ç»Ÿä¸Šçš„python</span></span></code></pre>
<div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡³æ­¤ï¼ŒAnsibleçš„ad-hocæ¨¡å¼å°±è®²è§£å®Œäº†ï¼Œä¸‹é¢è®²è§£çš„æ˜¯playbookæ¨¡å¼ï¼Œå› ä¸ºplaybookæ¨¡å¼è¦ä½¿ç”¨yamlæ ¼å¼çš„è¯­æ³•ï¼Œæ‰€ä»¥å¯ä»¥å…ˆå»äº†è§£ä¸€ä¸‹yamlè¯­æ³•ï¼›æ¨èï¼š<a href="https://liucy.blog.csdn.net/article/details/129041706" target="_blank" rel="noopener noreferrer">yamlæ–‡ä»¶æ ¼å¼è¯¦è§£åŠå®ä¾‹</a></p>
<h2 id="_6ã€ç›¸å…³æ–‡ç« " tabindex="-1"><a class="header-anchor" href="#_6ã€ç›¸å…³æ–‡ç« "><span>6ã€ç›¸å…³æ–‡ç« </span></a></h2>
<table>
<thead>
<tr>
<th style="text-align:center">æ–‡ç« æ ‡é¢˜</th>
<th style="text-align:center">æ–‡ç« é“¾æ¥</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133769300" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆä¸€ï¼‰ç®€ä»‹åŠéƒ¨ç½²ã€æ¸…å•</a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133769300" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133769300</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133772023" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆäºŒï¼‰ad-hoc æ¨¡å¼è¯¦è§£</a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133772023" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133772023</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133899966" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆä¸‰ï¼‰Playbook æ¨¡å¼è¯¦è§£</a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133899966" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133899966</a></td>
</tr>
<tr>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133994509" target="_blank" rel="noopener noreferrer">Ansibleè‡ªåŠ¨åŒ–è¿ç»´ï¼ˆå››ï¼‰jinja2 æ¨¡æ¿ã€Rolesè§’è‰²è¯¦è§£</a></td>
<td style="text-align:center"><a href="https://liucy.blog.csdn.net/article/details/133994509" target="_blank" rel="noopener noreferrer">https://liucy.blog.csdn.net/article/details/133994509</a></td>
</tr>
</tbody>
</table>
</div></template>


